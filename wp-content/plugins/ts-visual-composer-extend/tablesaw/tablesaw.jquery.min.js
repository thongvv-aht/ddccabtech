!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,a){return void 0===a&&(a="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(a),a}:e(jQuery)}(function(e){"use strict";var t="undefined"!=typeof window?window:this,a={i18n:{modes:["Swipe","Toggle","Stack"],columns:'Col<span class="a11y-sm">umn</span>s',columnBtnText:"Columns",columnsDialogError:"No eligible columns.",sort:"Sort"},mustard:"head"in document&&(!window.blackberry||window.WebKitPoint)&&!window.operamini};a.mustard&&e(document.documentElement).addClass("tablesaw-enhanced"),function(){var s="tablesaw",n={toolbar:"tablesaw-bar"},i={create:"tablesawcreate",destroy:"tablesawdestroy",refresh:"tablesawrefresh",resize:"tablesawresize"},o="stack",r="table",l="[data-tablesaw],[data-tablesaw-mode],[data-tablesaw-sortable]",c={};a.events=i;var d=function(t){if(!t)throw new Error("Tablesaw requires an element.");this.table=t,this.$table=e(t),this.$thead=this.$table.children().filter("thead").eq(0),this.$tbody=this.$table.children().filter("tbody"),this.mode=this.$table.attr("data-tablesaw-mode")||o,this.init()};d.prototype.init=function(){this.$table.attr("id")||this.$table.attr("id",s+"-"+Math.round(1e4*Math.random())),this.createToolbar(),this._initCells(),this.$table.data(s,this),this.$table.trigger(i.create,[this])},d.prototype.getConfig=function(t){var a=e.extend(c,t||{});return e.extend(a,"undefined"!=typeof TablesawConfig?TablesawConfig:{})},d.prototype._getPrimaryHeaderRow=function(){return this._getHeaderRows().eq(0)},d.prototype._getHeaderRows=function(){return this.$thead.children().filter("tr").filter(function(){return!e(this).is("[data-tablesaw-ignorerow]")})},d.prototype._getRowIndex=function(e){return e.prevAll().length},d.prototype._getHeaderRowIndeces=function(){var t=this,a=[];return this._getHeaderRows().each(function(){a.push(t._getRowIndex(e(this)))}),a},d.prototype._getPrimaryHeaderCells=function(e){return(e||this._getPrimaryHeaderRow()).find("th")},d.prototype._findPrimaryHeadersForCell=function(e){for(var t=this._getPrimaryHeaderRow(),a=this._getPrimaryHeaderCells(t),s=this._getRowIndex(t),n=[],i=0;i<this.headerMapping.length;i++)if(i!==s)for(var o=0;o<this.headerMapping[i].length;o++)this.headerMapping[i][o]===e&&n.push(a[o]);return n},d.prototype.getRows=function(){var t=this;return this.$table.find("tr").filter(function(){return e(this).closest("table").is(t.$table)})},d.prototype.getBodyRows=function(t){return(t?e(t):this.$tbody).children().filter("tr")},d.prototype.getHeaderCellIndex=function(e){for(var t=this.headerMapping[0],a=0;a<t.length;a++)if(t[a]===e)return a;return-1},d.prototype._initCells=function(){var t=this.getRows(),a=[];t.each(function(e){a[e]=[]}),t.each(function(t){var s=0,n=e(this),i=n.children();i.each(function(){for(var e=parseInt(this.getAttribute("colspan"),10),n=parseInt(this.getAttribute("rowspan"),10);a[t][s];)s++;if(a[t][s]=this,e)for(var i=0;e-1>i;i++)s++,a[t][s]=this;if(n)for(var o=1;n>o;o++)a[t+o][s]=this;s++})});for(var s=this._getHeaderRowIndeces(),n=0;n<a[0].length;n++)for(var i=0,o=s.length;o>i;i++){var r,l=a[s[i]][n],c=s[i];for(l.cells||(l.cells=[]);c<a.length;)r=a[c][n],l!==r&&l.cells.push(r),c++}this.headerMapping=a},d.prototype.refresh=function(){this._initCells(),this.$table.trigger(i.refresh,[this])},d.prototype.createToolbar=function(){var t=this.$table.prev().filter("."+n.toolbar);t.length||(t=e("<div>").addClass(n.toolbar).insertBefore(this.$table)),this.$toolbar=t,this.mode&&this.$toolbar.addClass("tablesaw-mode-"+this.mode)},d.prototype.destroy=function(){this.$table.prev().filter("."+n.toolbar).each(function(){this.className=this.className.replace(/\btablesaw-mode\-\w*\b/gi,"")});var t=this.$table.attr("id");e(document).off("."+t),e(window).off("."+t),this.$table.trigger(i.destroy,[this]),this.$table.removeData(s)},e.fn[s]=function(){return this.each(function(){var t=e(this);t.data(s)||new d(this)})};var h=e(t.document);h.on("enhance.tablesaw",function(t){a.mustard&&e(t.target).find(r).filter(l)[s]()});var u,f=!1;h.on("scroll.tablesaw",function(){f=!0,t.clearTimeout(u),u=t.setTimeout(function(){f=!1},300)});var b;e(t).on("resize",function(){f||(t.clearTimeout(b),b=t.setTimeout(function(){h.trigger(i.resize)},150))})}(),function(){var t={stackTable:"tablesaw-stack",cellLabels:"tablesaw-cell-label",cellContentLabels:"tablesaw-cell-content"},s={key:"tablesaw-stack"},n={labelless:"data-tablesaw-no-labels",hideempty:"data-tablesaw-hide-empty"},i=function(t,a){this.tablesaw=a,this.$table=e(t),this.labelless=this.$table.is("["+n.labelless+"]"),this.hideempty=this.$table.is("["+n.hideempty+"]"),this.$table.data(s.key,this)};i.prototype.init=function(){if(this.$table.addClass(t.stackTable),!this.labelless){var a=this;this.$table.find("th, td").filter(function(){return!e(this).closest("thead").length}).filter(function(){return!(e(this).closest("tr").is("["+n.labelless+"]")||a.hideempty&&!e(this).html())}).each(function(){var s=e(document.createElement("b")).addClass(t.cellLabels),n=e(this);e(a.tablesaw._findPrimaryHeadersForCell(this)).each(function(t){var a=e(this.cloneNode(!0)),n=a.find(".tablesaw-sortable-btn");a.find(".tablesaw-sortable-arrow").remove();var i=a.find("[data-tablesaw-checkall]");return i.closest("label").remove(),i.length?void(s=e([])):(t>0&&s.append(document.createTextNode(", ")),void s.append(n.length?n[0].childNodes:a[0].childNodes))}),s.length&&!n.find("."+t.cellContentLabels).length&&n.wrapInner("<span class='"+t.cellContentLabels+"'></span>");var i=n.find("."+t.cellLabels);i.length?i.replaceWith(s):n.prepend(s)})}},i.prototype.destroy=function(){this.$table.removeClass(t.stackTable),this.$table.find("."+t.cellLabels).remove(),this.$table.find("."+t.cellContentLabels).each(function(){e(this).replaceWith(this.childNodes)})},e(document).on(a.events.create,function(e,t){if("stack"===t.mode){var a=new i(t.table,t);a.init()}}).on(a.events.refresh,function(t,a){"stack"===a.mode&&e(a.table).data(s.key).init()}).on(a.events.destroy,function(t,a){"stack"===a.mode&&e(a.table).data(s.key).destroy()})}(),function(){var t="tablesawbtn",a={_create:function(){return e(this).each(function(){e(this).trigger("beforecreate."+t)[t]("_init").trigger("create."+t)})},_init:function(){var a=e(this),s=this.getElementsByTagName("select")[0];return s&&e(this).addClass("btn-select tablesaw-btn-select")[t]("_select",s),a},_select:function(t){var a=function(t,a){var s,n,i=e(a).find("option"),o=document.createElement("span"),r=!1;if(o.setAttribute("aria-hidden","true"),o.innerHTML="&#160;",i.each(function(){var e=this;e.selected&&(o.innerHTML=e.text)}),n=t.childNodes,i.length>0){for(var l=0,c=n.length;c>l;l++)s=n[l],s&&"SPAN"===s.nodeName.toUpperCase()&&(t.replaceChild(o,s),r=!0);r||t.insertBefore(o,t.firstChild)}};a(this,t),e(this).on("change refresh",function(){a(this,t)})}};e.fn[t]=function(a,s,n,i){return this.each(function(){return a&&"string"==typeof a?e.fn[t].prototype[a].call(this,s,n,i):e(this).data(t+"active")?e(this):(e(this).data(t+"active",!0),void e.fn[t].prototype._create.call(this))})},e.extend(e.fn[t].prototype,a)}(),function(){var t={key:"tablesaw-coltoggle"},s=function(a){this.$table=e(a),this.$table.length&&(this.tablesaw=this.$table.data("tablesaw"),this.attributes={subrow:"data-tablesaw-subrow",ignorerow:"data-tablesaw-ignorerow",btnTarget:"data-tablesaw-columntoggle-btn-target"},this.classes={columnToggleTable:"tablesaw-columntoggle",columnBtnContain:"tablesaw-columntoggle-btnwrap tablesaw-advance",columnBtn:"tablesaw-columntoggle-btn tablesaw-nav-btn down",popup:"tablesaw-columntoggle-popup",priorityPrefix:"tablesaw-priority-",toolbar:"tablesaw-bar"},this.$headers=this.tablesaw._getPrimaryHeaderCells(),this.$table.data(t.key,this))};s.prototype.init=function(){function t(t){t&&e(t.target).closest("."+d.classes.popup).length||(e(document).off("click."+n),o.removeClass("up").addClass("down"),c.removeClass("visible"))}function s(){c.addClass("visible"),o.removeClass("down").addClass("up"),e(document).off("click."+n,t),window.clearTimeout(b),b=window.setTimeout(function(){e(document).on("click."+n,t)},15)}if(this.$table.length){var n,i,o,r,l,c,d=this,h=this.tablesaw.getConfig({getColumnToggleLabelTemplate:function(e){return"<label><input type='checkbox' checked>"+e+"</label>"}});this.$table.addClass(this.classes.columnToggleTable),n=this.$table.attr("id"),i=n+"-popup",c=e("<div class='"+this.classes.columnBtnContain+"'></div>"),o=e("<a href='#"+i+"' class='btn btn-micro "+this.classes.columnBtn+"' data-popup-link><span>"+(this.$table.attr("data-tablesaw-string-button")||a.i18n.columnBtnText)+"</span></a>"),r=e("<div class='dialog-table-coltoggle "+this.classes.popup+"' id='"+i+"'></div>"),l=e("<div class='btn-group'></div>");var u=!1;this.$headers.each(function(){var t=e(this),a=t.attr("data-tablesaw-priority"),s=d.$getCells(this);a&&"persist"!==a&&(s.addClass(d.classes.priorityPrefix+a),e(h.getColumnToggleLabelTemplate(t.text())).appendTo(l).find('input[type="checkbox"]').data("tablesaw-header",this),u=!0)}),u||l.append("<label>"+(this.$table.attr("data-tablesaw-string-error")||a.i18n.columnsDialogError)+"</label>"),l.appendTo(r),l.find('input[type="checkbox"]').on("change",function(a){var s=a.target.checked,i=d.getHeaderFromCheckbox(a.target),o=d.$getCells(i);o[s?"removeClass":"addClass"]("tablesaw-cell-hidden"),o[s?"addClass":"removeClass"]("tablesaw-cell-visible"),d.updateColspanIgnoredRows(s,e(i).add(i.cells)),d.$table.trigger("tablesawcolumns"),e(document).off("click."+n,t),window.clearTimeout(b),b=window.setTimeout(function(){e(document).one("click."+n,t)},15)}),o.appendTo(c);var f=e(this.$table.attr(this.attributes.btnTarget));c.appendTo(f.length?f:this.$table.prev().filter("."+this.classes.toolbar));var b;o.on("click.tablesaw",function(e){e.preventDefault(),c.is(".visible")?t():s()}),r.appendTo(c),this.$menu=l,e(window).on(a.events.resize+"."+n,function(){d.refreshToggle()}),this.refreshToggle()}},s.prototype.updateColspanIgnoredRows=function(t,a){this.$table.find("["+this.attributes.subrow+"],["+this.attributes.ignorerow+"]").each(function(){var s,n,i,o,r=e(this),l=r.find("td[colspan]").eq(0);t===!0||t===!1?(o=a.filter(function(){return this===l[0]}).length?t?1:-1:0,n=parseInt(l.attr("colspan"),10)+o):(i=l.data("original-colspan"),i?n=i:(n=parseInt(l.attr("colspan"),10),l.data("original-colspan",n)),s=r.find("td").filter(function(){return this!==l[0]&&"none"===e(this).css("display")}).length,n-=t-s),l.attr("colspan",n)})},s.prototype.$getCells=function(t){var a=this;return e(t).add(t.cells).filter(function(){var t=e(this),s=t.parent(),n=t.is("[colspan]");return!(s.is("["+a.attributes.subrow+"]")||s.is("["+a.attributes.ignorerow+"]")&&n)})},s.prototype.getHeaderFromCheckbox=function(t){return e(t).data("tablesaw-header")},s.prototype.refreshToggle=function(){var e=this,t=0;this.$menu.find("input").each(function(){var a=e.getHeaderFromCheckbox(this),s="table-cell"===e.$getCells(a).eq(0).css("display");this.checked=s,s||t++}),this.updateColspanIgnoredRows(t)},s.prototype.destroy=function(){this.$table.removeClass(this.classes.columnToggleTable),this.$table.find("th, td").each(function(){var t=e(this);t.removeClass("tablesaw-cell-hidden").removeClass("tablesaw-cell-visible"),this.className=this.className.replace(/\bui\-table\-priority\-\d\b/g,"")})},e(document).on(a.events.create,function(e,t){if("columntoggle"===t.mode){var a=new s(t.table);a.init()}}),e(document).on(a.events.destroy,function(a,s){"columntoggle"===s.mode&&e(s.table).data(t.key).destroy()})}(),function(){function t(t){var a=[];return e(t.childNodes).each(function(){var t=e(this);t.is("input, select")?a.push(t.val()):t.is(".tablesaw-cell-label")||a.push(t.parent().attr("data-order")?(t.parent().attr("data-order")||"").replace(/^\s+|\s+$/g,""):(t.text()||"").replace(/^\s+|\s+$/g,""))}),a.join("")}var s="tablesaw-sortable",n="table[data-"+s+"]",i="[data-"+s+"-switch]",o={sortCol:"data-tablesaw-sortable-col",defaultCol:"data-tablesaw-sortable-default-col",numericCol:"data-tablesaw-sortable-numeric",subRow:"data-tablesaw-subrow",ignoreRow:"data-tablesaw-ignorerow"},r={head:s+"-head",ascend:s+"-ascending",descend:s+"-descending",switcher:s+"-switch",tableToolbar:"tablesaw-toolbar",sortButton:s+"-btn"},l={_create:function(t){return e(this).each(function(){var a=e(this).data(s+"-init");return a?!1:void e(this).data(s+"-init",!0).trigger("beforecreate."+s)[s]("_init",t).trigger("create."+s)})},_init:function(){function n(t){e.each(t,function(t,a){e(a).addClass(r.head)})}function l(t,a){e.each(t,function(t,s){var n=e("<button class='"+r.sortButton+"'/>");n.on("click",{col:s},a),e(s).wrapInner(n).find("button").append("<span class='tablesaw-sortable-arrow'>")})}function c(t){e.each(t,function(t,a){var s=e(a);s.removeAttr(o.defaultCol),s.removeClass(r.ascend),s.removeClass(r.descend)})}function d(t){if(!e(t.target).is("a[href]")){t.stopPropagation();var a=e(t.target).closest("["+o.sortCol+"]"),n=t.data.col,i=b.index(a[0]);c(a.closest("thead").find("th").filter(function(){return this!==a[0]})),a.is("."+r.descend)||!a.is("."+r.ascend)?(w[s]("sortBy",n,!0),i+="_asc"):(w[s]("sortBy",n),i+="_desc"),p&&p.find("select").val(i).trigger("refresh"),t.preventDefault()}}function h(t,a){var n=e(this).parent(),i=t,o=b.index(n[0]);c(n.siblings()),a?(w[s]("sortBy",i,!0),o+="_asc"):(w[s]("sortBy",i),o+="_desc"),p&&p.find("select").val(o).trigger("refresh")}function u(t){e.each(t,function(a,s){var n=e(s);n.is("["+o.defaultCol+"]")&&(n.is("."+r.descend)?h(t[a],!1):(n.addClass(r.ascend),h(t[a],!0)))})}function f(n){p=e("<div>").addClass(r.switcher).addClass(r.tableToolbar);var i=["<label>"+(w.attr("data-tablesaw-string-sort")||a.i18n.sort)+":"];i.push('<span class="btn tablesaw-btn"><select>'),n.each(function(a){var s=e(this),n=s.is("["+o.defaultCol+"]"),l=s.is("."+r.descend),c=s.is("["+o.numericCol+"]"),d=0,h=5;e(this.cells.slice(0,h)).each(function(){isNaN(parseInt(t(this),10))||d++});var u=d===h;c||s.attr(o.numericCol,u?"":"false"),i.push("<option"+(n&&!l?" selected":"")+' value="'+a+'_asc">'+s.text()+" "+(u?"&#x2191;":"(A-Z)")+"</option>"),i.push("<option"+(n&&l?" selected":"")+' value="'+a+'_desc">'+s.text()+" "+(u?"&#x2193;":"(Z-A)")+"</option>")}),i.push("</select></span></label>"),p.html(i.join(""));var l=w.prev().filter(".tablesaw-bar"),d=l.children().eq(0);d.length?p.insertBefore(d):p.appendTo(l),p.find(".tablesaw-btn").tablesawbtn(),p.find("select").on("change",function(){var t=e(this).val().split("_"),a=n.eq(t[0]);c(a.siblings()),w[s]("sortBy",a.get(0),"asc"===t[1])})}var b,p,w=e(this);w.addClass(s),b=w.children().filter("thead").find("th["+o.sortCol+"]"),n(b),l(b,d),u(b),w.is(i)&&f(b)},sortRows:function(a,s,n,i,r){function l(a,s){var n=[];return e.each(a,function(a,i){for(var r=i.parentNode,l=e(r),c=[],d=l.next();d.is("["+o.subRow+"]");)c.push(d[0]),d=d.next();var h=r.parentNode;l.is("["+o.subRow+"]")||h===s&&n.push({element:i,cell:t(i),row:r,subrows:c.length?c:null,ignored:l.is("["+o.ignoreRow+"]")})}),n}function c(e,t){var a,s=/[^\-\+\d\.]/g;return a=e?function(e,a){return e.ignored||a.ignored?0:t?parseFloat(e.cell.replace(s,""))-parseFloat(a.cell.replace(s,"")):e.cell.toLowerCase()>a.cell.toLowerCase()?1:-1}:function(e,a){return e.ignored||a.ignored?0:t?parseFloat(a.cell.replace(s,""))-parseFloat(e.cell.replace(s,"")):e.cell.toLowerCase()<a.cell.toLowerCase()?1:-1}}function d(e){var t,a,s=[];for(t=0,a=e.length;a>t;t++)s.push(e[t].row),e[t].subrows&&s.push(e[t].subrows);return s}var h,u,f=l(i.cells,r),b=e(i).data("tablesaw-sort");return h=(b&&"function"==typeof b?b(n):!1)||c(n,e(i).is("["+o.numericCol+"]")&&!e(i).is("["+o.numericCol+'="false"]')),u=f.sort(h),a=d(u)},makeColDefault:function(t,a){var s=e(t);s.attr(o.defaultCol,"true"),a?(s.removeClass(r.descend),s.addClass(r.ascend)):(s.removeClass(r.ascend),s.addClass(r.descend))},sortBy:function(t,a){var n,i=e(this),o=i.data("tablesaw");o.$tbody.each(function(){var r,l,c,d=this,h=e(this),u=o.getBodyRows(d),f=o.headerMapping[0];for(l=0,c=f.length;c>l;l++)if(f[l]===t){n=l;break}for(r=i[s]("sortRows",u,n,a,t,d),l=0,c=r.length;c>l;l++)h.append(r[l])}),i[s]("makeColDefault",t,a),i.trigger("tablesaw-sorted")}};e.fn[s]=function(t){var a,n=Array.prototype.slice.call(arguments,1);return t&&"string"==typeof t?(a=e.fn[s].prototype[t].apply(this[0],n),"undefined"!=typeof a?a:e(this)):(e(this).data(s+"-active")||(e(this).data(s+"-active",!0),e.fn[s].prototype._create.call(this,t)),e(this))},e.extend(e.fn[s].prototype,l),e(document).on(a.events.create,function(e,t){t.$table.is(n)&&t.$table[s]()})}(),function(){function s(s,o){function r(t){return e(t.cells).add(t)}function l(e){r(e).removeClass("tablesaw-cell-hidden")}function c(e){r(e).addClass("tablesaw-cell-hidden")}function d(e){r(e).addClass("tablesaw-cell-persist")}function h(t){return e(t).is('[data-tablesaw-priority="persist"]')}function u(){o.removeClass(n.persistWidths),e("#"+H+"-persist").remove()}function f(){var t,a="#"+H+".tablesaw-swipe ",s=[],i=o.width(),r=[];if(x.each(function(e){var t;h(this)&&(t=this.offsetWidth,.75*i>t&&(r.push(e+"-"+t),s.push(a+" .tablesaw-cell-persist:nth-child("+(e+1)+") { width: "+t+"px; }")))}),t=r.join("_"),s.length){o.addClass(n.persistWidths);var l=e("#"+H+"-persist");l.length&&l.data("tablesaw-hash")===t||(l.remove(),e("<style>"+s.join("\n")+"</style>").attr("id",H+"-persist").data("tablesaw-hash",t).appendTo(R))}}function b(){var t,a=[];return _.each(function(s){var n=e(this),i="none"===n.css("display")||n.is(".tablesaw-cell-hidden");if(i||t){if(i&&t)return a[1]=s,!1}else t=!0,a[0]=s}),a}function p(){var e=b();return[e[1]-1,e[0]-1]}function w(e){return e?b():p()}function g(e){return e[1]>-1&&e[1]<_.length}function v(){var e=o.attr("data-tablesaw-swipe-media");return!e||"matchMedia"in t&&t.matchMedia(e).matches}function m(){if(v()){var t=o.parent().width(),a=[],s=0,n=[],i=x.length;x.each(function(o){var r=e(this),l=r.is('[data-tablesaw-priority="persist"]');a.push(l),s+=B[o],n.push(s),(l||s>t)&&i--});var r=0===i;x.each(function(e){return a[e]?void d(this):void(n[e]<=t||r?(r=!1,l(this)):c(this))}),u(),o.trigger("tablesawcolumns")}}function C(e){var t=w(e);g(t)&&(isNaN(t[0])&&(t[0]=e?0:_.length-1),f(),c(_.get(t[0])),l(_.get(t[1])),o.trigger("tablesawcolumns"))}function y(e,t){return(e.touches||e.originalEvent.touches)[0][t]}var k=e("<div class='tablesaw-advance'></div>"),$=e("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro left' title='Previous Column'></a>").appendTo(k),T=e("<a href='#' class='btn tablesaw-nav-btn tablesaw-btn btn-micro right' title='Next Column'></a>").appendTo(k),x=s._getPrimaryHeaderCells(),_=x.not('[data-tablesaw-priority="persist"]'),B=[],R=e(document.head||"head"),H=o.attr("id");if(!x.length)throw new Error("tablesaw swipe: no header cells found. Are you using <th> inside of <thead>?");o.addClass("tablesaw-swipe"),x.each(function(){var e=this.offsetWidth;B.push(e)}),k.appendTo(o.prev().filter(".tablesaw-bar")),H||(H="tableswipe-"+Math.round(1e4*Math.random()),o.attr("id",H)),$.add(T).on("click",function(t){C(!!e(t.target).closest(T).length),t.preventDefault()}),o.is("["+i.disableTouchEvents+"]")||o.on("touchstart.swipetoggle",function(n){var i,o,r=y(n,"pageX"),l=y(n,"pageY"),c=window.pageYOffset;e(t).off(a.events.resize,m),e(this).on("touchmove.swipetoggle",function(e){i=y(e,"pageX"),o=y(e,"pageY")}).on("touchend.swipetoggle",function(){var n=s.getConfig({swipeHorizontalThreshold:30,swipeVerticalThreshold:30}),d=n.swipe?n.swipe.verticalThreshold:n.swipeVerticalThreshold,h=n.swipe?n.swipe.horizontalThreshold:n.swipeHorizontalThreshold,u=Math.abs(window.pageYOffset-c)>=d,f=Math.abs(o-l)>=d;f||u||(-1*h>i-r&&C(!0),i-r>h&&C(!1)),window.setTimeout(function(){e(t).on(a.events.resize,m)},300),e(this).off("touchmove.swipetoggle touchend.swipetoggle")})}),o.on("tablesawcolumns.swipetoggle",function(){var e=g(p()),t=g(b());$[e?"removeClass":"addClass"](n.hideBtn),T[t?"removeClass":"addClass"](n.hideBtn),$.closest("."+n.toolbar)[e||t?"removeClass":"addClass"](n.allColumnsVisible)}).on("tablesawnext.swipetoggle",function(){C(!0)}).on("tablesawprev.swipetoggle",function(){C(!1)}).on(a.events.destroy+".swipetoggle",function(){var s=e(this);s.removeClass("tablesaw-swipe"),s.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),e(t).off(a.events.resize,m),s.off(".swipetoggle")}).on(a.events.refresh,function(){B=[],x.each(function(){var e=this.offsetWidth;B.push(e)}),m()}),m(),e(t).on(a.events.resize,m)}var n={toolbar:"tablesaw-bar",hideBtn:"disabled",persistWidths:"tablesaw-fix-persist",allColumnsVisible:"tablesaw-all-cols-visible"},i={disableTouchEvents:"data-tablesaw-no-touch"};e(document).on(a.events.create,function(e,t){"swipe"===t.mode&&s(t,t.$table)})}(),function(){function s(s){function i(e){var a=e.attr(n.attr.init);return!a||t.matchMedia&&t.matchMedia(a).matches}function o(){if(!i(s))return void r.css("display","none");r.css("display","block");var t=l.find("li").removeClass(c);s.find("thead th").each(function(a){"none"===e(this).css("display")&&t.eq(a).addClass(c)})}var r=e('<div class="tablesaw-advance minimap">'),l=e('<ul class="tablesaw-advance-dots">').appendTo(r),c="tablesaw-advance-dots-hide",d=s.find("thead th");d.each(function(){l.append("<li><i></i></li>")}),r.appendTo(s.prev().filter(".tablesaw-bar")),o(),e(t).on(a.events.resize,o),s.on("tablesawcolumns.minimap",function(){o()}).on(a.events.destroy+".minimap",function(){var s=e(this);s.prev().filter(".tablesaw-bar").find(".tablesaw-advance").remove(),e(t).off(a.events.resize,o),s.off(".minimap")})}var n={attr:{init:"data-tablesaw-minimap"}};e(document).on(a.events.create,function(e,t){"swipe"!==t.mode&&"columntoggle"!==t.mode||!t.$table.is("[ "+n.attr.init+"]")||s(t.$table)})}(),function(){var s={selectors:{init:"table[data-tablesaw-mode-switch]"},attributes:{excludeMode:"data-tablesaw-mode-exclude"},classes:{main:"tablesaw-modeswitch",toolbar:"tablesaw-toolbar"},modes:["swipe","columntoggle","stack"],init:function(t){var n,i=e(t),o=i.attr(s.attributes.excludeMode),r=i.prev().filter(".tablesaw-bar"),l="",c=e("<div>").addClass(s.classes.main+" "+s.classes.toolbar),d=["<label>"+(i.attr("data-tablesaw-string-columns")||a.i18n.columns)+":"],h=i.attr("data-tablesaw-mode");d.push('<span class="btn tablesaw-btn"><select>');for(var u=0,f=s.modes.length;f>u;u++)o&&o.toLowerCase()===s.modes[u]||(n=h===s.modes[u],n&&(l=s.modes[u]),d.push("<option"+(n?" selected":"")+' value="'+s.modes[u]+'">'+(i.attr("data-tablesaw-string-modes").split(",")[u]||a.i18n.modes[u])+"</option>"));d.push("</select></span></label>"),c.html(d.join(""));var b=r.find(".tablesaw-advance").eq(0);b.length?c.insertBefore(b):c.appendTo(r),c.find(".tablesaw-btn").tablesawbtn(),c.find("select").on("change",s.onModeChange)},onModeChange:function(){var t=e(this),a=t.closest("."+s.classes.main),n=t.closest(".tablesaw-bar").next().eq(0),i=t.val();a.remove(),n.data("tablesaw").destroy(),n.attr("data-tablesaw-mode",i),n.tablesaw(),setTimeout(function(){n.data("tablesaw").refresh()},250)}};e(t.document).on(a.events.create,function(e,t){t.$table.is(s.selectors.init)&&s.init(t.table)})}(),function(){function t(e){this.tablesaw=e,this.$table=e.$table,this.attr="data-tablesaw-checkall",this.checkAllSelector="["+this.attr+"]",this.forceCheckedSelector="["+this.attr+"-checked]",this.forceUncheckedSelector="["+this.attr+"-unchecked]",this.checkboxSelector='input[type="checkbox"]',this.$triggers=null,this.$checkboxes=null,this.$table.data(s)||(this.$table.data(s,this),this.init())}var s="tablesawCheckAll";t.prototype._filterCells=function(t){return t.filter(function(){return!e(this).closest("tr").is("[data-tablesaw-subrow],[data-tablesaw-ignorerow]")}).find(this.checkboxSelector).not(this.checkAllSelector)},t.prototype.getCheckboxesForButton=function(t){return this._filterCells(e(e(t).attr(this.attr)))},t.prototype.getCheckboxesForCheckbox=function(t){return this._filterCells(e(e(t).closest("th")[0].cells))},t.prototype.init=function(){var t=this;this.$table.find(this.checkAllSelector).each(function(){var a=e(this);a.is(t.checkboxSelector)?t.addCheckboxEvents(this):t.addButtonEvents(this)})},t.prototype.addButtonEvents=function(t){var a=this;e(t).on("click",function(t){t.preventDefault();var n=a.getCheckboxesForButton(this),i=!0;n.each(function(){this.checked||(i=!1)});var o;o=e(this).is(a.forceCheckedSelector)?!0:e(this).is(a.forceUncheckedSelector)?!1:i?!1:!0,n.each(function(){this.checked=o,e(this).trigger("change."+s)})})},t.prototype.addCheckboxEvents=function(t){var a=this;e(t).on("change",function(){var e=this.checked;a.getCheckboxesForCheckbox(this).each(function(){this.checked=e})});var n=a.getCheckboxesForCheckbox(t);n.on("change."+s,function(){var e=0;n.each(function(){this.checked&&e++});var a=e===n.length;t.checked=a,t.indeterminate=0!==e&&!a})},e(document).on(a.events.create,function(e,a){new t(a)})}()});