var TS_VCSC_Lightbox_PassiveScroll=!1;try{var options={get passive(){TS_VCSC_Lightbox_PassiveScroll=!0}};window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch(t){TS_VCSC_Lightbox_PassiveScroll=!1}!function(t){t.fn.hasHorizontalScrollBar=function(){return!!this.get(0)&&this.get(0).scrollWidth>this.innerWidth()},t.fn.hasVerticalScrollBar=function(){return!!this.get(0)&&this.get(0).scrollHeight>this.innerHeight()}}(jQuery),function(t,e){function o(t){if(i(t.target)&&{37:1,38:1,39:1,40:1}[t.keyCode])return t.preventDefault(),$TS_VCSC_Lightbox_Showing&&jQuery("html, body").scrollTop($TS_VCSC_Lightbox_LastScroll),!1}function a(t){if(i(t.target)&&2==t.which)return t.preventDefault(),!1}function r(t){if(i(t.target))return t.preventDefault(),$TS_VCSC_Lightbox_Showing&&jQuery("html, body").scrollTop($TS_VCSC_Lightbox_LastScroll),!1;jQuery(t.target).is(document)}function i(t){var e=jQuery(t).closest(".kraut-lb-media-space"),o=jQuery(t).closest(".kraut-lb-zoom-container"),a=jQuery(t).closest(".kraut-lb-media-html"),r=jQuery(t).closest(".kraut-lb-media-iframe"),i=jQuery(t).closest(".kraut-lb-thumbs-bar");return e.length>0&&0==a.length&&0==r.length&&0==o.length&&0==i.length||(a.length>0||o.length>0?!a.hasVerticalScrollBar()&&!o.hasVerticalScrollBar():!(i.length>0)||!i.hasClass("kraut-lb-thumbs-left")&&!i.hasClass("kraut-lb-thumbs-right"))}function s(){window.history.replaceState(null,document.title,location.href),jQuery.fn.krautlightbox("close"),window.removeEventListener("popstate",s,!1)}function n(){jQuery("body").on("click",".kraut-lightbox-trigger",function(t){t.preventDefault();var e=jQuery(this).attr("data-group");""!=e&&jQuery("#"+e+"-0").click()}),void 0!==jQuery.fn.krautlightbox&&(jQuery.fn.krautlightbox("addEvent","open",function(t,e){if($TS_VCSC_Lightbox_Showing=!0,jQuery("#wpadminbar").hide(),$TS_VCSC_Lightbox_LastScroll=jQuery(document).scrollTop(),"css"==$TS_VCSC_Lightbox_ScrollBlock?jQuery("body, html").addClass("ts-composer-extensions-noscrollcss"):"js"==$TS_VCSC_Lightbox_ScrollBlock&&(jQuery("body, html").addClass("ts-composer-extensions-noscrolljs"),document.addEventListener("keydown",o),document.addEventListener("mousedown",a),document.addEventListener("mousewheel DOMMouseScroll wheel",r,{passive:!1}),window.addEventListener("scroll",r,{passive:!1})),$TS_VCSC_Lightbox_HistoryClose&&u&&$TS_VCSC_Lightbox_NoHashes&&(window.history.replaceState(null,document.title,location.href),window.addEventListener("popstate",s,!1)),jQuery(".ts_html5_media_frame_insert").each(function(){if(jQuery(this).contents().find(".projekktor").hasClass("ppstateplaying")){var t=jQuery(this).contents().find(".projekktor");t.find(".pppause").click(),t.find(".ppcontrols").removeClass("active").addClass("inactive")}}),"undefined"!=typeof $plyr_collection&&jQuery.each($plyr_collection,function(t,e){e.player.playing&&e.player.ready&&e.player.pause()}),void 0!==jQuery.fn.tooltipstercustom&&jQuery(".tooltipstered").tooltipstercustom("hide"),jQuery(".ts-element-focus-overlay").remove(),jQuery(".ts-element-focus-container").removeClass("ts-element-focus-active").attr("data-spotlight-active","false"),currentOverlay=null,!e.numbered){var i,n=e.set,l=n.length;if(1!=n.length){for(var c=0;c<l;c++)n[c].opts.title=((i=n[c].opts.title)?i:"")+" ("+(c+1)+" / "+l+")";e.numbered=!0}}}),jQuery.fn.krautlightbox("addEvent","close",function(){"css"==$TS_VCSC_Lightbox_ScrollBlock?(jQuery("body, html").removeClass("ts-composer-extensions-noscrollcss"),jQuery("body, html").scrollTop($TS_VCSC_Lightbox_LastScroll)):"js"==$TS_VCSC_Lightbox_ScrollBlock&&(jQuery("body, html").removeClass("ts-composer-extensions-noscrolljs"),document.removeEventListener("keydown",o),document.removeEventListener("mousedown",a),document.removeEventListener("mousewheel DOMMouseScroll wheel",r,{passive:!1}),window.removeEventListener("scroll",r,{passive:!1}),jQuery("body, html").scrollTop($TS_VCSC_Lightbox_LastScroll)),jQuery("#wpadminbar").show(),$TS_VCSC_Lightbox_HistoryClose&&u&&$TS_VCSC_Lightbox_NoHashes&&window.removeEventListener("popstate",s,!1),$TS_VCSC_Lightbox_Showing=!1}),jQuery.fn.krautlightbox("addEvent","next",function(t,e,o){!e.playing||"youtube"!=o.opts.type&&"vimeo"!=o.opts.type&&"dailymotion"!=o.opts.type&&"facebook"!=o.opts.type&&"plyr"!=o.opts.type||jQuery.fn.krautlightbox("stop")}),jQuery(".nch-lightbox-media, .kraut-lightbox-media, .ts-custom-lightbox-media").krautlightbox({zoom:$TS_VCSC_Lightbox_Zoom,fullscreen:$TS_VCSC_Lightbox_FullScreen}),jQuery(".nch-lightbox-modal, .kraut-lightbox-modal, .ts-custom-lightbox-modal").krautlightbox({thumbs:0,share:0,zoom:0,fxspeed:$TS_VCSC_Lightbox_FXSpeed,keyboard:!1,bgclose:!0,notouch:!1,backlight:$TS_VCSC_Lightbox_Backlight,usecolor:$TS_VCSC_Lightbox_UseColor,fullscreen:$TS_VCSC_Lightbox_FullScreen}),jQuery(".nch-lightbox-html5, .kraut-lightbox-html5, .ts-custom-lightbox-html5").krautlightbox({share:0,zoom:0,fxspeed:$TS_VCSC_Lightbox_FXSpeed,keyboard:$TS_VCSC_Lightbox_Keyboard,bgclose:!0,notouch:!1,backlight:$TS_VCSC_Lightbox_Backlight,usecolor:$TS_VCSC_Lightbox_UseColor,fullscreen:!1}),jQuery(".nch-lightbox-plyr, .kraut-lightbox-plyr, .ts-custom-lightbox-plyr").krautlightbox({share:0,zoom:0,fxspeed:$TS_VCSC_Lightbox_FXSpeed,keyboard:$TS_VCSC_Lightbox_Keyboard,bgclose:!0,notouch:!1,backlight:$TS_VCSC_Lightbox_Backlight,usecolor:$TS_VCSC_Lightbox_UseColor,fullscreen:!1}),jQuery(".ts-image-link-grid").each(function(){var t=jQuery(this),e=t.find("img"),o=t.attr("data-grid").split(","),a=parseInt(t.attr("data-margin")),r=parseInt(t.attr("data-random")),i="true"==t.attr("data-gridpreloader"),s="true"==t.attr("data-gridfilter"),n="true"==t.attr("data-order"),l="true"==t.attr("data-always"),u="true"==t.attr("data-lightbox-init"),c=t.attr("data-gridavailable"),h=t.attr("data-gridselected"),d=t.attr("data-gridnogroups"),p=t.attr("data-gridtoggle"),g=t.attr("data-gridtogglestyle"),f=t.attr("data-gridshowall"),m=t.attr("data-gridshowallstyle");0==u&&e.krautgrid({margin:a,grid:o,order:n,captions:!0,linkGrid:!0,target:!1,random:r,preloader:i,filter:s,titles:l,selector:"kraut-lb-filter-"+r,toggle:"kraut-lb-toggle-"+r,showall:"kraut-lb-showall-"+r,textAvailable:c,textSelected:h,textNoGroups:d,textToggle:p,textToggleStyle:g,textShowAll:f,textShowAllStyle:m}).promise().done(function(){t.attr("data-lightbox-init","true")})}),jQuery(".ts-lightbox-integration").krautlightbox({zoom:$TS_VCSC_Lightbox_Zoom,fullscreen:$TS_VCSC_Lightbox_FullScreen}),l("ready"),1==$TS_VCSC_Lightbox_AttachAllOther&&jQuery("body").find("a[href]:not([class])").filter(function(){return jQuery(this).attr("href").match(/\.(jpg|JPG|jpeg|JPEG|png|PNG|gif|GIF)/i)}).addClass("nofancybox").attr("data-thumbnail",jQuery(this).attr("href")).attr("rel","krautgroup").off().krautlightbox({share:0,thumbs:"bottom",thumbsize:75,zoom:$TS_VCSC_Lightbox_Zoom,fullscreen:$TS_VCSC_Lightbox_FullScreen}))}function l(t){1==$TS_VCSC_Lightbox_PrettyPhoto&&("ready"==t?(jQuery(".vc_media_grid").find(".vc_gitem-is-link a.prettyphoto").each(function(){jQuery(this).off().addClass("nofancybox ts-replace-lightbox").removeClass("prettyphoto vc-prettyphoto-link").attr("data-thumbnail",jQuery(this).attr("href")).attr("rel",jQuery(this).attr("data-rel"))}),jQuery(".vc_media_grid").find(".vc_gitem-is-link a.ts-replace-lightbox").off().krautlightbox({share:0,thumbs:"bottom",thumbsize:75,zoom:$TS_VCSC_Lightbox_Zoom,fullscreen:$TS_VCSC_Lightbox_FullScreen}),jQuery('.gallery-icon a[href*=".jpg"]').each(function(){jQuery(this).addClass("nofancybox ts-replace-lightbox").removeClass("prettyphoto vc-prettyphoto-link").attr("data-thumbnail",jQuery(this).attr("href")).attr("rel","krautgroup")}),jQuery('.gallery-icon a[href*=".jpg"]').off().krautlightbox({share:0,thumbs:"bottom",thumbsize:75,zoom:$TS_VCSC_Lightbox_Zoom,fullscreen:$TS_VCSC_Lightbox_FullScreen})):"load"==t&&(jQuery(".wpb_single_image a.prettyphoto").each(function(){jQuery(this).off().addClass("nofancybox ts-replace-lightbox").removeClass("prettyphoto vc-prettyphoto-link").attr("data-thumbnail",jQuery(this).attr("href")).attr("rel","krautgroup")}),jQuery(".wpb_single_image a.ts-replace-lightbox").off().krautlightbox({share:0,thumbs:"bottom",thumbsize:75,zoom:$TS_VCSC_Lightbox_Zoom,fullscreen:$TS_VCSC_Lightbox_FullScreen}),jQuery(".wpb_gallery_slides a.prettyphoto").each(function(){jQuery(this).off().addClass("nofancybox ts-replace-lightbox").removeClass("prettyphoto vc-prettyphoto-link").attr("data-thumbnail",jQuery(this).attr("href")).attr("rel",jQuery(this).attr("data-rel"))}),jQuery(".wpb_gallery_slides a.ts-replace-lightbox").off().krautlightbox({share:0,thumbs:"bottom",thumbsize:75,zoom:$TS_VCSC_Lightbox_Zoom,fullscreen:$TS_VCSC_Lightbox_FullScreen}),jQuery(".vc_images_carousel").find(".vc_item a.prettyphoto").each(function(){jQuery(this).off().addClass("nofancybox ts-replace-lightbox").removeClass("prettyphoto vc-prettyphoto-link").attr("data-thumbnail",jQuery(this).attr("href")).attr("rel",jQuery(this).attr("data-rel"))}),jQuery(".vc_images_carousel").find(".vc_item a.ts-replace-lightbox").off().krautlightbox({share:0,thumbs:"bottom",thumbsize:75,zoom:$TS_VCSC_Lightbox_Zoom,fullscreen:$TS_VCSC_Lightbox_FullScreen})))}var u=!1;"history"in window&&"pushState"in history&&(u&&window.history.pushState(null,document.title,location.href),u=!0),jQuery(document).ready(function(){n(),jQuery(window).on("openkrautlb",function(t,e){void 0!=e&&"undefined"!=e&&("html"!=e.opts.type&&"modal"!=e.opts.type||(setTimeout(function(){window.resizeBy(0,0),jQuery(window).trigger("debouncedresize"),window.dispatchEvent(new Event("resize"))},$TS_VCSC_Lightbox_FXSpeed),setTimeout(function(){window.resizeBy(0,0),jQuery(window).trigger("debouncedresize"),window.dispatchEvent(new Event("resize"))},$TS_VCSC_Lightbox_FXSpeed)))}),jQuery(document).ajaxStop(function(){n()}),jQuery(document.body).on("post-load",function(){n()})}),jQuery(window).load(function(){l("load"),jQuery(".kraut-lightbox-open").each(function(){if("true"==jQuery(this).attr("data-open")){var t=jQuery(this),e=parseInt(jQuery(this).attr("data-delay"));return setTimeout(function(){jQuery.fn.krautlightbox("close"),t.krautlightbox({share:0,social:"",zoom:0,bgclose:!0}).krautlightbox("open")},e),!1}}),jQuery(".kraut-lightbox-inview").each(function(){if("inview"==jQuery(this).attr("data-open")){var t=jQuery(this),e=parseInt(jQuery(this).attr("data-delay")),o=jQuery(this).attr("data-offset");void 0!==jQuery.fn.waypoint&&t.waypoint({handler:function(){setTimeout(function(){jQuery.fn.krautlightbox("close"),t.krautlightbox({thumbs:0,share:0,social:"",zoom:0,bgclose:!0}).krautlightbox("open");try{t.waypoint("destroy")}catch(t){}try{$this.destroy()}catch(t){}},e)},offset:o,triggerOnce:!0})}})})}(jQuery),function(t,e){"use strict";var o={mode:"continuous",thumbs:$TS_VCSC_Lightbox_Thumbs,thumbsize:$TS_VCSC_Lightbox_Thumbsize,scheme:$TS_VCSC_Lightbox_Scheme,controls:$TS_VCSC_Lightbox_Controls,theme:"metro",classid:"",size:"960,540",play:!0,autoplay:!1,closer:$TS_VCSC_Lightbox_Closer,share:$TS_VCSC_Lightbox_Share,save:$TS_VCSC_Lightbox_Save,social:$TS_VCSC_Lightbox_Social,duration:4e3,keyboard:$TS_VCSC_Lightbox_Keyboard,fullscreen:$TS_VCSC_Lightbox_FullScreen,margin:10,zoom:$TS_VCSC_Lightbox_Zoom,fxspeed:$TS_VCSC_Lightbox_FXSpeed,info:!1,grid:0,gridspace:4,gridorder:!0,captions:$TS_VCSC_Lightbox_Captions,gridpreloader:!1,gridlightbox:!0,gridfilter:!1,random:"",gridavailable:"Available Groups",gridselected:"Filtered Groups",gridnogroups:"No Groups",gridtoggle:"Toggle Filter",gridtogglestyle:"",gridshowall:"Show All",gridshowallstyle:"",backlight:$TS_VCSC_Lightbox_Backlight,usecolor:$TS_VCSC_Lightbox_UseColor,animation:$TS_VCSC_Lightbox_Animation,cors:$TS_VCSC_Lightbox_CORS,hashpath:"composium/",bgclose:$TS_VCSC_Lightbox_BGClose,notouch:$TS_VCSC_Lightbox_NoTouch,nohashes:$TS_VCSC_Lightbox_NoHashes,tapping:$TS_VCSC_Lightbox_Tapping,overlay:$TS_VCSC_Lightbox_Overlay,centerposition:"centercenter",centerwidth:1280,centerheight:720,centeroverlay:!0,imageprotect:$TS_VCSC_Lightbox_Protection,background:$TS_VCSC_Lightbox_Background,repeat:$TS_VCSC_Lightbox_Repeat,noise:$TS_VCSC_Lightbox_Noise,perfectscroll:$TS_VCSC_Lightbox_CustomScroll},a={title:!1,type:!1,hover:!1,thumbnail:"",contenttype:"video",listid:"",videofirst:"",videosother:"",userid:"",search:"",groups:!1,videoplay:!1,videomobile:!1,videoloop:!1,related:!1,loop:!1,modest:!1,quality:"auto",infobar:!0,controls:1,autohide:1,start:"",end:"",nohashes:$TS_VCSC_Lightbox_NoHashes,usecors:"global",rel:!1,src:!1,href:!1,width:0,height:0,color:!1,effect:!1},r={},i={light:!1,current:!1,scrollbar:!0,all:{},phase:!0,css3:window.krautcss3,hash:"",isTouchDevice:!1,ns:t({}),event:{trigger:function(){i.ns.trigger.apply(i.ns,arguments)},on:function(){i.ns.on.apply(i.ns,arguments)},off:function(){i.ns.off.apply(i.ns,arguments)}},canFS:!1,onload:!1},s={},n={open:function(t){t.group.main.fadeIn(300)},close:function(t){var e;t.main.fadeOut(300),h.pause(!1);for(var o in t.set)(e=t.set[o].thumb)&&(e.className="")},slideOut:function(t,a){var r=h.getFX(t.opts.effect,t),s=t.group,n=s.css3,l=s.blocks.preview,u=i.phase?-1:1,c=r(0,0,0,1)!==e;r(n,u,!0),l.stop().animate({scrollLeft:function(t){return(c?r(0,0,0,t):t)+i.wsize}(-u*i.wsize)},{duration:o.fxspeed,complete:function(){s.blocks.media.css("visibility","hidden"),r(n,0),a()}}),t.thumb!==e&&(t.thumb.className="")},slideIn:function(t,a){a=a===e?function(){}:a;var r=h.getFX(t.opts.effect,t),s=t.group,n=s.css3,l=s.blocks.preview,u=i.phase?1:-1,c=r(0,0,0,1)!==e,d=function(t){return(c?r(0,0,0,t):t)+i.wsize};r(n,u),s.blocks.media.css("visibility","visible"),n.el.offsetHeight,r(n,0,!0),s.blocks.media.css("visibility","visible"),l.stop().scrollLeft(d(-u*i.wsize)).animate({scrollLeft:d(0)},o.fxspeed,function(){l.scrollLeft(d(0))})}},l={youtube:{is:function(t){var e=t.opts.href.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/ ]{11})/);return!!e&&(t.opts.size||(t.opts.size=t.group.opts.size),t.opts.videoid=e[1],!0)},create:function(t){var e="rel=0";"true"==t.opts.related&&(e="rel=1");var o="&loop=0",a="";"true"==t.opts.loop&&(o="&loop=1",a="&playlist="+t.opts.videoid);var r="&autoplay=0";"true"==t.opts.videoplay&&(r="&autoplay=1");var i="&showinfo=0";"true"==t.opts.infobar&&(i="&showinfo=1");var s="&modestbranding=0";"true"==t.opts.modest&&(s="&modestbranding=1");var n="&mute=0";"true"==t.opts.mute&&(n="&mute=1");var l="&controls="+t.opts.controls,u="&autohide="+t.opts.autohide,c="&vq="+t.opts.quality,h="";""!=t.opts.start&&parseInt(t.opts.start)>0&&(h="&start="+t.opts.start);var d="";""!=t.opts.end&&parseInt(t.opts.end)>0&&parseInt(t.opts.end)>parseInt(t.opts.start)&&(d="&end="+t.opts.end);return"https:"==document.location.protocol&&"https:","video"==t.opts.contenttype?'<iframe class="kraut-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed/'+t.opts.videoid+"?"+e+o+a+i+s+n+h+d+r+l+u+c+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen allow="autoplay; fullscreen"></iframe>':"playlist"==t.opts.contenttype?'<iframe class="kraut-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed?listType=playlist&list='+t.opts.listid+i+"&"+e+o+s+n+r+l+u+c+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen allow="autoplay; fullscreen"></iframe>':"searchterm"==t.opts.contenttype?'<iframe class="kraut-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed?listType=search&list='+t.opts.search+i+"&"+e+o+s+n+r+l+u+c+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen allow="autoplay; fullscreen"></iframe>':"combination"==t.opts.contenttype?'<iframe class="kraut-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed/'+t.opts.videofirst+"?playlist="+t.opts.videosother+i+"&"+e+o+s+n+r+l+u+c+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen allow="autoplay; fullscreen"></iframe>':"uploads"==t.opts.contenttype?'<iframe class="kraut-lb-iframe nch-video-youtube" src="https://www.youtube.com/embed?listType=user_uploads&list='+t.opts.userid+i+"&"+e+o+s+n+r+l+u+c+'&wmode=opaque" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowfullscreen allow="autoplay; fullscreen"></iframe>':""},thumb:function(t,e){h.loadThumb.call(t,t.opts.src="https://img.youtube.com/vi/"+t.opts.videoid+"/hqdefault.jpg",e)},video:!0},vimeo:{is:function(t){var e=t.opts.href.match(/(http|https):\/\/(?:www.)?(?:(vimeo).com)\/(.*)/);return!!e&&(t.opts.videoid=e[3],t.opts.size||(t.opts.size=t.group.opts.size),!0)},create:function(t){var e="autoplay=0";"true"==t.opts.videoplay&&(e="autoplay=1");var o="&loop=0";"true"==t.opts.loop&&(o="&loop=1");var a="&muted=0";return"true"==t.opts.mute&&(a="&muted=1"),'<iframe class="kraut-lb-iframe nch-video-vimeo" src="https://player.vimeo.com/video/'+t.opts.videoid+"?"+e+o+a+'&autopause=0&wmode=opaque" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen"></iframe>'},thumb:function(e,o){t.getJSON("https://vimeo.com/api/v2/video/"+e.opts.videoid+".json?callback=?",{format:"json"},function(t){console.log(t[0].thumbnail_large),h.loadThumb.call(e,e.opts.src=t[0].thumbnail_large,o)})},video:!0},dailymotion:{is:function(t){var o=t.opts.href.match(/^.+dailymotion.com\/(video|hub)\/([^_]+)[^#]*(#video=([^_&]+))?/);return null!==o&&(o[4]!==e?t.opts.videoid=o[4]:t.opts.videoid=o[2],t.opts.size||(t.opts.size=t.group.opts.size),!0)},create:function(t){var e="autoplay=0";"true"==t.opts.videoplay&&(e="autoplay=1");var o="&related=0";return"true"==t.opts.related&&(o="&related=1"),'<iframe class="kraut-lb-iframe nch-video-dailymotion" src="https://www.dailymotion.com/embed/video/'+t.opts.videoid+"?"+e+o+'&forcedQuality=hq&wmode=opaque" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen"></iframe>'},thumb:function(t,e){h.loadThumb.call(t,t.opts.src="https://www.dailymotion.com/thumbnail/video/"+t.opts.videoid,e)},video:!0},facebook:{is:function(t){t.opts.href=t.opts.href.replace(/\/$/,"");var e=t.opts.href.match(/(http|https):\/\/(?:www.)?(?:(facebook).com)\/(.*)/);return null!==e&&(t.opts.videoid=e[3].split("/").pop(),t.opts.size||(t.opts.size=t.group.opts.size),!0)},create:function(t){var e="&autoplay=false";"true"==t.opts.videoplay&&(e="&autoplay=true");var o="&show_text=false";"true"==t.opts.showtext&&(o="&show_text=true");var a="&show_captions=false";"true"==t.opts.showcaptions&&(a="&show_captions=true");var r="&allowfullscreen=false";"true"==t.opts.allowfullscreen&&(r="&allowfullscreen=true");var i="&appId";return""!=t.opts.appid&&(i="&appId="+t.opts.appid),'<iframe class="kraut-lb-iframe nch-video-facebook" src="https://www.facebook.com/plugins/video.php?href='+t.opts.href+e+o+a+r+i+'&wmode=opaque" width="500" height="500" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen allow="autoplay; fullscreen"></iframe>'},thumb:function(t,e){h.loadThumb.call(t,t.opts.src="https://graph.facebook.com/"+t.opts.videoid+"/picture",e)},video:!0},html:{is:function(t){return t.opts.href=t.opts.href.replace(window.location,""),"#"==t.opts.href.charAt(0)||"."==t.opts.href.charAt(0)},create:function(e){return t(e.opts.href).removeClass("ts-modal-outside-screen"),t(e.opts.href).attr("data-style")&&t(e.opts.href).attr("style",t(e.opts.href).attr("data-style")).removeAttr("data-style"),t(e.opts.href).show().get(0)}},video:{is:function(){return!0},create:function(t){var e='data-videoid="'+t.opts.videoid+'" data-videotheme="'+t.opts.videotheme+'" data-videoholder="'+t.opts.videoholder+'"';return e+='data-videoautoplay="'+t.opts.videoautoplay+'" data-videoautostop="'+t.opts.videoautostop+'" data-videomobile="'+t.opts.videomobile+'" data-videorepeat="'+t.opts.videorepeat+'"',e+='data-videofullscreen="'+t.opts.videofullscreen+'" data-videoposter="'+t.opts.videoposter+'" data-videoposterfit="'+t.opts.videoposterfit+'"',e+='data-videotitle="'+t.opts.videotitle+'" data-videoobjectfit="'+t.opts.videoobjectfit+'"',e+='data-logoshow="'+t.opts.logoshow+'" data-logoimage="'+t.opts.logoimage+'" data-logoheight="'+t.opts.logoheight+'" data-logoopacity="'+t.opts.logoopacity+'" data-logoposition="'+t.opts.logoposition+'" data-logourl="'+t.opts.logourl+'" data-logotitle="'+t.opts.logotitle+'" data-logotarget="'+t.opts.logotarget+'"',e+='data-videomp4="'+t.opts.videomp4+'" data-videowebm="'+t.opts.videowebm+'" data-videoogg="'+t.opts.videoogg+'"',e+='data-videovolume="'+t.opts.videovolume+'" data-videolightbox="'+t.opts.videolightbox+'" data-videoshare="'+t.opts.videoshare+'" data-videofallback="'+t.opts.videofallback+'" data-videoscreensize="'+t.opts.videoscreensize+'"',e+='width="100%" height="auto" scrolling="no" frameborder="0" type="text/html" mozallowfullscreen="mozallowfullscreen webkitallowfullscreen="webkitallowfullscreen" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen"','<iframe id="'+t.opts.videoholder+'" class="kraut-lb-iframe nch-video-html5" src="'+t.opts.href+'?wmode=opaque" '+e+"></iframe>"},thumb:function(t,e){h.loadThumb.call(t,t.opts.src=t.opts.videoposter,e)},video:!0},audio:{is:function(){return!0},create:function(t){var e='data-audioid="'+t.opts.audioid+'" data-audiotheme="'+t.opts.audiotheme+'" data-audiobaronly="'+t.opts.audiobaronly+'" data-audiobarwidth="'+t.opts.audiobarwidth+'" data-audioholder="'+t.opts.audioholder+'"';return e+='data-audioautoplay="'+t.opts.audioautoplay+'" data-audioautostop="'+t.opts.audioautostop+'" data-audiorepeat="'+t.opts.audiorepeat+'"',"true"==t.opts.audiobaronly?e+='data-audiofullscreen="'+t.opts.audiofullscreen+'" data-audioposter="" data-audioposterfit="'+t.opts.audioposterfit+'"':e+='data-audiofullscreen="'+t.opts.audiofullscreen+'" data-audioposter="'+t.opts.audioposter+'" data-audioposterfit="'+t.opts.audioposterfit+'"',e+='data-audiotitle="'+t.opts.audiotitle+'" data-audioobjectfit="'+t.opts.audioobjectfit+'"',e+='data-logoshow="'+t.opts.logoshow+'" data-logoimage="'+t.opts.logoimage+'" data-logoheight="'+t.opts.logoheight+'" data-logoopacity="'+t.opts.logoopacity+'" data-logoposition="'+t.opts.logoposition+'" data-logourl="'+t.opts.logourl+'" data-logotitle="'+t.opts.logotitle+'" data-logotarget="'+t.opts.logotarget+'"',e+='data-audiomp4="'+t.opts.audiomp4+'" data-audiowebm="'+t.opts.audiowebm+'" data-audioogg="'+t.opts.audioogg+'"',e+='data-audiovolume="'+t.opts.audiovolume+'" data-audiolightbox="'+t.opts.audiolightbox+'" data-audioshare="'+t.opts.audioshare+'" data-audiofallback="'+t.opts.audiofallback+'" data-audioscreensize="'+t.opts.audioscreensize+'"',"true"==t.opts.audiobaronly?e+='width="100%" height="38px" style="width: 100%; max-height: 38px; max-width: '+t.opts.audiobarwidth+'px; padding-bottom: 0; padding-top: 0;" scrolling="no" frameborder="0" type="text/html" mozallowfullscreen="mozallowfullscreen webkitallowfullscreen="webkitallowfullscreen" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen"':e+='width="100%" height="auto" style="width: 100%; height: auto;" scrolling="no" frameborder="0" type="text/html" mozallowfullscreen="mozallowfullscreen webkitallowfullscreen="webkitallowfullscreen" allowfullscreen="allowfullscreen" allow="autoplay; fullscreen"','<iframe id="'+t.opts.videoholder+'" class="kraut-lb-iframe nch-audio-html5" src="'+t.opts.href+'" '+e+"></iframe>"},thumb:function(t,e){h.loadThumb.call(t,t.opts.src=t.opts.audioposter,e)},audio:!0},plyr:{is:function(t){return t.opts.href=t.opts.href.replace(window.location,""),"#"==t.opts.href.charAt(0)||"."==t.opts.href.charAt(0)},create:function(e){var o=t(e.opts.href).show().get(0),a="";return a+='<div id="'+e.opts.baseid+'-container" class="ts-plyr-player-container ts-plyr-player-lightbox">',a+='<div id="'+e.opts.baseid+'-wrapper" class="ts-plyr-player-wrapper">',a+='<video poster="'+e.opts.videoposter+'" crossorigin playsinline controls '+("true"==e.opts.muted?"muted":"")+">",""!=e.opts.videomp4&&(a+='<source src="'+e.opts.videomp4+'" type="video/mp4">'),""!=e.opts.videowebm&&(a+='<source src="'+e.opts.videowebm+'" type="video/webm">'),""!=e.opts.videoogv&&(a+='<source src="'+e.opts.videoogv+'" type="video/ogv">'),a+="</video>",a+="</div>",a+="</div> ",jQuery(a).appendTo(o)},thumb:function(t,e){h.loadThumb.call(t,t.opts.src=t.opts.thumbnail,e)},video:!0},ajax:{is:function(t){return t.opts.href.search(/^https?:\/\//i)<0},create:function(e,o){t.ajax({url:e.opts.href,success:o})}},iframe:{is:function(){return!0},create:function(t){return'<iframe class="kraut-lb-iframe" src="'+t.opts.href+'" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen allow="autoplay; fullscreen" scrolling="yes"></iframe>'}}},u={init:function(r){var s=arguments,n=t(this);if(0==n.length){if(r===e)return n;r.length===e&&1==s.length?t.extend(o,r):(n=h.setFrom.apply(this,[r.charAt!==e?[r]:r,s[1]||{}]),(s[1]||{}).open===e&&u.open.call(n))}else r=r||{},n.each(function(o,s){var n,l=t(s),u=l.is("img")?l:t("img",l);if("true"==l.attr("data-lightbox-init"))return!0;if(n=t.extend({},a,h.getDataProperties(l,{rel:"rel",title:"title",href:"href"})),u.length>0?(n.src=u.attr("src"),void 0!==l.attr("data-thumbnail")&&""!=l.attr("data-thumbnail")?n.thumbnail=l.attr("data-thumbnail"):n.thumbnail=""):void 0!==l.attr("data-thumbnail")&&""!=l.attr("data-thumbnail")&&(n.src=l.attr("data-thumbnail"),n.thumbnail=l.attr("data-thumbnail")),l.attr("data-lightbox-init","true"),(l.is("a")||0==u.length)&&(u=l),n.rel)i.all[n.rel]===e&&(i.all[n.rel]=new h.mediaGroup(r,n.rel)),i.all[n.rel].add(u,n);else{var c=new h.mediaGroup(r);c.add(u,n),i.all[c.name]=c}});for(var l in i.all)void 0!=typeof i.all[l]&&void 0!==i.all[l]&&h.renderGrid(i.all[l]);return n},open:function(a){var r,s=t(this);if(a!==e&&i.all[a]!==e&&(r=i.all[a].set[0]),s.data("kraut-lb-media")!==e)r=s.data("kraut-lb-media");else if(this.jquery)return u.init.apply(this,arguments),u.open.call(this);r&&(i.event.trigger("open",[r.group,r]),i.hash="#"+o.hashpath+r.opts.hash,"false"==r.opts.nohashes||0==r.opts.nohashes?window.location.hash=i.hash:"true"==r.opts.nohashes||1==r.opts.nohashes?o.nohashes=!0:o.nohashes||(window.location.hash=i.hash)),i.scrollpos=i.w.scrollTop(),i.doc.addClass("kraut-lb-noscroll"),i.doc.addClass("kraut-lb-opened").removeClass("kraut-lb-closed"),void 0!=r&&"undefined"!=r&&jQuery(window).trigger("openkrautlb",r)},next:function(t){if(i.current){var a=i.current,r=a.set.length,s=a.current,n=a.set[s+1==r?0:s+1];1!=r&&(i.hash="#"+o.hashpath+n.opts.hash,"false"==n.opts.nohashes||0==n.opts.nohashes?window.location.hash=i.hash:"true"==n.opts.nohashes||1==n.opts.nohashes?o.nohashes=!0:o.nohashes||(window.location.hash=i.hash),h.closeShare(),h.pause(t===e),i.phase=!0,i.event.trigger("next",[i.current,n]))}},previous:function(){if(i.current){var t=i.current,e=t.set.length,a=t.current,r=t.set[0==a?e-1:a-1];1!=e&&(i.hash="#"+o.hashpath+r.opts.hash,"false"==r.opts.nohashes||0==r.opts.nohashes?window.location.hash=i.hash:"true"==r.opts.nohashes||1==r.opts.nohashes?o.nohashes=!0:o.nohashes||(window.location.hash=i.hash),h.pause(!1),i.phase=!1,i.event.trigger("previous",[i.current,r]))}},close:function(){if(i.current){var t=i.current,e=t.about,o=t.main,a="kraut-lb-zooming",r=t.set[t.current],s=t.opts;o.hasClass(a)?(i.zooming=!1,h.updateMediaLayout(r),t.blocks.zoom.find(".kraut-lb-zoom-container").remove(),o.toggleClass(a)):e?h.toggleInfo(!e):(i.hash="",window.location.hash="",history&&history.pushState&&history.pushState("",document.title,window.location.pathname+window.location.search),t.playing&&u.stop(),"bottom"==s.thumbs||"top"==s.thumbs?t.blocks.thumbs.css({left:0}):"left"!=s.thumbs&&"right"!=s.thumbs||t.blocks.thumbs.css({top:0}),o.removeClass("kraut-lb-paused").removeClass("kraut-lb-playing"),h.fs.on&&h.fs.toggle(),h.closeShare(),h.detachMedia(t.set[t.current]),t.paused=!1,i.event.trigger("close",t),n.close(t),i.current=t.current=!1,i.doc.removeClass("kraut-lb-noscroll"),i.doc.removeClass("kraut-lb-opened").addClass("kraut-lb-closed"),"none"!=$TS_VCSC_Lightbox_ScrollBlock&&window.setTimeout(function(){i.w.scrollTop(i.scrollpos)},10))}},fx:function(o,a){a===e?t.extend(s,o):s[o]=a},access:function(t,o){return t!==e&&(h[t]=o),h},play:function(t){var o=i.current,a=o.opts,r=o.main,s=o.blocks.loading,n=o.playing,l=a.duration;return!!a.play&&(t===e&&n?n:(r.toggleClass("kraut-lb-playing"),n?s.stop():s.animate({width:r.width()},{easing:"linear",duration:(1-s.width()/r.width())*l,complete:function(){o.paused=!0,u.next()}}),!1!==t&&i.event.trigger(n?"stop":"play",o),o.playing=!n))},stop:function(){return i.current.playing&&u.play(!0),!0},info:function(){if(i.current)return h.toggleInfo.apply({},arguments)},addEvent:function(t,e){i.event.on(t,e)},removeEvent:function(t,e){i.event.off(t,e)},getGroupName:function(){var o,a=t(this);return a.length>0&&((o=t(a.get(0)).data("kraut-lb-media"))!==e&&o.group.name)},getMediaId:function(){var o,a=t(this);return a.length>0&&((o=t(a.get(0)).data("kraut-lb-media"))!==e&&o.opts.hash)}},c="",h={toggleInfo:function(t){var o=i.current,a=o.blocks,r=a.info.children(".kraut-lb-info-panel");return t!==e&&o.about==t?t:(a.info["fade"+(o.about?"Out":"In")](400),r.append(o.info.show()),i.event.trigger((o.about?"close":"open")+"_info",[o]),o.about=!o.about)},selectThumb:function(o){var a,r=o.thumb,s=o.group,n=s.blocks,l=n.bthumbs,u=n.thumbs,c=0,d=t(r),p=d.parent(),g=p.prev().find("img").get(0),f=p.next().find("img").get(0);if(r===e||!s.opts.thumbs)return!1;void 0!=g&&"undefined"!=g||void 0!=f&&"undefined"!=f||u.hasClass("kraut-lb-thumbs-loaded")||window.setTimeout(function(){return h.selectThumb(o),!1},250);for(var m in s.set)s.set[m].thumb&&(s.set[m].thumb.className="");r.className="kraut-lb-thumb-s";var b,v,w,y=s.opts,k={top:1,bottom:1,left:0,right:0}[y.thumbs],_=l[k?"width":"height"](),x=k?"left":"top",S="offset"+(k?"Width":"Height"),C={};u.stop(),w=d.position()[x],"bottom"==y.thumbs||"top"==y.thumbs?(c=i.current?i.current.blocks.thumbs.position().left:u.position().left,v="left"):"left"!=y.thumbs&&"right"!=y.thumbs||(c=i.current?i.current.blocks.thumbs.position().top:u.position().top,v="top");var T=w-4,j=w+(b=r[S])+4;g!==e&&(T-=g[S]+4),f!==e&&(j+=f[S]+4),("bottom"==y.thumbs||"top"==y.thumbs)&&w<d.width()?a=0:("left"==y.thumbs||"right"==y.thumbs)&&w<d.height()?a=0:j-T>_?a=-(w+r[S]/2-_/2):T<c?a=-T:j-_>c&&(a=-(j-_)),("bottom"==y.thumbs||"top"==y.thumbs)&&a>0?a=0:("left"==y.thumbs||"right"==y.thumbs)&&a>0&&(a=0),void 0!=a&&"undefined"!=a&&(C[v]=a),y.perfectscroll&&t.isFunction(t.fn.perfectScrollbar)?void 0!=a&&"undefined"!=a&&("left"==v?l.scrollLeft(Math.abs(a)):"top"==v&&l.scrollTop(Math.abs(a)),l.perfectScrollbar("update")):u.stop().animate(C,250),t(window).off("resize.krautlightbox-selectthumb").on("resize.krautlightbox-selectthumb",function(){i.doc.hasClass("kraut-lb-opened")&&h.selectThumb(o)})},wheelThumbs:function(t,e){if(!i.current)return!1;var o,a,r,s,n,l,u,c,h,d,p,g,f,m,b,v,w=i.current,y=w.opts,k=y.thumbs;w&&k&&"none"!=k&&(o=w.blocks.thumbs).on("wheel mousewheel DOMMouseScroll",function(t){if(TS_VCSC_Lightbox_PassiveScroll||t.preventDefault(),0==Math.abs(t.originalEvent.deltaX)){if(o.stop(),t.originalEvent.deltaY<0?(a="up",e=-1):(a="down",e=1),r=t.originalEvent.deltaY,h=w.blocks.bthumbs[0].clientWidth,c=w.blocks.thumbs[0].clientWidth,d=c-h,p=w.blocks.thumbs.position().left,n=w.blocks.bthumbs[0].clientHeight,s=w.blocks.thumbs[0].clientHeight,l=s-n,u=w.blocks.thumbs.position().top,g=w.blocks.thumbs[0].childElementCount,"bottom"==y.thumbs||"top"==y.thumbs){if(f=c/g,m=n,b=h/f,(v=Math.round(.66*h))<2*f&&(v=2*f),"up"==a){if(p==-d||p<-d)return!1;v=Math.abs(p)+Math.abs(v)>d?e*d:e*(Math.abs(p)+v)}else if("down"==a){if(0==p||p>0)return!1;v=p+v>0?0:e*(p+v)}}else if("left"==y.thumbs||"right"==y.thumbs)if(f=h,m=s/g,b=n/m,(v=Math.round(.66*n))<2*m&&(v=2*m),"up"==a){if(u==-l||u<-l)return!1;v=Math.abs(u)+Math.abs(v)>l?e*l:e*(Math.abs(u)+v)}else if("down"==a){if(0==u||u>0)return!1;v=u+v>0?0:e*(u+v)}"bottom"==y.thumbs||"top"==y.thumbs?o.stop().animate({left:v},250):"left"!=y.thumbs&&"right"!=y.thumbs||o.stop().animate({top:v},250)}})},swipeThumbs:function(t){if(!i.current)return!1;var e,o,a,r,s,n,l,u,c,h,d,p,g,f,m,b=i.current,v=b.opts,w=v.thumbs;if(!b||!w||"none"==w)return!1;if(a=t.direction,!("bottom"!=v.thumbs&&"top"!=v.thumbs||"swipeup"!=t.type&&"swipedown"!=t.type))return!1;if(!("left"!=v.thumbs&&"right"!=v.thumbs||"swipeleft"!=t.type&&"swiperight"!=t.type))return!1;if(""==t.type||null==t.type||void 0==t.type||"undefined"==t.type)return!1;if("left"==a||"up"==a?o=-1:"right"!=a&&"down"!=a||(o=1),t.distance,(e=b.blocks.thumbs).stop(),c=b.blocks.bthumbs[0].clientWidth,u=b.blocks.thumbs[0].clientWidth,h=u-c,d=b.blocks.thumbs.position().left,s=b.blocks.bthumbs[0].clientHeight,r=b.blocks.thumbs[0].clientHeight,n=r-s,l=b.blocks.thumbs.position().top,p=b.blocks.thumbs[0].childElementCount,"bottom"==v.thumbs||"top"==v.thumbs){if(g=u/p,f=s,c/g,(m=Math.round(.66*c))<2*g&&(m=2*g),"left"==a){if(d==-h||d<-h)return!1;m=Math.abs(d)+Math.abs(m)>h?o*h:o*(Math.abs(d)+m)}else if("right"==a){if(0==d||d>0)return!1;m=d+m>0?0:o*(d+m)}}else if("left"==v.thumbs||"right"==v.thumbs)if(g=c,f=r/p,s/f,(m=Math.round(.66*s))<2*f&&(m=2*f),"up"==a){if(l==-n||l<-n)return!1;m=Math.abs(l)+Math.abs(m)>n?o*n:o*(Math.abs(l)+m)}else if("down"==a){if(0==l||l>0)return!1;m=l+m>0?0:o*(l+m)}"bottom"==v.thumbs||"top"==v.thumbs?e.stop().animate({left:m},250):"left"!=v.thumbs&&"right"!=v.thumbs||e.stop().animate({top:m},250)},scrollThumbs:function(){var t=i.current,e=t.opts.thumbs;t&&e&&"none"!=e&&t.blocks.bthumbs.perfectScrollbar({wheelSpeed:1,useBothWheelAxes:!0,wheelPropagation:!1,swipePropagation:!1,suppressScrollX:"left"==e||"right"==e,suppressScrollY:"bottom"==e||"top"==e,scrollXMarginOffset:10,scrollYMarginOffset:10})},toggleThumbs:function(){var t=i.current,e=t.main,o=t.opts.thumbs,a=0,r={};e.hasClass("kraut-lb-thumbs-hide")?a=0:"top"==o||"bottom"==o?a=t.blocks.bthumbs.outerHeight(!0):"left"!=o&&"right"!=o||(a=t.blocks.bthumbs.outerWidth(!0)),r[o]=-a+"px",t.blocks.bthumbs.animate(r,250,function(){e.toggleClass("kraut-lb-thumbs-hide"),h.updateLayout()})},swipeGesture:function(a){function r(t){if(!(l=t.gesture))return!1;c=l.deltaX,((d=Math.abs(c))>25||g)&&(g=!0,p.stop().scrollLeft(y(-c)),v(b,c/i.wsize))}function s(t){var e=i.current.set.length,a=i.current.current;d>f&&e>1&&("linear"==i.current.opts.mode?!(0==a&&c/d>0||a==e-1&&c/d<0):1)?(n=c>0?0:2*i.wsize,p.animate({scrollLeft:y(n-i.wsize)},o.fxspeed,function(){u[c/d<0?"next":"previous"](!0)}),v(b,c/d,!0)):(p.stop().animate({scrollLeft:y(0)},o.fxspeed),v(b,0,!0)),1==$TS_VCSC_Hammer_ReleaseNew?p.off("pan",r).off("panend release",s):p.off("drag",r).off("dragend",s)}if(a.gesture===e)return!1;if(i.isTouchDevice||(i.isTouchDevice=!(a.gesture.srcEvent.changedTouches===e)),i.zooming||!i.current||a.gesture===e)return!0;var n,l,c,d,p=t(this),g=(t(a.target),a.timeStamp,!1),f=i.wsize/3,m=i.current,b=m.css3,v=h.getFX(m.set[m.current].opts.effect,m.set[m.current]),w=v(0,0,0,1)!==e,y=function(t){return(w?v(0,0,0,t):t)+i.wsize};return a.gesture,1==$TS_VCSC_Hammer_ReleaseNew?p.on("pan",r).on("panend release",s):p.on("drag",r).on("dragend",s),!1},useTouch:function(t){1==$TS_VCSC_Hammer_ReleaseNew?t.hammer({prevent_default:!0}).on("swipeleft swiperight",h.swipeGesture):t.hammer({prevent_default:!0}).on("dragstart",h.swipeGesture)},disableTouch:function(t){1==$TS_VCSC_Hammer_ReleaseNew?t.hammer({prevent_default:!1}).off("swipeleft swiperight",h.swipeGesture):t.hammer({prevent_default:!1}).off("dragstart",h.swipeGesture)},pause:function(t){i.current.playing&&!i.current.paused&&(!0!==t&&"mouseover"!=t.type||(i.current.paused=!0,i.current.main.addClass("kraut-lb-paused"),u.play(!1)))},resume:function(){!i.current.playing&&i.current.paused&&(u.play(!1),i.current.paused=!1,i.current.main.removeClass("kraut-lb-paused"))},openShare:function(e){if(i.current){var o,a=i.current,r=a.current,s=a.set[r];"kraut-lb-icon-share"==e.target.className?s.share&&"block"==s.share.css("display")?(s.share.hide(),a.main.removeClass("kraut-lb-sharing")):(a.main.addClass("kraut-lb-sharing"),s.share||(s.share=o=t('<div class="kraut-lb-share-btns"></div>').appendTo(t("li.kraut-lb-share",a.blocks.menu)),h.shareButtons(o,a.opts.social,h.getMediaProperties(s))),s.share.show()):s.share&&(s.share.hide(),a.main.removeClass("kraut-lb-sharing"))}},closeShare:function(){if(i.current){var t=i.current,e=t.current,o=t.set[e];o.share&&(o.share.hide(),t.main.removeClass("kraut-lb-sharing"))}},renderGrid:function(o){var a,r,i,s,n=o.opts,l=o.set,c=!1,d=[];if(n.grid&&!o.hasGrid&&""!==n.grid){o.hasGrid=!0;var p=[],g=0,f=n.random;a=n.grid.toString().indexOf(",")>-1?n.grid.split(","):t.makeArray(n.grid);for(var m in a)a[m]=parseInt(a[m]);h.need(o.set,h.getPreview,function(){for(var o in l)if(l[o].preview!==e&&(r=l[o].main.hide(),c||(c=r),"true"==l[o].opts.include)){if(i=t(l[o].preview).clone(!0).data("kraut-lb-media",l[o]).click(u.open).get(0),i.title=l[o].opts.title?l[o].opts.title:"",i.alt=l[o].opts.alt?l[o].opts.alt:"",i.groups=l[o].opts.groups?l[o].opts.groups:"",i.thumbnail=l[o].opts.thumbnail?l[o].opts.thumbnail:"",i.preview=l[o].opts.preview?l[o].opts.preview:"",i.hover=l[o].opts.hover?l[o].opts.hover:"",""!=i.groups){i.groups.split(",").forEach(function(e){t.inArray(e,p)<0&&p.push(e)})}else g++;d.push(i)}if(p.length>0&&"true"==n.gridfilter){p.sort();t('<div id="kraut-lb-toggle-'+f+'" class="kraut-lb-toggle '+n.gridtogglestyle+'" data-grid="kraut-lb-grid-'+f+'" data-filter="kraut-lb-filter-'+f+'" data-showall="kraut-lb-showall-'+f+'" data-random="'+f+'">'+n.gridtoggle+"</div>").insertBefore(c),t('<div id="kraut-lb-showall-'+f+'" class="kraut-lb-showall '+n.gridshowallstyle+'" data-grid="kraut-lb-grid-'+f+'" data-filter="kraut-lb-filter-'+f+'" data-random="'+f+'">'+n.gridshowall+"</div>").insertBefore(c);var h=t('<select id="kraut-lb-filter-'+f+'" class="kraut-lb-filter" data-grid="kraut-lb-grid-'+f+'" data-toggle="kraut-lb-toggle-'+f+'" data-showall="kraut-lb-showall-'+f+'" data-random="'+f+'" multiple="multiple"></select>').insertBefore(c);p.forEach(function(e){t('<option value="'+e+'">'+e+"</option>").appendTo(h)}),g>0&&t('<option value="NoGroups">'+n.gridnogroups+"</option>").appendTo(h)}t('<div id="kraut-lb-grid-'+f+'" class="kraut-lb-grid" data-filter="kraut-lb-filter-'+f+'" data-toggle="kraut-lb-toggle-'+f+'" data-random="'+f+'"></div>').insertAfter(c).append(s=t(d)),s.krautgrid({grid:a,margin:parseInt(n.gridspace),order:"true"==n.gridorder,captions:"true"==n.captions,linkGrid:!1,preloader:"true"==n.gridpreloader,filter:"true"==n.gridfilter,random:n.random,selector:"kraut-lb-filter-"+f,toggle:"kraut-lb-toggle-"+f,showall:"kraut-lb-showall-"+f,textAvailable:n.gridavailable,textSelected:n.gridselected,textNoGroups:n.gridnogroups,textToggle:n.gridtoggle,textToggleStyle:n.gridtogglestyle,textShowAll:n.gridshowall,textShowAllStyle:n.gridshowallstyle})})}},parseColor:function(t){for(var e,o=(t+"").split(/bg|\_|\-|\.|\&|\#/),a=0;a<o.length;a++)if((6==(e=o[a].length)||3==e)&&new RegExp("[a-f0-9]{"+e+"}").test(o[a]))return"#"+o[a];return!1},toggleZoom:function(){var e=i.current,o=e.main,a=e.opts,r="kraut-lb-zooming",s=e.set[e.current];s.nsize;if(o.hasClass(r))i.zooming=!1,h.updateMediaLayout(s),a.perfectscroll&&t.isFunction(t.fn.perfectScrollbar)?e.blocks.zoom.find(".kraut-lb-zoom-container").perfectScrollbar("destroy").remove():e.blocks.zoom.find(".kraut-lb-zoom-container").remove();else{i.zooming=!0;var n,l=new Image;l.onload=function(){n=h.pinch.call(t(l),"100%","100%").css({position:"absolute"}).addClass("kraut-lb-zoom-container"),e.blocks.zoom.append(n),a.perfectscroll&&t.isFunction(t.fn.perfectScrollbar)&&n.perfectScrollbar({wheelSpeed:1,useBothWheelAxes:!1,wheelPropagation:!1,swipePropagation:!1,scrollXMarginOffset:10,scrollYMarginOffset:10})},l.src=s.target.src}o.toggleClass(r)},saveImage:function(){var e=i.current,o=e.main,a=e.set[e.current],r=o.find(".kraut-lb-media-save"),s=a.target.src.replace(/#.*$/,"").replace(/\?.*$/,""),n=s.split(/[\\\/]/).pop();0===r.length&&(r=t('<a class="kraut-lb-media-save kraut-lb-icon-save" href="javascript:void(0)" target="_blank"></a>').appendTo(o)),h.checkImageURL(s)&&(r.attr("href",s),r.attr("download",n)),setTimeout(function(){""!=r.attr("href")&&"#"!=r.attr("href")&&r[0].click(),r.attr("href","javascript:void(0)"),r.removeAttr("download")},50)},getMediaProperties:function(t){var e=t.opts,o=e.type,a={title:e.title||document.title,media:"html"!=o&&"ajax"!=o&&"video"!=o&&"audio"!=o&&"facebook"!=o&&"plyr"!=o?"image"==o||"iframe"==o?t.target.src:e.href:""};return a.url=l[o]&&(l[o].video||l[o].audio)||"iframe"==o?a.media:window.location.href,a},detachMedia:function(e){if(void 0!=e&&"undefined"!=e&&null!=e){if(e.hasOwnProperty("group")){var o=e.group.main;t(".kraut-lb-title",o).each(function(){t(this).html("")})}e.hasOwnProperty("target")&&!1!==e.target&&!0!==e.target&&null!=e.target&&t(e.target).detach()}},getInnerHeight:function(t,e){t.css({width:e,height:"auto"});var o=t[0].scrollHeight;return t.css({height:"auto"}),o},getInnerWidth:function(t,e){t.css({height:e,width:1});var o=t[0].scrollWidth;return t.css({width:"auto"}),o},renderMedia:function(e){function o(o){e.html=o,e.target=t(o)[0],a()}function a(){d.loadicon.show(),setTimeout(function(){p.attr("class","kraut-lb-media").addClass("kraut-lb-media-"+g.type).append(e.target),"audio"==g.type&&"true"==g.audiobaronly&&p.addClass("kraut-lb-media-audiobaronly"),n.paused&&(u.play(!1),u.play(!1),n.paused=!1),h.updateMediaLayout(e),d.loadicon.hide()},100)}var r,s,n=i.current,c=n.main,d=n.blocks,p=d.media,g=e.opts,f=g.type;t(".kraut-lb-title",c).each(function(){t(this).html(g.title)}),d.loading.width(0),e.target?a():(l[f]&&"plyr"!=f&&(l[f].video||l[f].audio)?(e.target=r=t(l[f].create(e)).get(0),s=function(){a(),this.onload&&(this.onload=function(){})},r.attachEvent?r.attachEvent("onload",s):r.onload=s,i.root.append(r)):"iframe"==f?(e.target=r=t(l[f].create(e)).get(0),a()):"html"!=f&&"ajax"!=f&&"plyr"!=f||("html"==f||"plyr"==f?o(l[f].create(e)):l[f].create(e,o)),"plyr"==f&&new Plyr(jQuery("#"+e.opts.baseid+"-wrapper").find("video"),{autoplay:"true"==e.opts.videoplay,autopause:!0,loop:{active:"true"==e.opts.loop},storage:{enabled:"true"==e.opts.storage,key:"ts-plyr-token"},muted:"true"==e.opts.muted,volume:parseInt(e.opts.volume),hideControls:"true"==e.opts.hidecontrols,showPosterOnEnd:"true"==e.opts.showposterend,disableContextMenu:"true"==e.opts.hidecontext,tooltips:{controls:"true"==e.opts.tooltips},i18n:{restart:e.opts.langrestart,rewind:e.opts.langrewind,play:e.opts.langplay,pause:e.opts.langpause,forward:e.opts.langforward,played:e.opts.langplayed,buffered:e.opts.langbuffered,currentTime:e.opts.langcurrenttime,duration:e.opts.langduration,volume:e.opts.langvolume,toggleMute:e.opts.langtogglemute,toggleCaptions:e.opts.langtogglecaptions,toggleFullscreen:e.opts.langtogglefullscreen,frameTitle:e.opts.langframetitle}}))},fitInto:function(t,e,o,a){var r,i,s=t/e;return o/a<s?i=(r=t<o?t:o)/s:r=(i=e<a?e:a)*s,[r,i]},updateMediaLayout:function(e){var o,a,r,s,n=!1,u=!1,c=i.current,d=c.blocks,p=d.media,g=c.mspace.width,f=c.mspace.height,m=e.opts,b=m.type,v={top:0,left:0,width:0,height:0},w=e.nsize;if("centercenter"!=c.opts.centerposition&&(("centerleft"==c.opts.centerposition||"centerright"==c.opts.centerposition)&&g>=c.opts.centerwidth?(g/=2,u=!0):("centertop"==c.opts.centerposition||"centerbottom"==c.opts.centerposition)&&f>=c.opts.centerheight&&(f/=2,u=!0)),i.zooming)return!0;if("image"!=b&&(w=e.nsize=e.group.opts.size.split(",")),r=h.fitInto(w[0],w[1],g,f),s=isNaN(m.width)||isNaN(m.height),"image"==b||l[b]&&(l[b].video||l[b].audio&&"false"==m.audiobaronly)){var y=w[0]/w[1];0==m.width&&0==m.height?(v.width=r[0],v.height=r[1]):0==m.height?(v.width=g<m.width?g:m.width,v.height=v.width/y>f?(v.width=f*y)/y:v.width/y):0==m.width?(v.height=f<m.height?f:m.height,v.width=v.height*y>g?(v.height=g/y)*y:v.height*y):s||(r=h.fitInto(m.width/1,m.height/1,g,f),v.width=r[0],v.height=r[1])}else"iframe"==b||l[b]&&l[b].audio&&"true"==m.audiobaronly?(0==m.width?v.width=g:s||(v.width=m.width>g?g:m.width),l[b]&&l[b].audio&&"true"==m.audiobaronly&&v.width>parseInt(m.audiobarwidth)&&(v.width=parseInt(m.audiobarwidth)),0==m.height?v.height=f:s||(v.height=m.height>f?f:m.height)):"html"!=b&&"ajax"!=b&&"plyr"!=b||e.target&&(n=!0,v.width||(m.width>0?v.width=m.width>g?g:m.width:m.height?v.width=parseInt(r[0])>g?g:parseInt(r[0]):v.width=Math.min(g,f)),v.height||m.height>0&&(v.height=m.height>f?f:m.height));if(s&&(m.width/1?v.width=m.width/1:m.height/1&&(v.height=m.height/1),o=isNaN(m.width)?parseFloat(m.width)/100*g:0,(a=isNaN(m.height)?parseFloat(m.height)/100*f:0)&&o?(a||(a=o/w[0]*w[1]),o||(o=a*w[0]/w[1]),r=h.fitInto(o,a,g,f),v.width=r[0],v.height=r[1]):a?o=v.width?v.width:a*w[0]/w[1]:o&&(a=v.height?v.height:o/w[0]*w[1]),r=h.fitInto(o,a,g,f),v.width=r[0],v.height=r[1]),n&&(t(e.target).addClass("kraut-lb-fixed").width(v.width+"px"),v.width||(v.width=Math.min(h.getInnerWidth(t(e.target),v.height),g)),v.height||(v.height=Math.min(h.getInnerHeight(t(e.target),v.width),f)),t(e.target).removeClass("kraut-lb-fixed").css("width","auto"),v.height>t(e.target).height()&&t(e.target).css("height","100%")),"centercenter"!=c.opts.centerposition&&u?"centerleft"==c.opts.centerposition||"centerright"==c.opts.centerposition?(v.top=i.mposy=(f-v.height)/2,"centerleft"==c.opts.centerposition?v.left=i.wsize+c.mspace.left+(g-v.width)/2:"centerright"==c.opts.centerposition&&(v.left=i.wsize+c.mspace.left+(3*g-v.width)/2)):"centertop"!=c.opts.centerposition&&"centerbottom"!=c.opts.centerposition||(v.left=i.wsize+c.mspace.left+(g-v.width)/2,"centertop"==c.opts.centerposition?v.top=i.mposy=(f-v.height)/2:"centerbottom"==c.opts.centerposition&&(v.top=i.mposy=(3*f-v.height)/2)):(v.top=i.mposy=(f-v.height)/2,v.left=i.wsize+c.mspace.left+(g-v.width)/2),"centercenter"!=c.opts.centerposition&&u&&!c.opts.centeroverlay?d.main.addClass("kraut-lb-nofuzz"):d.main.removeClass("kraut-lb-nofuzz"),e.group.main[("image"==b&&(w[0]>v.width||w[1]>v.height)&&c.opts.zoom?"add":"remove")+"Class"]("kraut-lb-can-zoom"),e.group.main[("image"==b&&c.opts.save?"add":"remove")+"Class"]("kraut-lb-can-save"),p.css(v),"iframe"==b||l[b]&&(l[b].video||l[b].audio)){var k=t("iframe.kraut-lb-iframe",p);isNaN(v.height)?k.height("100%"):k.height(v.height),isNaN(v.width)?k.width("100%"):k.width(v.width),l[b]&&l[b].audio&&"true"==m.audiobaronly&&k.css("max-width",m.audiobarwidth)}c.opts.notouch||("html"==b||"ajax"==b||"plyr"==b?c.hasGestures&&(h.disableTouch(d.preview),c.hasGestures=!1):c.hasGestures||(h.useTouch(d.preview),c.hasGestures=!0))},getMediaColor:function(t,e){var a=t.opts;return o.usecolor?e(o.backlight):a.color?e(a.color):void("image"==a.type&&i.hasCanvas?h.getMainColor(t.target,a,function(t){e("rgb("+t.join(",")+")")}):e(o.backlight))},enoughThumbs:function(t){for(var e=0,o=0;o<t.set.length;o++)t.set[o].opts.src&&e++;return e>1||(t.opts.thumbs=!1,!1)},toMedia:function(e){function o(){e.group.main&&e.group.blocks.media.css({width:0,height:0}),0==e.group.main&&(h.renderLayout(e.group),window.setTimeout(function(){h.selectThumb(e)},$TS_VCSC_Lightbox_FXSpeed)),i.current!==e.group?(i.current&&n.close(i.current.group),i.current=e.group,i.current.current=e.index,n.open(e)):s=e.group.current,h.updateLayout(),!1===r?r=!0:!0!==r&&r()}var a,r=!1,s=!1;if(i.current.current==e.index)return!1;u.open.call(e),i.onload&&(i.onload.onload=function(){},i.onload=!1),h.enoughThumbs(e.group),i.current&&i.current==e.group&&!1!==(s=i.current.current)&&(i.phase=s&&e.index||s+e.index!=e.group.set.length-1?s<e.index:s>e.index),e.group.main&&window.setTimeout(function(){h.selectThumb(e)},$TS_VCSC_Lightbox_FXSpeed),i.zooming&&h.toggleZoom(),i.current?n.slideOut(a=i.current.set[i.current.current],function(){h.detachMedia(a),o()}):o(),h.getMediaType(e,function(o){var a=function(){0!=i.current&&h.detachMedia(i.current.set[i.current.current]),function(o){e.opts.type=o,i.onload=!1,h.renderMedia(e),h.updateMediaLayout(e),"image"==e.opts.type?(void 0!=e.opts.share&&"undefined"!=e.opts.share||(e.opts.share=$TS_VCSC_Lightbox_Share),0==e.opts.share||0==e.opts.share||"false"==e.opts.share?t("li.kraut-lb-share > .kraut-lb-icon-share").hide():1!=e.opts.share&&1!=e.opts.share&&"true"!=e.opts.share||t("li.kraut-lb-share > .kraut-lb-icon-share").show()):void 0!=e.opts.share&&"undefined"!=e.opts.share?0==e.opts.share||0==e.opts.share||"false"==e.opts.share?t("li.kraut-lb-share > .kraut-lb-icon-share").hide():1!=e.opts.share&&1!=e.opts.share&&"true"!=e.opts.share||t("li.kraut-lb-share > .kraut-lb-icon-share").show():t("li.kraut-lb-share > .kraut-lb-icon-share").hide(),n.slideIn(e,function(){}),h.getMediaColor(e,function(t){function o(){h.light(e.opts.color)}e.opts.color=t,!1===i.light?i.event.on("maskload",o):o()}),i.current.current=e.index}(o)};!0===r?a():r=a})},renderLayout:function(e){var a,r=e.main=t('<div class="kraut-lb-main"></div>').appendTo(i.b),s=e.opts,n="",l={};l.main=r,e.main.addClass("kraut-lb-scheme-"+s.scheme),""!=s.classid&&e.main.addClass(s.classid),""==o.backlight&&e.main.addClass("kraut-lb-no-backlight"),""!=s.overlay&&0!=s.overlay&&""!=s.repeat&&0!=s.repeat?""!=s.overlay&&0!=s.overlay?""!=s.background&&0!=s.background?e.main.css("background",s.overlay+' url("'+s.background+'") '+s.repeat+" center center"):e.main.css("background",""+s.overlay):""!=s.background&&0!=s.background?e.main.css("background",'#000000 url("'+s.background+'") '+s.repeat+" center center"):e.main.css("background","#000000"):""!=s.overlay&&0!=s.overlay&&e.main.css("background",s.overlay),""!=s.noise&&0!=s.noise&&(e.noise=t('<div class="kraut-lb-noise"></div>').appendTo(e.main),e.noise.css("background-image","url("+s.noise+")")),r.find(".kraut-lb-media-save").remove(),s.save&&t('<a class="kraut-lb-media-save kraut-lb-icon-save" href="javascript:void(0) " target="_blank"></a>').appendTo(r);l.loadicon=t('<div class="kraut-lb-media-loading"></div>').appendTo(r);s.info&&t("#"+s.info).length>0&&0==t("#"+s.info).text().length&&(t("#"+s.info).remove(),s.info=!1),i.canFS&&s.fullscreen&&(n+="kraut-lb-can-fs "),s.share&&(n+="kraut-lb-can-share "),s.save&&(n+="kraut-lb-can-save "),s.play&&e.set.length>1&&(n+="kraut-lb-can-play "),s.zoom&&(n+="kraut-lb-can-zoom "),s.info&&(n+="kraut-lb-has-info "),i.scrollbar||(n+="kraut-lb-no-scrollbar "),s.thumbs&&(n+="kraut-lb-position-"+e.opts.thumbs+" "),r.addClass(n);var c={left:"v",right:"v",top:"h",bottom:"h"},d={v:"width",h:"height"};if(i.asb){var p=l.asb=t('<div class="kraut-lb-pngfix"></div>').appendTo(r);h.css3(p).transition("background-color 500ms linear")}s.info&&(e.info=(a=t("#"+s.info)).length?a:t("<div></div>"));var g,f=l.tbar=t('<div class="kraut-lb-tbar"></div>').appendTo(r),m=t('<ul class="kraut-lb-tbar-controls"></ul>'),b=l.bbar=t('<div class="kraut-lb-bar"></div>').appendTo(r),v=l.controls=t('<ul class="kraut-lb-controls"></ul>').appendTo(b),w={prev:"left",play:"play",next:"right",title:!1,exit:"exit",fs:"fs",info:"info",minis:"minis"},y={prev:"",play:"",next:"",title:"",exit:"",fs:"",info:"",minis:""};1==e.set.length&&r.addClass("kraut-lb-no-more");for(var k in w)v.append(g='<li class="kraut-lb-'+k+'">'+(w[k]?'<div class="kraut-lb-icon-'+w[k]+'">'+y[k]+"</div>":"")+"</li>"),"exit"!=k&&"title"!=k&&"info"!=k&&"fs"!=k&&"thumbs"!=k||m.append(g);if(s.thumbs){var _=l.thumbs=t('<ul class="kraut-lb-thumbs"></ul>'),x=l.bthumbs=t('<div class="kraut-lb-thumbs-bar"></div>').append(_);if(x.addClass("kraut-lb-thumbs-"+s.thumbs).css(s.thumbs,0),_.addClass("kraut-lb-thumbs-"+{v:"vertical",h:"horizontal"}[c[s.thumbs]]).css(d[c[s.thumbs]],s.thumbsize),"bottom"==s.thumbs||"top"==s.thumbs?_.css("left",0):"left"!=s.thumbs&&"right"!=s.thumbs||_.css("top",0),"bottom"==s.thumbs?b.append(x):"top"==s.thumbs?f.append(x):r.append(x),"v"==c[s.thumbs]){var S={left:"auto",right:"auto"};S["left"==s.thumbs?"right":"left"]=x[d[c[s.thumbs]]](),f.css(S),b.css(S)}}m.appendTo(f);var C,T=l.preview=t('<div class="kraut-lb-media-space"></div>').appendTo(r);if(s.closer)l.scroller=t('<div class="kraut-lb-media-scroller"></div>').appendTo(T).append(C=l.media=t('<div class="kraut-lb-media"><div class="kraut-lb-exit-inner"><div class="kraut-lb-icon-exit"></div></div></div>'));else l.scroller=t('<div class="kraut-lb-media-scroller"></div>').appendTo(T).append(C=l.media=t('<div class="kraut-lb-media"></div>'));e.css3=h.css3(C);for(var j=l.menu=t('<ul class="kraut-lb-photo-menu"></ul>').appendTo(C),L=["zoom","share","save"],z=["","",""],k=0;k<L.length;k++)j.append('<li class="kraut-lb-'+L[k]+'"><div class="kraut-lb-icon-'+L[k]+'">'+z[k]+"</li>");l.info=t('<div class="kraut-lb-project"><div class="kraut-lb-info-panel"><div class="kraut-lb-icon-info"></div></div></div>').appendTo(r),l.loading=t('<div class="kraut-lb-loadbar"></div>').appendTo(r);C.on("mouseover",h.pause).on("mouseout",h.resume),e.blocks=l,s.thumbs&&h.need(e.set,h.getThumbnail,function(){h.renderThumbnails(e)});l.zoom=t('<div class="kraut-lb-zoom-space"><div class="kraut-lb-icon-zoom"></div></div>').appendTo(r);s.autoplay&&(e.playing=!0,e.paused=!0,r.addClass("kraut-lb-playing")),t("li.kraut-lb-prev",v).click(u.previous),t("li.kraut-lb-next",v).click(u.next),t("li.kraut-lb-play",v).click(u.play),t("div.kraut-lb-icon-fs",r).each(function(){t(this).click(h.fs.toggle)}),t("li.kraut-lb-exit",r).each(function(){t(this).on("click",function(){u.close()})}),s.closer&&t(".kraut-lb-exit-inner",r).on("click touchstart",function(){u.close()}),t(document).on("click touchstart",".kraut-lb-exit-custom",function(){u.close()}),t("div.kraut-lb-icon-info",r).each(function(){t(this).on("click",h.toggleInfo)}),t("div.kraut-lb-icon-minis",r).each(function(){t(this).on("click",h.toggleThumbs)}),t("div.kraut-lb-icon-zoom",r).on("click",h.toggleZoom),t("div.kraut-lb-icon-save",r).on("click",h.saveImage),t("div.kraut-lb-icon-share",r).on("click",h.openShare),s.bgclose&&h.backgroundClose(l),o.tapping&&l.media.on("click",function(e){if(!i.current)return!1;var o=t(e.target);o.is("img")&&o.parent().hasClass("kraut-lb-media")&&u.next()})},backgroundClose:function(t){t.preview.on("click",function(t){var e=jQuery(t.target).attr("class");h.wordInString(e,"kraut-lb-media-space")&&u.close()})},wordInString:function(t,e){return new RegExp("\\b"+e+"\\b","i").test(t)},fs:{on:!1,request:function(t){return h.fs.on=!0,"js"==$TS_VCSC_Lightbox_ScrollBlock&&jQuery("body, html").addClass("ts-composer-extensions-noscroll"),screenfull.request(t)},has:function(){return 0!=h.fs.request(document.documentElement)},exit:function(){var t=document;"js"==$TS_VCSC_Lightbox_ScrollBlock&&jQuery("body, html").removeClass("ts-composer-extensions-noscroll"),screenfull.exit(t),h.fs.on=!1},toggle:function(){var t="kraut-lb-onfs",e=i.current.main;e.find(".kraut-lb-icon-fs");h.fs.on?(e.removeClass(t),h.fs.exit()):(e.addClass(t),h.fs.request(document.documentElement))}},loadThumb:function(t,e){var o;this.thumb=o=new Image,o.onload=e,o.src=t},updateLayout:function(o){function a(){i.asb||g.append(i.light[0].$el.height(p[2]+100),i.light[1].$el.height(p[2]+100))}var r=i.current,s=i.wsize=i.w.width(),n=i.hsize=i.w.height();if(r){var l,u=r.blocks,c=u.preview,d=r.opts,p=[d.margin,d.margin,d.margin,d.margin],g=r.main,f=u.bthumbs,m={top:0,right:1,bottom:2,left:3},b="height",v="width",w=[b,v,b,v];f===e||"bottom"==d.thumbs||"top"==d.thumbs||g.hasClass("kraut-lb-thumbs-hide")||(p[m[d.thumbs]]+=f[w[m[d.thumbs]]]()),p[0]+=u.tbar.height(),p[2]+=u.bbar.height(),l={top:p[0],left:p[3],width:s-p[1]-p[3],height:n-p[0]-p[2]},u.bbar.width(l.width+2*d.margin),u.tbar.width(l.width+2*d.margin),c.css(t.extend({},l,{left:0,width:s,height:l.height+40})),u.loadicon.css({left:l.left+l.width/2,top:l.top+l.height/2}),r.mspace=l,i.hasCanvas&&(i.light?a():i.event.on("maskload",a)),0!=r.set[r.current].opts.type&&r.set[r.current].target&&h.updateMediaLayout(r.set[r.current]),o!==e&&c.scrollLeft(i.wsize),d.perfectscroll&&t.isFunction(t.fn.perfectScrollbar)&&(0!=d.thumbs&&"none"!=d.thumbs&&d.perfectscroll&&r.blocks.bthumbs.perfectScrollbar("update"),i.zooming&&r.blocks.zoom.find(".kraut-lb-zoom-container").perfectScrollbar("update"))}},light:function(t,e){if(i.hasCanvas&&""!=i.current.opts.backlight)if(i.asb&&i.current){i.current.blocks.asb.get(0).style.backgroundColor=t}else{var o=arguments,a={opacity:1,display:"block"},r={opacity:0},s=i.light[0],n=i.light[1];2==o.length?t.main.append(s.$el,n.canvas):e=t;t=[0,0,n.width,n.height];"remove"===e?(s.$el.hide(),n.$el.hide()):(n.$el.stop().animate(r,500,function(){h.toColor(n,e),n.$el.css(a),s.$el.hide()}),h.toColor(s,e),s.$el.stop().show().css(r).animate(a,500))}},toColor:function(t,e){var o=t.width,a=t.height,r=t.context;r.clearRect(0,0,o,a),r.fillStyle=e,r.fillRect(0,0,o,a),t.mask()},masks:function(){t("div.kraut-lb-mask");var e=t('<canvas class="kraut-lb-effcurrent"></canvas>'),o=t('<canvas class="kraut-lb-effchange"></canvas>');i.color="#000000",i.light=i.asb?[]:[new h.canvasMask(e,this),new h.canvasMask(o,this)],i.event.trigger("maskload")},getImageURL:function(t){var e=/^url\((['"]?)(.*)\1\)$/.exec(t.css("background-image"));return e?e[2]:""},checkImageURL:function(t){return null!=t.toLowerCase().match(/\.(jpeg|jpg|gif|png|bmp|tif|raw)$/)},hashChange:function(){var t="";window.setInterval(function(){o.nohashes&&i.hash!=t&&0==(t=i.hash).search("#"+o.hashpath)&&h.route(t.replace("#","")),t!=window.location.hash&&0==(t=i.hash=window.location.hash).search("#"+o.hashpath)&&h.route(t.replace("#",""))},150)},route:function(t,o){if(r[t]!==e){var a=r[t];h.toMedia(a.call!=e?a():a)}},addRoute:function(t,e){r["nch_"+t]=e},isImage:function(t,a,r){var s=new Image,n=function(){a("image")};s.onerror=r||function(){h.getMediaType(t,a,!0)},s.onload=function(){t.target=this,t.nsize=[this.width,this.height],"remove"==t.opts.color||0!=t.opts.color&&"auto"!=t.opts.color?a("image"):r===e&&!h.allowedOrigin(this,t.opts)&&(o.cors&&""!=o.backlight&&"global"==t.opts.usecors||"true"==t.opts.usecors&&"remove"!=t.opts.color)?h.isImage(t,a,n):a("image")},r!==e&&0==t.opts.color&&(s.crossOrigin="Anonymous"),s.src=t.opts.href,i.onload=s},getMediaType:function(t,o,a){var r=t.opts;if(0!=r.type)return t.target||l[r.type]&&l[r.type].video&&r.videoid===e&&l[r.type].is(t),o(r.type);if(a){for(var a in l)if(l[a].is(t))return o(a)}else h.isImage.apply(this,arguments)},need:function(t,e,o){for(var a=t.length-1,r=0,i=function(){r++==a&&o()},s=0;s<=a;s++)e(t[s],i)},getPreview:function(t,o){var a=new Image,r=t.opts,i=r.type,s=function(){o(t)};if(t.preview!==e)return o(t);r.preview?(a.onload=s,a.src=r.preview,t.preview=a):r.src?(a.onload=s,a.src=r.src,t.preview=a):l[i]&&(l[i].video||l[i].audio)?(t.opts.videoid===e&&l[i].is(t),l[i].preview(t,s)):o(t)},getThumbnail:function(t,o){var a=new Image,r=t.opts,i=r.type,s=function(){o(t)};if(t.thumb!==e)return o(t);r.thumbnail?(a.onload=s,a.src=r.thumbnail,t.thumb=a):r.src?(a.onload=s,a.src=r.src,t.thumb=a):r.href&&h.checkLinkIsImage(r.href)?(a.onload=s,a.src=r.href,t.thumb=a):l[i]&&(l[i].video||l[i].audio)?(t.opts.videoid===e&&l[i].is(t),l[i].thumb(t,s)):o(t)},renderThumbnails:function(o){var a,r,s,n=o.main,l=o.opts,c=o.blocks.thumbs.empty(),d=0,p={bottom:1,top:1,left:0,right:0};c[p[o.opts.thumbs]?"height":"width"](o.opts.thumbsize),window.setTimeout(function(){for(var g in o.set)(r=o.set[g].thumb)!==e&&(s=(r.naturalWidth||r.width)/(r.naturalHeight||r.height),d+=l.thumbsize*(p[o.opts.thumbs]?s:1/s)+8,c.append(t("<li></li>").append(t(o.set[g].thumb).removeAttr("width","height").data("kraut-lb-media",o.set[g]).off("click").on("click",u.open))));c[p[o.opts.thumbs]?"width":"height"](d-6),c.find("li").length>1&&n.addClass("kraut-lb-has-thumbs"),l.perfectscroll&&t.isFunction(t.fn.perfectScrollbar)?h.scrollThumbs():(i.isTouchDevice&&(a=new Hammer(c.get(0),{prevent_default:!1}),"left"==l.thumbs||"right"==l.thumbs?(1==$TS_VCSC_Hammer_ReleaseNew&&a.get("swipe").set({direction:Hammer.DIRECTION_ALL}),a.on("swipeup swipedown",function(t){return t.direction=t.type.replace("swipe",""),0==$TS_VCSC_Hammer_ReleaseNew&&(t.distance=t.gesture.distance),h.swipeThumbs(t),!0})):a.on("swipeleft swiperight",function(t){return t.direction=t.type.replace("swipe",""),0==$TS_VCSC_Hammer_ReleaseNew&&(t.distance=t.gesture.distance),h.swipeThumbs(t),!0})),h.wheelThumbs()),c.addClass("kraut-lb-thumbs-loaded")},50)},getFX:function(t,e){if(!1===t&&(e.opts.effect=t=e.group.opts.animation),"random"==t){var o=[];for(var a in s)o.push(a);e.opts.effect=e.opts.animation=t=o[Math.round(Math.random()*(o.length-1))]}return s[t]||function(){}},mediaGroup:function(e,a){var i,s,n,l=this;a||(a=h.randomName()),this.main=!1,this.name=i=a,this.opts=s=t.extend({},o,e),this.current=!1,this.set=[],this.playing=!1,this.paused=!1,this.about=!1,this.hasGestures=!1,this.add=function(t,e){var a=new h.mediaItem(t,h.inheritProps(s,e));a.group=l,a.opts.rel=i,a.index=l.set.length,a.opts.href||(a.opts.href=a.opts.src),$TS_VCSC_Lightbox_URLColor&&(n=h.parseColor(a.opts.href+a.opts.src))&&(a.opts.color=n),r[o.hashpath+a.opts.hash]=a,l.set.push(a)}},allowedOrigin:function(e,o){if(!i.hasCanvas)return!0;var a=i.tcanvas,r=a.getContext("2d"),s=a.width,n=a.height;if(r.clearRect(0,0,s,n),r.drawImage(e,0,0),""==i.current.opts.backlight||"remove"==o.color)return t(i.tcanvas).remove(),t(i.tcanvas=document.createElement("canvas")).addClass("kraut-lb-testcanvas").appendTo(i.b),!1;try{r.getImageData(0,0,1,1)}catch(e){return t(i.tcanvas).remove(),t(i.tcanvas=document.createElement("canvas")).addClass("kraut-lb-testcanvas").appendTo(i.b),!1}return!0},inheritProps:function(t,o){for(var a in t)o[a]!==e&&(t[a]=o[a]);return o},mediaItem:function(e,o){this.main=e,this.opts=t.extend({hash:h.getHash(o)},a,o),this.target=!1,this.share=!1,e.data("kraut-lb-media",this),e.on("click",function(t){return t.preventDefault(),u.open.call(this),!1})},keyboard:function(t){var e=t.which,o=i.current;o&&o.opts.keyboard&&(32==e&&o.opts.play&&u.play(),37==e&&u.previous(!0),39==e&&u.next(!0),27==e&&u.close())},setFrom:function(o,a){var r,s=t(),n=new h.mediaGroup(a);for(var l in o)o[l].charAt!==e&&(o[l]={href:o[l]}),r=t('<a href="'+o[l].href+'"></a>'),o[l].src&&r.append('<img src="'+o[l].src+'">'),n.add(r,o[l]),s=s.add(r);return i.all[n.name]=n,s},randomName:function(){return"kraut_group_"+Math.round(Math.random()*(new Date).getTime())},randomString:function(){var t=(new Date).getTime();return"yxxxxxxy-yxxy-yxxy-yxxy-yxxxxxxxxxxy".replace(/[xy]/g,function(e){var o=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?o:7&o|8).toString(16)})},getHash:function(t){var a,i=t.href?t.href:t.href=t.src,s=0;t.hash;if(i===e||0==(i+"").length)return s;for(a=0;a<i.length;a++)s=(s<<5)-s+i.charCodeAt(a),s&=s;if(s=Math.abs(s),r[o.hashpath+s]!==e)for(;r[o.hashpath+s]!==e;)s++;return s},getDataProperties:function(e){e.jquery&&(e=e.get(0));for(var o,a=arguments,r=a[1]?a[1]:[],i={},s=0;s<e.attributes.length;s++){var n=e.attributes[s].name;(r[n]||t.inArray(n,r)>=0||0==n.search("data-"))&&(i[r[n]?r[n]:n.replace("data-","")]=(o=e.getAttribute(n))==parseInt(o)?parseInt(o):o)}return void 0===i.hover&&(i.hover=i.title),i},canvasMask:function(t,e){if(i.hasCanvas){var o,a,r;this.$el=t,this.canvas=t=t.get(0),this.context=o=t.getContext("2d"),this.mask=e,this.width=a=t.width=e.width,this.height=r=t.height=e.height,o.drawImage(e,0,0),this.maskdata=function(t){for(var e=[],o=0,i=0;i<r;i++)for(var s=0;s<a;s++,o+=4)e.push(t.data[o]);return e}(o.getImageData(0,0,a,r)),o.clearRect(0,0,a,r),this.mask=function(){for(var t=this.maskdata,e=4*t.length,i=0,s=o.getImageData(0,0,a,r);i<e;)s.data[i+3]*=t[i/4]/255,i+=4;o.putImageData(s,0,0)}}},hexToRGB:function(t){var e=t.replace("#",""),o=e.match(/.{1,1}/g);e.length/3<2&&(e=o[0]+o[0]+o[1]+o[1]+o[2]+o[2]),e=e.match(/.{1,2}/g);for(var a=0;a<3;a++)e[a]=parseInt(e[a],16);return e},drawImageOnto:function(t,e,o,a,r,i,s){var n=this,l=arguments;try{t.drawImage(e,o,a,r,i)}catch(t){return void window.setTimeout(function(){h.drawImageOnto.apply(n,l)},0)}s()},getMainColor:function(t,e,o){var a,r,s,n=document.createElement("canvas"),l=n.getContext("2d"),u=0,c=0,d=n.width=200,p=n.height=200,g=[0,0,0],f=h.hexToRGB(i.current.opts.backlight);if(!n.getContext||!l||"remove"==e.color)return o(f);h.drawImageOnto(l,t,0,0,200,200,function(){if(""==i.current.opts.backlight)return o(f);try{a=l.getImageData(0,0,d,p)}catch(t){return o(f)}for(var t=0;t<p;t++)for(var e=0;e<d;e++)r=(a.data[u]+a.data[u+1]+a.data[u+2])/3,(s=Math.abs(r-a.data[u])+Math.abs(r-a.data[u+1])+Math.abs(r-a.data[u+1]))>c&&(c=s,g=[a.data[u],a.data[u+1],a.data[u+2]]),u+=4;o(g)})},checkLinkIsImage:function(t){var e=(t=(t=t.toLowerCase()).split("?")[0]).split("."),o=e[e.length-1];return-1!==["jpg","jpeg","tiff","png","gif","bmp"].indexOf(o)},checkNumberRange:function(t,e,o){return(t-e)*(t-o)<=0},checkTouchDevice:function(){try{return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}catch(o){var e=t('<div id="kraut-lb-touch-device"></div>');return i.b.append(e),e.position().top<0&&(e.remove(),!0)}}};t.fn.krautlightbox=function(t){return u[t]?u[t].apply(this,Array.prototype.slice.call(arguments,1)):u.init.apply(this,arguments)},t.fn.krautlightbox.defaults=o,t(document).ready(function(){t(".kraut-lb-hide-if-javascript").hide(),i.b=t("body"),i.w=t(window).resize(h.updateLayout),i.doc=t(document.documentElement),i.doc.removeClass("kraut-lb-opened").addClass("kraut-lb-closed"),i.b.addClass("kraut-lb-controls-"+$TS_VCSC_Lightbox_Controls),h.hashChange(),i.isTouchDevice=h.checkTouchDevice(),i.isTouchDevice&&i.b.addClass("kraut-lb-photo-menu-visible");var a;i.asb=(a=navigator.userAgent.toLowerCase()).search("android")>0&&a.search("mobile safari")>0&&a.search("linux")>0&&a.search("chrome")<0;var r=document.createElement("canvas"),s=i.root=t('<div class="kraut-lb-mask"></div>').appendTo(i.b);(i.hasCanvas=!(!r.getContext||!r.getContext("2d")))&&""!=o.backlight?((c=new Image).onload=h.masks,c.src=h.getImageURL(s),t(i.tcanvas=document.createElement("canvas")).addClass("kraut-lb-testcanvas").appendTo(i.b)):(i.hasCanvas=!1,h.masks()),i.canFS=screenfull.enabled,h.fs.on=!1,i.w.keyup(h.keyboard);var n=t('<div class="kraut-lb-scrollbars"></div>').appendTo(i.b),l=n.get(0).clientWidth,u=n.get(0).offsetWidth;l!==e&&u!==e&&u==l&&(i.scrollbar=!1),n.remove(),"lightbox"==$TS_VCSC_Lightbox_Protection?jQuery("body").on("contextmenu dragstart",".kraut-lb-main img",function(t){return t.preventDefault(),!1}):"global"==$TS_VCSC_Lightbox_Protection&&jQuery("body").on("contextmenu dragstart","img",function(t){return t.preventDefault(),!1}),t(".nch-lightbox").krautlightbox(),t(".kraut-lightbox").krautlightbox()})}(jQuery),function(t,e,o,a){function r(t,e){var r,i=t,s=e||["ms","O","Moz","Webkit","Khtml"],l=(t=function(t){for(var e=t.split("-"),o=1;o<e.length;o++)e[o]=e[o].substr(0,1).toUpperCase()+e[o].substr(1);return e.join("")}(i)).substr(0,1).toUpperCase()+t.substr(1),u=o.documentElement;if(u.style[t]!==a)return n[i]=i,t;r=(s.join(l+"/")+l).split("/");for(var c in r)if(u.style[r[c]]!==a)return n[i]="-"+s[c].toLowerCase()+"-"+i,r[c];return!1}var i={},s={},n={},l={rotate:"deg",rotateX:"deg",rotateY:"deg",skewX:"deg",skewY:"deg",perspective:"px",scale:"",translateX:"px",translateY:"px",translateZ:"px"};!function(){for(var t=arguments,e=0;e<t.length;e++)s[t[e]]=r(t[e])}("transform","perspective","transition","transform-origin"),i.transform=function(t,e){var o=e===a?t:function(o){return o[t]=e,o}({}),r=[];if(!1!==s.transform){for(var i in o)l[i]!==a&&(o[i]+"").search(l[i])<0&&(o[i]+=l[i]),r.push(i+"("+o[i]+")");this.style[s.transform]=r.join(" ")}},i.transition=function(t){this.style.setProperty===a?this.style[s.transition]=t:this.style.setProperty(n.transition,t)},i.transformOrigin=function(t){this.style.setProperty===a?this.style[s["transform-origin"]]=t:this.style.setProperty(n["transform-origin"],t)},i.perspective=function(t){!1!==s.perspective&&((t+"").search(l.perspective)<0&&(t+=l.perspective),this.style.setProperty===a?this.style[s.perspective]=t:this.style.setProperty(n.perspective,t))},i.animate=function(t,o,r){var s=this,o=o||400,l=[n.transform].join(",")+" "+o/1e3+"s ease-in";i.transition.call(this,l),i.transform.call(this,t),e.setTimeout(function(){i.transition.call(s,"none"),r!==a&&r()},o)},t.fn.krautlightbox("access","css3",function(t){return new function(t){var e=this;this.el=t.jquery===a?t:(this.$el=t).get(0);for(var o in i)this[o]=function(t){return function(){i[t].apply(e.el,arguments)}}(o)}(t)})}(jQuery,window,document),function(t,e){function o(o,a,r){return function(i,s,n,l){if(l!==e)return 1==r?e:r*l;var u=a(s,Math.abs(s)),h=[u[0]];i.transformOrigin(u[2]||c),n&&h.push(o.fxspeed),u[0]!==e&&i[n?"animate":"transform"].apply({},h),u[1]!==e&&(h[0]=u[1],t.fn[n?"animate":"css"].apply(i.$el.stop(),h))}}var a="perspective",r="rotate",i="rotateX",s="rotateY",n="translateY",l="translateZ",u="opacity",c="50% 50%",h=t.fn.krautlightbox.defaults,d="scale";t.fn.krautlightbox("fx",{swipe:function(){},fade:o(h,function(t,o){var a={};return a[u]=1-o,[e,a]},1),scale:o(h,function(t,e){var o={};return o[d]=1-.6*e,[o]},1),slideUp:o(h,function(t,e){var o={};return o[n]=900*t,[o]},0),slideDown:o(h,function(t,e){var o={};return o[n]=-900*t,[o]},0),flip:o(h,function(t,e){var o={};return o[a]=1e3,o[s]=90*t,[o]},0),skew:o(h,function(t,e){var o={};return o[a]=1e3,o.skewX=30*t,[o]},1),bounceDown:o(h,function(t,e){var o={};return o[a]=100,o[n]=1e3*e,[o]},1),bounceUp:o(h,function(t,e){var o={};return o[a]=100,o[n]=-1e3*e,[o]},1),hangLeft:o(h,function(t){var o={};return o[r]=-179*t,[o,e,"0% 0%"]},0),hangRight:o(h,function(t){var o={};return o[r]=-179*t,[o,e,"100% 0%"]},0),zoomIn:o(h,function(t,e){var o={},i={};return o[a]=800,o[l]=800*e,o[r]=45*t,i[u]=1-e,[o,i]},0),simpleFade:o(h,function(t,o){var a={};return a[u]=1-o,[e,a]},0),simpleSwitch:o(h,function(t,o){var a={};return a[u]=1,[e,a]},0),breakIn:o(h,function(t){var e={};return e[r]=45*t,[e]},1),rotateIn:o(h,function(t,e){var o={};return o[a]=1e3,o[s]=90*t,o[d]=1-.3*e,[o]},1),rotateOut:o(h,function(t,e){var o={};return o[a]=1e3,o[s]=-90*t,o[d]=1-.3*e,[o]},1),cicleDown:o(h,function(t,e){var o={},r={};return o[a]=1200,o[i]=-90*t,o[n]=200*e,r[u]=1-e,[o,r,"50% 100%"]},0),cicleUp:o(h,function(t,e){var o={},r={};return o[a]=1200,o[i]=-90*t,o[n]=-200*e,r[u]=1-e,[o,r,"50% 1%"]},0),throwIn:o(h,function(t,e){var o={},i={};return o[a]=800,o[d]=1-.6*e,o[r]=180*t,i[u]=1-e,[o,i]},.3),fall:o(h,function(t,e){var o={},s={};return o[a]=1800,o[i]=-90*e,o[r]=90*t,o[l]=-400*t,s[u]=Math.pow(1-e,.25),[o,s,c]},0),jump:o(h,function(t,e){var o={};return o[a]=1500,o[d]=1-.999*e,o[n]=300*e,o[i]=100*e,o[l]=1e3*e,[o]},0)})}(jQuery),function(t){function e(t,e){for(var o="",a=!1,r="",i=0;i<t.length;i++)a?"}"==t.charAt(i)?(e[r]&&(o+=e[r]),a=!1,r=""):r+=t.charAt(i):"{"==t.charAt(i)?a=!0:o+=t.charAt(i);return o}function o(t){return void 0===t.has.charAt?t.has():void 0!==window[t.has]}function a(t){var e=document.createElement("script");e.async=!0,e.defer=!0,e.id=t.id,e.src=t.src,i.append(e)}function r(t,a,r){for(var i,a=a.split(","),n="",l=[],u=0;u<a.length;u++)(l[u]=o(i=s[a[u]]))&&(n+=e(i.create,r));t.append(n);for(var u in a)l[u]&&s[a[u]].parse(s[a[u]].api(),t.get(0))}var i,s={fb:{has:"FB",code:"fb",api:function(){return FB},parse:function(t,e){t.XFBML.parse(e)},id:"ts-kraut-facebook-api",src:"https://connect.facebook.net/en_US/all.js",create:'<div class="kraut-lb-facebook-container" data-share-kraut="true"><iframe class="fb-like" src="//www.facebook.com/plugins/like.php?layout=standard&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=20&amp;href={url}" scrolling="no" frameborder="0" style="border:none; overflow:hidden; height:20px;" allowTransparency="true"></iframe></div>'},tw:{has:"twttr",code:"tw",api:function(){return twttr},parse:function(t,e){t.widgets.load(e)},id:"ts-kraut-twitter-api",src:"https://platform.twitter.com/widgets.js",create:'<div class="kraut-lb-twitter-container" data-share-kraut="true"><a href="https://twitter.com/share" class="twitter-share-button" data-url="{url}" data-text="{title}" data-count="none" target="_blank">Tweet</a></div>'},gp:{has:function(){return"undefined"==typeof gapi||gapi.plusone,!1},code:"gp",api:function(){return gapi.plusone},parse:function(t,e){t.go(e)},id:"ts-kraut-googleplus-api",src:"https://apis.google.com/js/plusone.js",create:'<div class="kraut-lb-google-container" data-share-kraut="true"><div class="g-plusone" data-share-kraut="true" data-size="medium" data-annotation="none" data-href="{url}"></div></div>'},pin:{has:function(){for(var t in window)if(0==t.search("PIN_"))return!0;return!1},code:"pin",api:function(){for(var t in window)if(0==t.search("PIN_")&&window[t].f)return window[t]},parse:function(e,o){for(var a,r=t(o).is("a")?[o]:o.getElementsByTagName("a"),i=e.f.render,s=0;s<r.length;s++)void 0!==(a=t(r[s]).attr("data-pin-do"))&&0!=t(r[s]).parent(".kraut-lb-pinterest-container").length&&"undefined"!=i&&void 0!=i&&i[a](r[s])},id:"ts-kraut-pinterest-api",src:"https://assets.pinterest.com/js/pinit.js",create:'<div class="kraut-lb-pinterest-container" data-share-kraut="true"><a href="https://pinterest.com/pin/create/button/?url={url}&media={media}&description={title}" data-pin-do="buttonPin" data-pin-save="false" data-pin-custom="true" target="_blank"><img src="https://assets.pinterest.com/images/pidgets/pin_it_button.png"/></a></div>'}};t(window).load(function(){if($TS_VCSC_Lightbox_LoadAPIs){var e,n=$TS_VCSC_Lightbox_Social.split(",");i=t("body");for(var l in s)e=s[l],t.inArray(e.code,n)>=0&&(o(e)||a(e))}t.fn.krautlightbox("access","shareButtons",r)})}(jQuery),function(t,e,o){var a={grid:function(e,o){this.name="",this.set=e,this.opts=t.extend({},t.fn.krautgrid.defaults,o),this.images=[],this.items=[],this.cols=[],this.width=0,this.columns=0,this.filters=[],o.target||(this.opts.target=t(e.parent()))},column:function(){this.images=[],this.height=0,this.width=0,this.aspect=0,this.less=!1,this.addImage=function(t){this.images.push(t),this.aspect+=t.aspect}},getColumns:function(t,e){for(var o=0;e[o]<t;)o++;return o==e.length?o:o+1},resolveDeltaHeight:function(t,e,o,a){return(t+e*a)/(o+a)},spreadImages:function(t,e){var o=t.images,a=o.length;if(t.opts.order)for(u=0;u<a;u++)e[u%t.columns].addImage(o[u]);else{for(var r,i=o.length,s=0,n=t.columns,l=[],u=0;u<n;u++)l.push({index:l.length,aspect:0});for(;s<i;){r=[];for(u=0;u<n;u++)void 0!=o[s+u]&&r.push({aspect:1/o[s+u].aspect,index:s+u});r.sort(function(t,e){return t.aspect>e.aspect}),l.sort(function(t,e){return t.aspect<e.aspect});for(u=0;u<r.length;u++)e[l[u].index].addImage(o[r[u].index]),l[u].aspect+=r[u].aspect;s+=n}}},renderGrid:function(e){var o=function(){a.updateGrid(e)};t(window).resize(o),jQuery(window).on("debouncedresize",function(t){window.setTimeout(function(){o()},750)}),o(),window.setTimeout(function(){jQuery(window).trigger("debouncedresize")},750)},filterGrid:function(e,o){var r=e.opts,i=(e.set,e.images,e.cols),s=r.target.width();e.columns=a.getColumns(e.width=s,r.grid);var n=o.split(",");if(e.columns!=i.length){i=[];for(l=0;l<e.columns;l++)i[l]=new a.column;a.spreadImages(e,i)}for(var l=0;l<i.length;l++){c=i[l],all=c.images;for(var u=0;u<all.length;u++)image=t(e.items[all[u].index]),groups=t.trim(image.attr("data-groups")),valid=!1,n.forEach(function(t){a.searchGrid(groups,t)&&(valid=!0)}),valid?(image.removeClass("krautgrid-tile-filtered"),image.attr("data-showing","true")):(image.addClass("krautgrid-tile-filtered"),image.attr("data-showing","false"))}},searchGrid:function(t,e){return new RegExp("\\b"+e+"\\b","i").test(t)},updateGrid:function(e){var o=e.opts,r=(e.set,e.images),i=o.target,s=e.cols,n=o.target.width();if(e.width!=n){if(e.columns=a.getColumns(e.width=n,o.grid),e.columns!=s.length){s=[];for(d=0;d<e.columns;d++)s[d]=new a.column;a.spreadImages(e,s)}for(var l=e.width-(s.length-1)*o.margin,u=Math.floor(r.length/e.columns),c=0,h=0,d=0;d<e.columns;d++)(s[d].less=s[d].images.length==u)?c+=1/s[d].aspect:h+=1/s[d].aspect;for(var p,g,f=a.resolveDeltaHeight(l,o.margin,c,h),m=0,b=0,d=0;d<s.length;d++){g=s[d],all=g.images,p=1/g.aspect*(f-(g.less?0:o.margin)),b=0;for(var v=0;v<all.length;v++)t(e.items[all[v].index]).css({position:"absolute",left:m,top:b,width:p,height:p*all[v].aspect,display:"block"}).addClass("krautgrid-tile"),b+=p*all[v].aspect+o.margin;m+=p+o.margin}i.height(b-o.margin),"static"==i.css("position")&&i.css("position","relative")}},triggerClick:function(e){if(e.preventDefault(),!t(e.target).is("img"))if(""!=t(this).find("img").attr("data-link")&&void 0!==t(this).find("img").attr("data-link")){var o=t(this).find("img").attr("data-link"),a=t(this).find("img").attr("data-target");t.trim(a).length>0?window.open(o,a):window.location.href=o}else if(""!=t(this).find("img").attr("data-image")&&void 0!==t(this).find("img").attr("data-image")){var r=t(this).find("img").attr("data-image"),i=t(this).find("img").attr("title");t.fn.krautlightbox([{href:r,title:i}],"")}else t(this).find("img").click()},loadTiles:function(e){var o=this,r=0,i=[],s=0,n=o.opts.random;if(this.set.each(function(e,n){var l=new Image;if(o.opts.linkGrid)if(""!=t(o.set[e]).attr("data-groups")){t(o.set[e]).attr("data-groups").split(",").forEach(function(e){t.inArray(e,i)<0&&i.push(e)})}else s++;l.onload=function(){!function(e,i,s){var n,l,u,c,h,d,p;o.images[e]={width:i,height:s,aspect:s/i,src:o.set[e].src,index:e,caption:o.set[e].title,alt:o.set[e].alt,title:o.set[e].title,hover:p=o.set[e].hover,thumbnail:d=o.set[e].thumbnail,groups:l=o.opts.linkGrid?t(o.set[e]).attr("data-groups"):o.set[e].groups,links:u=o.opts.linkGrid?t(o.set[e]).attr("data-link"):"",image:c=o.opts.linkGrid?t(o.set[e]).attr("data-image"):""},"undefined"!==p&&void 0!==p||(p=o.set[e].title),h=""!=u?"krautgrid-external":""!=c||""!=d?"krautgrid-lightbox":"krautgrid-nolink",o.items[e]=""!=l?(n=t('<div class="krautgrid-item '+h+'" data-thumbnail="'+d+'" data-groups="All,'+l+'" data-showing="true"></div>').insertAfter(o.set[e]).append(o.set[e])).get(0):(n=t('<div class="krautgrid-item '+h+'" data-thumbnail="'+d+'" data-groups="All,NoGroups" data-showing="true"></div>').insertAfter(o.set[e]).append(o.set[e])).get(0),o.opts.captions&&(p+"").length?n.append('<div class="krautgrid-caption"></div><div class="krautgrid-caption-text '+(o.opts.titles?"krautgrid-caption-text-always":"")+'">'+p+"</div>").on("click",a.triggerClick):n.append('<div class="krautgrid-caption"></div>').on("click",a.triggerClick),r++==o.set.length-1&&(o.opts.preloader&&jQuery("#ts-krautlightbox-grid-preloader-"+o.opts.random).css({position:"absolute"}).fadeOut(750),a.renderGrid(o))}(e,this.width,this.height),n.style.display="block"},l.src=this.src,n.style.display="none"}),o.opts.linkGrid&&i.length>0&&o.opts.filter){i.sort();var l=t('<div id="kraut-lb-toggle-'+n+'" class="kraut-lb-toggle '+o.opts.textToggleStyle+'" data-grid="kraut-lb-grid-'+n+'" data-filter="kraut-lb-filter-'+n+'" data-showall="kraut-lb-showall-'+n+'" data-random="'+n+'">'+o.opts.textToggle+"</div>").insertBefore(o.opts.target),u=t('<div id="kraut-lb-showall-'+n+'" class="kraut-lb-showall '+o.opts.textShowAllStyle+'" data-grid="kraut-lb-grid-'+n+'" data-filter="kraut-lb-filter-'+n+'" data-random="'+n+'">'+o.opts.textShowAll+"</div>").insertBefore(o.opts.target),c=t('<select id="kraut-lb-filter-'+n+'" class="kraut-lb-filter" data-grid="kraut-lb-grid-'+n+'" data-toggle="kraut-lb-toggle-'+n+'" data-showall="kraut-lb-showall-'+n+'" data-random="'+n+'" multiple="multiple"></select>').insertBefore(o.opts.target);i.forEach(function(e){t('<option value="'+e+'">'+e+"</option>").appendTo(c)}),s>0&&t('<option value="NoGroups">'+o.opts.textNoGroups+"</option>").appendTo(c)}if(o.opts.filter&&""!=o.opts.selector){var h=t("#"+o.opts.selector);void 0!==jQuery.fn.multiSelect&&h.multiSelect({selectableHeader:"<div class='ms-header-selectable'>"+o.opts.textAvailable+"</div>",selectionHeader:"<div class='ms-header-selection'>"+o.opts.textSelected+"</div>",afterSelect:function(t){},afterDeselect:function(t){}}),h.on("change",function(e){a.filterGrid(o,t.trim(h.val())),""!=h.val()&&null!=h.val()?u.show():u.hide()});var l=t("#"+o.opts.toggle),u=t("#"+o.opts.showall);(c=t("#ms-"+o.opts.selector)).slideToggle(),u.hide(),l.on("click",function(t){c.slideToggle()}),u.on("click",function(t){h.multiSelect("deselect_all")})}}},r={init:function(e){var o=this;if(!this.length){var r,i=arguments,s=e,n=[];e=t.extend({},t.fn.krautgrid.defaults,2==i.length?i[1]:{});for(var l=0;l<s.length;l++)(r=new Image).src=s[l],n.push(r);o=this.add(n).appendTo(e.target)}return a.loadTiles.call(new a.grid(o,t.extend({},t.fn.krautgrid.defaults,e||{}))),o}};t.fn.krautgrid=function(t){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):r.init.apply(this,arguments)},t.fn.krautgrid.defaults={margin:4,grid:[240,480,720,960,1240],captions:!1,order:!1,target:!1,linkGrid:!1,random:"",preloader:!1,filter:!1,titles:!1,selector:"",toggle:"",showall:"",textAvailable:"Available Groups",textSelected:"Filtered Groups",textNoGroups:"No Groups",textToggle:"Toggle Filter",textToggleStyle:"",textShowAll:"Show All",textShowAllStyle:""}}(jQuery,window),function(t,e,o,a){var r=t.fn.krautlightbox("access").css3,i=function(){var e=" -webkit- -moz- -o- -ms- ".split(" ");try{return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)||function(t){return window.matchMedia(t).matches}(["(",e.join("touch-enabled),("),"heartz",")"].join(""))}catch(e){var o=t('<div id="kraut-lb-touch-device"></div>');return _.b.append(o),o.position().top<0&&(o.remove(),!0)}}();t.fn.krautlightbox("access","pinch",function(e,o){var s;return t(this).each(function(n,l){var u;(l=t(l)).data("kraut-pinchzoom",u=new function(e,o,s){function n(){v.cwidth=v.container.width(),v.cheight=v.container.height()}function l(t){return t=t===a?1:t,{e:[t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1]}}function u(t){return t.e.join(", ")}function c(t){var e=v.width*t-v.cwidth,o=v.height*t-v.cheight;z=-Math.abs(e<0?0:e),$=-Math.abs(o<0?0:o)}var h,d,p,g=1,f=0,m=0,b=!1,v=this,w="kraut-lb-zoom-container-"+function(t,e){e=e||"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var o="",a=0;a<t;a++){var r=Math.floor(Math.random()*e.length);o+=e.substring(r,r+1)}return o}(10);this._el=r(e),this.$el=e.css({display:"block"}),this.container=p=t('<div id="'+w+'"></div>').insertAfter(e).append(e),this.width=e.get(0).width||e.width(),this.height=e.get(0).height||e.height(),this.scale=1,this.centerX=.5,this.centerY=.5,this.translateX=0,this.translateY=0,this.transform=v.transform=l(),this._el.transformOrigin("0 0"),this.container.css({width:o||this.width,height:s||this.height,overflow:i?"hidden":"auto"});var y,k,_,x,S,C,T,j,f=0,m=0,L=0,z=0,$=0,V=0,Q=0,I=0,M=!1,E=!1;n(),this.transformStart=function(t){E&&(E=!1,v.dragEnd(t)),n(),M=!0,1==$TS_VCSC_Hammer_ReleaseNew?(y=t.center.x,k=t.center.y):(y=t.gesture.center.pageX,k=t.gesture.center.pageY),_=p.scrollLeft(),x=p.scrollTop(),S=p.offset(),C=S.left,T=S.top,v.centerX=h=(y-C-f-Q)/v.width/v.scale,h=h<0?0:h>1?1:h,v.centerY=d=(k-T-m-I)/v.height/v.scale,d=d<0?0:d>1?1:d},this.transformStart2=function(t){E&&(E=!1,v.dragEnd(t)),n(),M=!0,y=t.center.x,k=t.center.y,_=p.scrollLeft(),x=p.scrollTop(),S=p.offset(),C=S.left,T=S.top,v.centerX=h=(y-C-f-Q)/v.width/v.scale,h=h<0?0:h>1?1:h,v.centerY=d=(k-T-m-I)/v.height/v.scale,d=d<0?0:d>1?1:d},this.drag=function(t){if(!M){1==$TS_VCSC_Hammer_ReleaseNew?(Q=t.deltaX+f+L,I=t.deltaY+m+V):(b=t.gesture,Q=b.deltaX+f+L,I=b.deltaY+m+V),c(g);var e=l(g);e.e[12]=Q=Q<0?Q>z?Q:z:0,e.e[13]=I=I<0?I>$?I:$:0,v._el.transform("matrix3d",u(j=e))}},this.drag2=function(t){if(!M){Q=t.deltaX+f+L,I=t.deltaY+m+V,c(g);var e=l(g);e.e[12]=Q=Q<0?Q>z?Q:z:0,e.e[13]=I=I<0?I>$?I:$:0,v._el.transform("matrix3d",u(j=e))}},this.pinch=function(t){M=!0,b=1==$TS_VCSC_Hammer_ReleaseNew?t:t.gesture,(g=v.scale*b.scale)<1&&(g=1),g>5&&(g=5),c(g),L=(v.scale-g)*v.width*v.centerX+f+Q,V=(v.scale-g)*v.height*v.centerY+m+Q;var e=l(g);e.e[12]=L=L<0?L>z?L:z:0,e.e[13]=V=V<0?V>$?V:$:0,v._el.transform("matrix3d",u(j=e))},this.pinch2=function(t){M=!0,(g=v.scale*t.scale)<1&&(g=1),g>5&&(g=5),c(g),L=(v.scale-g)*v.width*v.centerX+f+Q,V=(v.scale-g)*v.height*v.centerY+m+Q;var e=l(g);e.e[12]=L=L<0?L>z?L:z:0,e.e[13]=V=V<0?V>$?V:$:0,v._el.transform("matrix3d",u(j=e))},this.transformEnd=function(t){v.scale=g,v.transform=j,M=!0,f=L,m=V,Q=I=L=V=0},this.transformEnd2=function(t){v.scale=g,v.transform=j,M=!0,f=L,m=V,Q=I=L=V=0},this.dragEnd=function(t){E=!1,M?M=!1:(v.transform=j,f=Q,m=I,L=V=Q=I=0)},this.dragEnd2=function(t){E=!1,M?M=!1:(v.transform=j,f=Q,m=I,L=V=Q=I=0)},this.dragStart=function(t){n(),M||(M=!1,E=!0)},this.dragStart2=function(t){n(),M||(M=!1,E=!0)},this.getCenter=function(t){var e=t.length;if(1===e)return{x:Math.round(t[0].end.x-t[0].start.x),y:Math.round(t[0].end.y-t[0].start.y)};for(var o=0,a=0,r=0;r<e;)o+=t[0].end.x-t[0].start.x,a+=t[0].end.y-t[0].start.y,r++;return{x:Math.round(o/e),y:Math.round(a/e)}},i&&(1==$TS_VCSC_Hammer_ReleaseNew?(this._container=new Hammer.Manager(p.get(0),{recognizers:[[Hammer.Press,{enable:!1}],[Hammer.Rotate,{enable:!1}],[Hammer.Tap,{enable:!1}],[Hammer.Swipe,{enable:!1}],[Hammer.Pan,{enable:!0}],[Hammer.Pinch,{enable:!0}]]}),this._container.on("pinchstart",this.transformStart).on("pinch",this.pinch).on("pinchend",this.transformEnd).on("panstart",this.dragStart).on("pan",this.drag).on("panend",this.dragEnd)):(this._container=p.hammer({prevent_default:!0}),this._container.on("transformstart",this.transformStart).on("transform",this.pinch).on("transformend",this.transformEnd).on("dragstart",this.dragStart).on("drag",this.drag).on("dragend",this.dragEnd)))}(l,e,o)),s===a?s=t(u.container):s.add(u.container)}),s})}(jQuery,window,document),function(){"use strict";var t="undefined"!=typeof window&&void 0!==window.document?window.document:{},e="undefined"!=typeof module&&module.exports,o="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,a=function(){for(var e,o=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=0,r=o.length,i={};a<r;a++)if((e=o[a])&&e[1]in t){for(a=0;a<e.length;a++)i[o[0][a]]=e[a];return i}return!1}(),r={change:a.fullscreenchange,error:a.fullscreenerror},i={request:function(e){return new Promise(function(r){var i=a.requestFullscreen,s=function(){this.off("change",s),r()}.bind(this);e=e||t.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[i]():e[i](o?Element.ALLOW_KEYBOARD_INPUT:{}),this.on("change",s)}.bind(this))},exit:function(){return new Promise(function(e){if(this.isFullscreen){var o=function(){this.off("change",o),e()}.bind(this);t[a.exitFullscreen](),this.on("change",o)}else e()}.bind(this))},toggle:function(t){return this.isFullscreen?this.exit():this.request(t)},onchange:function(t){this.on("change",t)},onerror:function(t){this.on("error",t)},on:function(e,o){var a=r[e];a&&t.addEventListener(a,o,!1)},off:function(e,o){var a=r[e];a&&t.removeEventListener(a,o,!1)},raw:a};a?(Object.defineProperties(i,{isFullscreen:{get:function(){return Boolean(t[a.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[a.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(t[a.fullscreenEnabled])}}}),e?(module.exports=i,module.exports.default=i):window.screenfull=i):e?module.exports=!1:window.screenfull=!1}();