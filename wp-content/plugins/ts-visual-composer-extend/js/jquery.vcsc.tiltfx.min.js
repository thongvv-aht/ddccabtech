!function(t){"use strict";function e(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function i(t,e,i){for(var o=e.split(" "),r=0,n=o.length;n>r;r++)t.addEventListener(o[r],i,!1)}function o(e){if(!e)var e=t.event;var i=0,o=0;if("touchmove"==e.type)var r=e.changedTouches[0];else if("mousemove"==e.type)var r=e;return r.pageX||r.pageY?(i=r.pageX,o=r.pageY):(r.clientX||r.clientY)&&(i=r.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=r.clientY+document.body.scrollTop+document.documentElement.scrollTop),{x:i,y:o}}function r(t,e){return t.classList?t.classList.contains(e):!!t.className.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}function n(t,e){t.classList?t.classList.add(e):r(t,e)||(t.className+=" "+e)}function s(t,e){if(t.classList)t.classList.remove(e);else if(r(t,e)){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}}function a(t,e){return Math.floor(Math.random()*(e-t+1))+t}function l(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function p(){return self.innerWidth?self.innerWidth:document.documentElement&&document.documentElement.clientHeight?document.documentElement.clientWidth:document.body?document.body.clientWidth:0}function m(){return t.innerWidth||document.documentElement.clientWidth||document.body.clientWidth||0}function c(){return t.innerHeight||document.documentElement.clientHeight||document.body.clientHeight||0}function d(e,i){i>1?i/=100:1==i&&(i=.01);var o=e.getBoundingClientRect().top,r=e.getBoundingClientRect().bottom,n=e.getBoundingClientRect().height,s=n*(1-i),a=o>=-s&&r<=t.innerHeight+s;return a}function g(t,i){this.el=t,this.options=e({},this.options),e(this.options,i),this._init(),"mousetouch"==this.options.triggerEvent?this._initEventsMouseTouch():"scroll"==this.options.triggerEvent&&this._initEventsScroll()}function u(){var t="",e="",i="",o="",r="",n="",s="",l="",p="",m="",c="",d="",u={};[].slice.call(document.querySelectorAll("img.ts-image-tiltfx-applyeffect")).forEach(function(h){e=h.getAttribute("data-randomizer"),(""==e||void 0==e||"undefined"==e||null==e)&&(e=a(999999,9999999)),t=h.getAttribute("data-trigger"),i=parseInt(h.getAttribute("data-extraimgs")),o=parseInt(h.getAttribute("data-opacity"))/100,r="true"==h.getAttribute("data-bgfixed")?!0:!1,n=parseInt(h.getAttribute("data-perspective")),s=parseInt(h.getAttribute("data-translatex")),l=parseInt(h.getAttribute("data-translatey")),p=parseInt(h.getAttribute("data-translatez")),m=parseInt(h.getAttribute("data-rotatex")),c=parseInt(h.getAttribute("data-rotatey")),d=parseInt(h.getAttribute("data-rotatez")),u={randomID:e,triggerEvent:t,extraImgs:i,opacity:o,bgfixed:r,movement:{perspective:n,translateX:s,translateY:l,translateZ:p,rotateX:m,rotateY:c,rotateZ:d}},new g(h,u)})}for(var h,f=0,v="webkit moz ms o".split(" "),x=t.requestAnimationFrame,I=t.cancelAnimationFrame,y=0;y<v.length&&(!x||!I);y++)h=v[y],x=x||t[h+"RequestAnimationFrame"],I=I||t[h+"CancelAnimationFrame"]||t[h+"CancelRequestAnimationFrame"];x&&I||(x=function(e){var i=(new Date).getTime(),o=Math.max(0,16-(i-f)),r=t.setTimeout(function(){e(i+o)},o);return f=i+o,r},I=function(e){t.clearTimeout(e)}),g.prototype.options={randomID:a(999999,9999999),triggerEvent:"mousetouch",extraImgs:2,opacity:.7,bgfixed:!0,movement:{perspective:1e3,translateX:-10,translateY:-10,translateZ:20,rotateX:2,rotateY:2,rotateZ:0}},g.prototype._init=function(){this.tiltWrapper=document.createElement("div"),this.tiltWrapper.id="ts-image-tiltfx-tiltimage-"+this.options.randomID,this.tiltWrapper.className="ts-image-tiltfx-tiltimage",this.tiltImgBack=document.createElement("div"),this.tiltImgBack.id="ts-image-tiltfx-tiltback-"+this.options.randomID,this.tiltImgBack.className="ts-image-tiltfx-tiltback",this.tiltImgBack.style.backgroundImage="url("+this.el.src+")",this.tiltWrapper.appendChild(this.tiltImgBack),this.options.extraImgs<1?this.options.extraImgs=1:this.options.extraImgs>5&&(this.options.extraImgs=5),this.options.movement.perspective||(this.options.movement.perspective=0),this.imgElems=[];for(var t=0;t<this.options.extraImgs;++t){var e=document.createElement("div");e.id="ts-image-tiltfx-tiltfront-"+this.options.randomID+"-"+t,e.className="ts-image-tiltfx-tiltfront",e.style.backgroundImage="url("+this.el.src+")",e.style.opacity=this.options.opacity,this.tiltWrapper.appendChild(e),this.imgElems.push(e)}this.options.bgfixed||(this.imgElems.push(this.tiltImgBack),++this.options.extraImgs),this.el.parentNode.insertBefore(this.tiltWrapper,this.el),this.el.parentNode.removeChild(this.el),this.view={width:this.tiltWrapper.offsetWidth,height:this.tiltWrapper.offsetHeight}},g.prototype._initEventsMouseTouch=function(){var e=this,r=e.options.movement,a=null;i(this.tiltWrapper,"mousemove touchmove",function(t){a=t.type,("mousemove"==a||"touchmove"==a)&&x(function(){for(var i=o(t),n={left:document.body.scrollLeft+document.documentElement.scrollLeft,top:document.body.scrollTop+document.documentElement.scrollTop},s=e.tiltWrapper.getBoundingClientRect(),a={x:i.x-s.left-n.left,y:i.y-s.top-n.top},l=0,p=e.imgElems.length;p>l;++l){var m=e.imgElems[l],c=r.rotateX?2*((l+1)*r.rotateX/e.options.extraImgs)/e.view.height*a.y-(l+1)*r.rotateX/e.options.extraImgs:0,d=r.rotateY?2*((l+1)*r.rotateY/e.options.extraImgs)/e.view.width*a.x-(l+1)*r.rotateY/e.options.extraImgs:0,g=r.rotateZ?2*((l+1)*r.rotateZ/e.options.extraImgs)/e.view.width*a.x-(l+1)*r.rotateZ/e.options.extraImgs:0,u=r.translateX?2*((l+1)*r.translateX/e.options.extraImgs)/e.view.width*a.x-(l+1)*r.translateX/e.options.extraImgs:0,h=r.translateY?2*((l+1)*r.translateY/e.options.extraImgs)/e.view.height*a.y-(l+1)*r.translateY/e.options.extraImgs:0,f=r.translateZ?2*((l+1)*r.translateZ/e.options.extraImgs)/e.view.height*a.y-(l+1)*r.translateZ/e.options.extraImgs:0;m.style.WebkitTransform="perspective("+r.perspective+"px) translate3d("+u+"px,"+h+"px,"+f+"px) rotate3d(1,0,0,"+c+"deg) rotate3d(0,1,0,"+d+"deg) rotate3d(0,0,1,"+g+"deg)",m.style.transform="perspective("+r.perspective+"px) translate3d("+u+"px,"+h+"px,"+f+"px) rotate3d(1,0,0,"+c+"deg) rotate3d(0,1,0,"+d+"deg) rotate3d(0,0,1,"+g+"deg)"}})}),i(this.tiltWrapper,"mouseleave touchend",function(t){n(t.target,"ts-image-tiltfx-effectstop"),setTimeout(function(){for(var t=0,i=e.imgElems.length;i>t;++t){var o=e.imgElems[t];o.style.WebkitTransform="perspective("+r.perspective+"px) translate3d(0,0,0) rotate3d(1, 1, 1, 0deg)",o.style.transform="perspective("+r.perspective+"px) translate3d(0,0,0) rotate3d(1, 1, 1, 0deg)"}},60),setTimeout(function(){s(t.target,"ts-image-tiltfx-effectstop")},250)}),jQuery(t).on("debouncedresize",function(){e.view={width:e.tiltWrapper.offsetWidth,height:e.tiltWrapper.offsetHeight}})},g.prototype._initEventsScroll=function(){var e=this,o=e.options.movement,r=null,a=0,g=0,u=[],h="down",f=e.tiltWrapper.offsetHeight,v=e.tiltWrapper.offsetWidth,I=v/f,y=(p(),m(),l(),c()),b=y-f;i(t,"scroll",function(t){r=t.type,f=e.tiltWrapper.offsetHeight,v=e.tiltWrapper.offsetWidth,I=v/f,y=c(),b=y-f,g=document.body.scrollTop,d(e.tiltWrapper,10)?(h=a>g?"up":"down",x(function(){u=e.tiltWrapper.getBoundingClientRect();var t=y-f-u.top;0>t?t=0:t>f&&(t=f-(t-f));for(var i=t*I,r={x:i,y:t},n=0,s=e.imgElems.length;s>n;++n){var a=e.imgElems[n],l=o.rotateX?2*((n+1)*o.rotateX/e.options.extraImgs)/e.view.height*r.y-(n+1)*o.rotateX/e.options.extraImgs:0,p=o.rotateY?2*((n+1)*o.rotateY/e.options.extraImgs)/e.view.width*r.x-(n+1)*o.rotateY/e.options.extraImgs:0,m=o.rotateZ?2*((n+1)*o.rotateZ/e.options.extraImgs)/e.view.width*r.x-(n+1)*o.rotateZ/e.options.extraImgs:0,c=o.translateX?2*((n+1)*o.translateX/e.options.extraImgs)/e.view.width*r.x-(n+1)*o.translateX/e.options.extraImgs:0,d=o.translateY?2*((n+1)*o.translateY/e.options.extraImgs)/e.view.height*r.y-(n+1)*o.translateY/e.options.extraImgs:0,g=o.translateZ?2*((n+1)*o.translateZ/e.options.extraImgs)/e.view.height*r.y-(n+1)*o.translateZ/e.options.extraImgs:0;a.style.WebkitTransform="perspective("+o.perspective+"px) translate3d("+c+"px,"+d+"px,"+g+"px) rotate3d(1,0,0,"+l+"deg) rotate3d(0,1,0,"+p+"deg) rotate3d(0,0,1,"+m+"deg)",a.style.transform="perspective("+o.perspective+"px) translate3d("+c+"px,"+d+"px,"+g+"px) rotate3d(1,0,0,"+l+"deg) rotate3d(0,1,0,"+p+"deg) rotate3d(0,0,1,"+m+"deg)"}})):(n(e.tiltWrapper,"ts-image-tiltfx-effectstop"),setTimeout(function(){for(var t=0,i=e.imgElems.length;i>t;++t){var r=e.imgElems[t];r.style.WebkitTransform="perspective("+o.perspective+"px) translate3d(0,0,0) rotate3d(1, 1, 1, 0deg)",r.style.transform="perspective("+o.perspective+"px) translate3d(0,0,0) rotate3d(1, 1, 1, 0deg)"}},60),setTimeout(function(){s(e.tiltWrapper,"ts-image-tiltfx-effectstop")},250)),a=g})},u(),t.TS_VCSC_3DTiltFX=g}(window);