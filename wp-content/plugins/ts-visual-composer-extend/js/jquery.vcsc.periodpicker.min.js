!function(e,t,i){"use strict";function o(t,i,r){var s,n=r||new Date;return n.isTW=!0,n.weekdays=function(e){var t,i,o=moment.weekdaysShort();for(t=o.splice(1),t[6]=o[0],o=t,t=o.splice(e-1),i=0;e-1>i;i+=1)t.push(o[i]);return t},n.clone=function(e,t,i,r,s,a){var p=new o;return p.setFullYear(e||n.getFullYear()),p.setMonth(t||n.getMonth()),p.setDate(i||n.getDate()),p.setHours(r||n.getHours()),p.setMinutes(s||n.getMinutes()),p.setSeconds(a||n.getSeconds()),p},n.inRange=function(e,t){return moment(e).isBetween(t[0],t[1],"day")||moment(e).isSame(t[0],"day")||moment(e).isSame(t[1],"day")},n.isValid=function(){return"[object Date]"!==Object.prototype.toString.call(n)?!1:!isNaN(n.getTime())},n.parseStr=function(t,i){var r="string"===e.type(t)?moment(t,i):t;return r&&r.isValid()?n=r.isTW?r:new o(0,0,r.toDate()):null},n.isEqualDate=function(e,t){return e&&e.isValid()&&t&&t.isValid()?e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getMonth()===t.getMonth():!1},n.format=function(e){return s=moment(n).format(e),new RegExp("^[0-9]+$").test(s)?parseInt(s,10):s},n.countDaysInMonth=function(){return new Date(n.getFullYear(),n.getMonth()+1,0).getDate()},t&&i&&n.parseStr(t,i),n}function r(t,i){var r,n=this;n.options=i,n.picker=e('<div unselectable="on" class="period_picker_box xdsoft_noselect '+(i.fullsize?"period_picker_maximize":"")+'" style="">'+(i.resizeButton?'<div class="period_picker_resizer"></div>':"")+'<div class="period_picker_head">'+(i.title?'<span class="period_picker_head_title">'+this.i18n(i.norange?"Select date":"Select period")+"</span>":"")+(i.fullsizeButton?'<span class="period_picker_max_min" title="'+this.i18n("Open fullscreen")+'"></span>':"")+(i.closeButton?'<span class="period_picker_close" title="'+this.i18n("Close")+'"></span>':"")+"</div>"+(i.yearsLine?'<div class="period_picker_years"><div class="period_picker_years_inner"><div class="period_picker_years_selector"><div class="period_picker_years_selector_container" style="width: 5960px; left: 0px;"></div></div></div></div>':"")+'<div class="period_picker_work">'+(n.options.navigate?'<a href="" class="xdsoft_navigate xdsoft_navigate_prev"></a>':"")+(n.options.timepicker&&void 0!==e.fn.TimePicker?'<div class="period_picker_timepicker_box"><input data-index="0" class="timepicker" type="hidden"></div>':"")+'<div class="period_picker_days"><table><tbody></tbody></table></div>'+(n.options.timepicker&&void 0!==e.fn.TimePicker&&!n.options.norange?'<div class="period_picker_timepicker_box"><input  data-index="1"  class="timepicker" type="hidden"></div>':"")+(n.options.navigate?'<a href="" class="xdsoft_navigate xdsoft_navigate_next"></a>':"")+'</div><div class="period_picker_submit_shadow"></div><div class="period_picker_submit_dates">'+(n.options.timepicker&&void 0!==e.fn.TimePicker?'<span class="period_picker_from_time_block period_picker_time"><span class="input_box"><input data-index="0"  class="input_control period_picker_from_time"></span></span>':"")+'<span class="period_picker_from_block period_picker_date"><span class="input_box"><input class="input_control period_picker_from" maxlength="10"></span></span><span>&#8212;</span><span class="period_picker_to_block period_picker_date"><span class="input_box"><input class="input_control period_picker_to" maxlength="10"></span></span>'+(n.options.timepicker&&void 0!==e.fn.TimePicker&&!n.options.norange?'<span class="period_picker_to_time_block period_picker_time"><span class="input_box"><input data-index="1" class="input_control period_picker_to_time"></span></span>':"")+(i.okButton?'<button class="period_picker_show " role="button" type="button"><span class="button_text">'+this.i18n("OK")+"</span></button>":"")+"</div></div>"),n.options.timepicker&&void 0!==e.fn.TimePicker&&n.picker.addClass("with_first_timepicker"),n.options.timepicker&&void 0!==e.fn.TimePicker&&!n.options.norange&&n.picker.addClass("with_second_timepicker"),i.animation&&n.picker.addClass("animation"),i.norange&&n.picker.addClass("xdsoft_norange"),n.pickerdays=n.picker.find(".period_picker_days"),n.calendarbox=n.pickerdays.find("> table > tbody"),n.yearsline=n.picker.find(".period_picker_years_selector_container"),n.yearslineparent=n.picker.find(".period_picker_years_selector"),n.timepicker=n.picker.find(".period_picker_timepicker_box"),n.button=e('<button class="period_picker_input" type="button"><span class="period_button_text"><span class="period_button_content_wrapper"><span class="period_button_content"><span class="icon_calendar"></span><span>'+this.i18n(i.norange?"Choose date":"Choose period")+"</span></span></span></span></button>"),n.startinput=e(i.start?i.start:t),n.endinput=e(i.end),n.periodtime=[[]],n.period=[[]],n.director=0,r=new o,n.addRange(n.options.timepicker?[r.parseStr(n.startinput.val(),n.options.formatDateTime),r.parseStr(n.endinput.val(),n.options.formatDateTime)]:[r.parseStr(n.startinput.val(),n.options.formatDate),r.parseStr(n.endinput.val(),n.options.formatDate)]),n.uniqueid=s,n.month=n.period.length?n.period[0].getMonth()+1:i.startMonth,n.year=n.period.length?n.period[0].getFullYear():i.startYear,n.onAfterShow=[],n.onAfterHide=[],n.onAfterRegenerate=[],void 0!==n.options.onAfterShow&&e.isFunction(n.options.onAfterShow)&&n.onAfterShow.push(n.options.onAfterShow),void 0!==n.options.onAfterHide&&e.isFunction(n.options.onAfterHide)&&n.onAfterHide.push(n.options.onAfterHide),void 0!==n.options.onAfterRegenerate&&e.isFunction(n.options.onAfterRegenerate)&&n.onAfterRegenerate.push(n.options.onAfterRegenerate),n.maxdate=i.maxDate?new o(i.maxDate,i.formatDate):!1,n.mindate=i.minDate?new o(i.minDate,i.formatDate):!1,n.monthcount=this.options.cells[0]*this.options.cells[1],n.timer1=0,n.timer2=0,n.timer3=0,s+=1,n.init(),n.addRangeTime(n.period[0],n.period[1])}var s=0;r.prototype.returnPeriod=function(){this.picker.find("input.period_picker_from").val(void 0!==this.period?this.period:""),this.picker.find("input.period_picker_to").val(void 0!==this.period[1]?this.period[1]:this.picker.find("input.period_picker_from").val())},r.prototype.moveTimeToDate=function(){this.options.timepicker&&this.periodtime.length&&this.periodtime[0].length&&(null!==this.period[0]&&this.period[0].format&&this.periodtime[0][0].format&&(this.period[0].setSeconds(this.periodtime[0][0].getSeconds()),this.period[0].setMinutes(this.periodtime[0][0].getMinutes()),this.period[0].setHours(this.periodtime[0][0].getHours())),null!==this.periodtime[0][1]&&null!==this.period[1]&&this.period[1].format&&this.periodtime[0][1].format&&(this.period[1].setSeconds(this.periodtime[0][1].getSeconds()),this.period[1].setMinutes(this.periodtime[0][1].getMinutes()),this.period[1].setHours(this.periodtime[0][1].getHours())))},r.prototype.getInputsValue=function(){var e,t=[],i=new o,r=this.timepicker.find("input.timepicker");return i.isEqualDate(this.period[0],this.period[1])?(r.eq(0).TimePicker("setMax",r.eq(1).val()),r.eq(1).TimePicker("setMin",r.eq(0).val())):(r.eq(0).TimePicker("setMax",!1),r.eq(1).TimePicker("setMin",!1)),this.startinput.length&&this.period&&this.period&&this.period.length&&(this.moveTimeToDate(),e=this.options.timepicker?this.options.formatDateTime:this.options.formatDate,this.period[0]&&this.period[0].format&&t.push(this.period[0].format(e)),this.endinput.length&&this.period[1]&&this.period[1].format&&t.push(this.period[1].format(e))),t},r.prototype.setInputsValue=function(){var e=this.getInputsValue();e.length&&(e[0]&&this.startinput.val(e[0]).trigger("change"),e[1]&&this.endinput.val(e[1]).trigger("change"))},r.prototype.getLabel=function(){var e,t=[];return this.period.length&&(this.moveTimeToDate(),e=this.options.timepicker?[this.options.formatDecoreDateTimeWithYear||this.options.formatDecoreDateTime||this.options.formatDateTime,this.options.formatDecoreDateTimeWithoutMonth||this.options.formatDecoreDateTime||this.options.formatDateTime,this.options.formatDecoreDateTime||this.options.formatDateTime,this.options.formatDateTime]:[this.options.formatDecoreDateWithYear||this.options.formatDecoreDate||this.options.formatDate,this.options.formatDecoreDateWithoutMonth||this.options.formatDecoreDate||this.options.formatDate,this.options.formatDecoreDate||this.options.formatDate,this.options.formatDate],void 0!==this.period[1]&&this.period[1]&&void 0!==this.period[1].format&&this.period[1].format&&this.period[0].format(e[3])!==this.period[1].format(e[3])?(t.push(this.period[0].format(this.period[0].format("YYYY")!==this.period[1].format("YYYY")?e[0]:this.period[0].format("M")!==this.period[1].format("M")?e[2]:e[1])),t.push(this.period[1].format(e[0]))):t.push(this.period[0].format(e[0]))),t},r.prototype.setLabel=function(){var e=this.getLabel();this.button.find(".period_button_content").html(e.length?1===e.length?'<span class="icon_calendar"></span><span>'+e[0]+"</span>":'<span class="icon_calendar"></span><span>'+e[0]+'</span><span class="period_button_dash">&#8212;</span><span>'+e[1]+"</span>":'<span class="icon_calendar"></span><span><span>'+this.i18n(this.options.norange?"Choose date":"Choose period")+"</span>")},r.prototype.highlightPeriod=function(){var t=this;clearTimeout(t.timer1),t.timer1=setTimeout(function(){var i=new o;t.picker.find(".period_picker_cell.period_picker_selected").removeClass("period_picker_selected"),t.period.length&&(moment.locale(t.options.lang),t.picker.find(".period_picker_cell").each(function(){var o=i.parseStr(e(this).data("date"),t.options.formatDate);i.inRange(o,t.period)&&e(this).addClass("period_picker_selected")}),t.picker.find(".period_picker_years_period").css({width:Math.floor(t.options.yearSizeInPixels/365*moment(t.period[1]).diff(t.period[0],"day"))+"px",left:Math.floor(t.options.yearSizeInPixels/365*-moment([t.options.yearsPeriod[0],0,1]).diff(t.period[0],"day"))}),t.picker.find("input.period_picker_from:not(:focus)").val(void 0!==t.period[0]&&t.period[0]?t.period[0].format(t.options.formatDate):""),t.picker.find("input.period_picker_to:not(:focus)").val(void 0!==t.period[1]&&t.period[1]?t.period[1].format(t.options.formatDate):t.picker.find("input.period_picker_from").val()),t.picker.find("input.period_picker_from:not(:focus),input.period_picker_to:not(:focus)").trigger("change"),t.setLabel(),t.setInputsValue())},50)},r.prototype.addRangeTime=function(t,i){var r=new o;this.periodtime[0][0]=r.parseStr(t,this.options.timepickerOptions.inputFormat),this.options.norange?this.periodtime[0][1]=this.periodtime[0][0]:(this.periodtime[0][1]=r.parseStr(i,this.options.timepickerOptions.inputFormat),null===this.periodtime[0][0]&&this.periodtime[0][1]&&(this.periodtime[0][0]=this.periodtime[0][1])),null===this.periodtime[0][0]&&(this.periodtime[0]=[]),this.setLabel(),this.setInputsValue(),this.periodtime.length&&this.periodtime[0].length&&e.fn.TimePicker&&(this.periodtime[0][0]&&this.timepicker.find("input.timepicker").eq(0).TimePicker("setValue",this.periodtime[0][0]),this.periodtime[0][1]&&!this.options.norange&&this.timepicker.find("input.timepicker").eq(1).TimePicker("setValue",this.periodtime[0][1]))},r.prototype.addRange=function(t){var i,r=new o;if(this.options.norange&&(this.director=0),e.isArray(t))this.period=[r.parseStr(t[0],this.options.formatDate),r.parseStr(t[1],this.options.formatDate)],null===this.period[0]&&(this.period=[]),this.director=0;else{if(void 0===this.period&&(this.period=[]),this.period[this.options.norange?0:this.director]=r.parseStr(t,this.options.formatDate),null===this.period[this.director])return this.period=[],void this.highlightPeriod();this.director||(this.period[1]=this.period[this.director].clone()),this.period[0]>this.period[1]&&(i=this.period[0],this.period[0]=this.period[1],this.period[1]=i),this.director=this.director?0:1}this.options.norange&&this.period[0]&&this.period[1]&&this.period[1]!==this.period[0]&&(this.period[1]=this.period[0].clone()),this.highlightPeriod(),this.options.hideAfterSelect&&this.period[0]&&this.period[1]&&this.period[0]!==this.period[1]&&this.hide()},r.prototype.recalcDraggerPosition=function(){var e=this;clearTimeout(this.timer2),this.timer2=setTimeout(function(){var t=Math.abs(parseInt(e.yearsline.css("left"),10)),i=e.picker.find(".period_picker_years_dragger"),o=parseInt(i.css("left"),10);t>o?e.yearsline.css("left",-o+"px"):o+i.width()>t+e.yearslineparent.width()&&e.yearsline.css("left",-(o+i.width()-e.yearslineparent.width())+"px")},100)},r.prototype.getRealDateTime=function(){var e=new Date;return e.setFullYear(this.year),e.setMonth(this.month-1),e.setDate(1),[e.getMonth(),e.getFullYear()]},r.prototype.regenerate=function(){if(this.picker.is(":visible")){var e,t=this,i=parseInt(t.pickerdays.width(),10),o=parseInt(t.pickerdays.parent()[0].offsetHeight,10);for(moment.locale(t.options.lang),this.options.cells=[Math.floor((o-t.options.someYOffset)/t.options.monthHeightInPixels)||1,Math.floor(i/t.options.monthWidthInPixels)||1],this.options.cells[0]<0&&(this.options.cells[0]=1),t.monthcount=this.options.cells[0]*this.options.cells[1],t.generateCalendars(t.month,t.year),t.generateYearsLine(),t.recalcDraggerPosition(),t.highlightPeriod(),e=0;e<this.onAfterRegenerate.length;e+=1)this.onAfterRegenerate[e].call(this)}},r.prototype.init=function(){var r,s,n,a,p,d,c,l,h,u,m,f=this;f.button.on("click",function(){f.toggle()}),f.startinput.after(f.button),r=f.startinput.offset(),f.picker.find(".period_picker_submit_dates input").on("focus",function(){e(this).parent().parent().addClass("input_focused_yes")}).on("blur",function(){e(this).parent().parent().removeClass("input_focused_yes")}),f.picker.find(".period_picker_submit_dates .period_picker_date input").on("keydown",function(){var t=this;clearTimeout(f.timer3),f.timer3=setTimeout(function(){if(e(t).val()){var i=moment(e(t).val(),f.options.formatDate);if(!i.isValid())return void e(t).parent().parent().addClass("period_picker_error");f.addRange([f.picker.find(".period_picker_submit_dates .period_picker_date input").eq(0).val(),f.picker.find(".period_picker_submit_dates .period_picker_date input").eq(1).val()])}e(t).parent().parent().removeClass("period_picker_error")},200)}),f.options.timepicker&&(m=f.picker.find(".period_picker_submit_dates .period_picker_time input").on("keydown change",function(){var t=this;clearTimeout(f.timer4),f.timer4=setTimeout(function(){var i,r=new o;if(e(t).val()){if(i=moment(e(t).val(),f.options.timepickerOptions.inputFormat),!i.isValid())return void e(t).parent().parent().addClass("period_picker_error");if(this.period&&this.period.length&&r.isEqualDate(this.period[0],this.period[1])&&moment(m.eq(0).val(),f.options.timepickerOptions.inputFormat).getDate().getTime()>moment(m.eq(1).val(),f.options.timepickerOptions.inputFormat).getDate().getTime())return void e(t).parent().parent().addClass("period_picker_error");f.addRangeTime(f.picker.find(".period_picker_submit_dates .period_picker_time input").eq(0).val(),f.picker.find(".period_picker_submit_dates .period_picker_time input").eq(1).val())}e(t).parent().parent().removeClass("period_picker_error")},200)})),f.picker.find(".period_picker_max_min").on("click",function(){f.picker.toggleClass("period_picker_maximize"),f.regenerate()}),f.options.fullsizeOnDblClick&&f.picker.find(".period_picker_head").on("dblclick",function(){f.picker.toggleClass("period_picker_maximize"),f.regenerate()}),f.picker.find(".period_picker_close").on("click",function(){f.hide()}),f.options.mousewheel&&f.picker.on("mousewheel",function(e){return f.month+=(f.options.reverseMouseWheel?-1:1)*e.deltaY,f.regenerate(),!1}),f.options.navigate&&f.picker.find(".xdsoft_navigate").on("click",function(){return f.month+=e(this).hasClass("xdsoft_navigate_prev")?-1:1,f.regenerate(),!1}),f.picker.on("click",".period_picker_show",function(){f.hide()}),f.picker.on("click",".period_picker_years_selector .period_picker_year",function(){f.year=parseInt(e(this).text(),10),f.month=-Math.floor(f.monthcount/2)+1,f.regenerate()}),f.picker.on("mousedown",".period_picker_days td td,.period_picker_month",function(){if(e(this).hasClass("period_picker_month"))f.addRange([e(this).data("datestart"),e(this).data("dateend")]);else if(!e(this).hasClass("period_picker_gray_period"))if(e(this).hasClass("period_picker_selector_week")){var t=e(this).parent().find("td.period_picker_cell:not(.period_picker_gray_period):last"),i=e(this).parent().find("td.period_picker_cell:not(.period_picker_gray_period):first");t.length&&f.addRange([i.data("date"),t.data("date")])}else 1!==f.picker.find(".period_picker_selected").length?(f.picker.find(".period_picker_selected").removeClass("period_picker_selected"),e(this).addClass("period_picker_selected")):e(this).addClass("period_picker_selected"),f.addRange(e(this).data("date"))}),f.picker.on("mousedown",".period_picker_years_selector_container",function(t){h=e(this),u=!0,s=[t.clientX,t.clientY,parseInt(h.css("left")||0,10)],t.preventDefault()}),f.picker.on("mousedown",".period_picker_years_dragger",function(t){d=e(this),p=!0,s=[t.clientX,t.clientY,parseInt(d.css("left"),10)],t.stopPropagation(),t.preventDefault()}),f.options.draggable&&f.picker.on("mousedown",".period_picker_head",function(e){l=!0,s=[e.clientX,e.clientY,parseInt(f.picker.css("left"),10),parseInt(f.picker.css("top"),10)],e.preventDefault()}),f.picker.on("mouseup",function(t){a=!1,p=!1,l=!1,u=!1,f.options.timepicker&&e.fn.TimePicker&&f.timepicker.find("input.timepicker").TimePicker("stopDrag"),t.stopPropagation()}),f.picker.find(".period_picker_resizer").on("mousedown",function(e){a=!0,s=[e.clientX,e.clientY,parseInt(f.picker.css("width"),10),parseInt(f.picker.css("height"),10)],e.preventDefault()}),f.picker.css({left:r.left,top:r.top+f.button.height(),width:this.options.cells[1]*f.options.monthWidthInPixels+(f.options.timepicker?87*(f.options.norange?1:2):0)+50,height:this.options.cells[0]*f.options.monthHeightInPixels+f.options.someYOffset}),f.startinput.hide(),f.endinput.hide(),e(i.body).append(f.picker),e(t).on("resize.xdsoft"+f.uniqueid,function(){f.regenerate()}).on("mouseup.xdsoft"+f.uniqueid,function(){a||p||l||u?(a=!1,p=!1,l=!1,u=!1):f.hide()}).on("mousemove.xdsoft"+f.uniqueid,function(e){l&&(n=[e.clientX-s[0],e.clientY-s[1]],f.picker.hasClass("xdsoft_i_moved")||f.picker.addClass("xdsoft_i_moved"),f.picker.css({left:s[2]+n[0],top:s[3]+n[1]})),a&&(n=[e.clientX-s[0],e.clientY-s[1]],f.picker.css({width:s[2]+n[0],height:s[3]+n[1]}),f.regenerate()),p&&(n=[e.clientX-s[0],e.clientY-s[1]],c=s[2]+n[0],d.css("left",c),f.calcMonthOffsetFromPeriodDragger(c),f.generateCalendars(f.month,f.year),f.recalcDraggerPosition()),u&&(n=[e.clientX-s[0],e.clientY-s[1]],c=s[2]+n[0],h.css("left",c))}),f.generateTimepicker()},r.prototype.generateTimepicker=function(){var t=this;t.options.timepicker&&void 0!==e.fn.TimePicker&&!t.timepickerAlreadyGenerated&&(t.timepicker.each(function(){var i=e(this).find("input.timepicker"),o=parseInt(i.data("index")||0,10);i.length&&!i.data("timepicker")&&void 0!==e.fn.TimePicker&&(i.TimePicker(t.options.timepickerOptions,e(this)),t.onAfterRegenerate.push(function(){i.TimePicker("regenerate")}),i.on("change",function(){t.picker.find(".period_picker_submit_dates .period_picker_time input").eq(o).val(this.value).trigger("change")}))}),t.timepickerAlreadyGenerated=!0)},r.prototype.generateCalendars=function(e,t){function i(){var e,t=[];for(e=0;e<p.length;e+=1)t.push('<th class="'+(-1!==s.options.weekEnds.indexOf(e+s.options.dayOfWeekStart>7?(e+s.options.dayOfWeekStart)%7:e+s.options.dayOfWeekStart)?"period_picker_holiday":"")+'">'+p[e]+"</th>");return t.join("")}moment.locale(this.options.lang);var r,s=this,n=[],a=s.getRealDateTime(),p=(new o).weekdays(s.options.dayOfWeekStart);for(a[1]>s.options.yearsPeriod[1]&&(s.year=s.options.yearsPeriod[1],t=s.year,s.month=12-s.monthcount,e=s.month),a[1]<s.options.yearsPeriod[0]&&(s.year=s.options.yearsPeriod[0],t=s.year,s.month=1,e=s.month),n.push('<tr class="period_picker_first_letters_tr">'),r=0;r<s.options.cells[1];r+=1)n.push('<td class="period_picker_first_letters_td"><table class="period_picker_first_letters_table"><tbody><tr><th class="period_picker_selector_week_cap"><span class="period_picker_selector_week_cap"></span></th>'+i()+"</tr></tbody></table></td>");for(n.push("</tr>"),r=0;r<s.options.cells[0];r+=1)n.push("<tr>"),n.push(s.generateCalendarLine(e+r*s.options.cells[1],t,s.options.cells[1])),n.push("</tr>");s.calendarbox.html(n.join("")),s.highlightPeriod()},r.prototype.i18n=function(e){return void 0!==this.options.i18n[this.options.lang]&&void 0!==this.options.i18n[this.options.lang][e]?this.options.i18n[this.options.lang][e]:e},r.prototype.calcPixelOffsetForPeriodDragger=function(){var e=this.getRealDateTime();return(e[1]-this.options.yearsPeriod[0])*this.options.yearSizeInPixels+e[0]*Math.floor(this.options.yearSizeInPixels/12)},r.prototype.calcMonthOffsetFromPeriodDragger=function(e){this.year=Math.floor(e/this.options.yearSizeInPixels)+this.options.yearsPeriod[0],this.month=Math.floor(e%this.options.yearSizeInPixels/Math.floor(this.options.yearSizeInPixels/12))+1},r.prototype.generateYearsLine=function(){if(this.options.yearsLine){var t,i=[],o=0;if(i.push('<div class="period_picker_years_dragger" title="'+this.i18n("Move to select the desired period")+'" style="left: '+this.calcPixelOffsetForPeriodDragger()+"px; width: "+Math.floor(this.options.yearSizeInPixels/12)*this.monthcount+'px;"></div>'),i.push('<div class="period_picker_years_period" style="display: block; width: 0px; left: 300px;"></div>'),this.options.yearsPeriod&&e.isArray(this.options.yearsPeriod))for(t=this.options.yearsPeriod[0];t<=this.options.yearsPeriod[1];t+=1)i.push('<div class="period_picker_year" style="left:'+o*this.options.yearSizeInPixels+'px">'+t+"</div>"),o+=1;this.yearsline.css("width",o*this.options.yearSizeInPixels+"px"),this.yearsline.html(i.join(""))}},r.prototype.generateCalendarLine=function(e,t,i){var r,s,n,a,p,d,c=[],l=new o;for(l.setFullYear(t),l.setMonth(e-1),l.setDate(1),r=0;i>r;r+=1){for(p=l.getMonth()+1,a=l.countDaysInMonth(),c.push('<td class="period_picker_month'+l.format("M")+'"><table><tbody>'),c.push('<tr><th class="period_picker_month" data-datestart="'+l.format(this.options.formatDate)+'"  data-dateend="'+l.clone(0,0,a).format(this.options.formatDate)+'" colspan="8" title="'+l.format(this.options.formatMonth)+'">'+l.format(this.options.formatMonth)+"<b>"+l.format("M.YYYY")+"</b></th></tr>"),d=0;l.format("E")!==this.options.dayOfWeekStart&&7>d;)l.setDate(l.getDate()-1),d+=1;for(s=1,d=0;a>=s&&100>d;){for(c.push("<tr>"),c.push('<td class="period_picker_selector_week" title="'+this.i18n("Select week #")+" "+l.format("W")+'"><span class="period_picker_selector_week"></span></td>'),n=1;7>=n;n+=1)l.format("M")!==p?c.push('<td class="period_picker_empty">&nbsp;</td>'):((!this.maxdate||l<this.maxdate)&&(!this.mindate||l>this.mindate)&&-1===this.options.disableDays.indexOf(l.format(this.options.formatDate))?(c.push('<td data-date="'+l.format(this.options.formatDate)+'"'),c.push('	class="period_picker_cell '),c.push(-1!==this.options.weekEnds.indexOf(l.format("E"))||-1!==this.options.holidays.indexOf(l.format(this.options.formatDate))?" period_picker_holiday":" period_picker_weekday"),c.push((7===n||l.format("D")===a?" period_picker_last_cell":"")+'">'+l.format("D")+"</td>")):c.push('<td class="period_picker_gray_period">'+l.format("D")+"</td>"),s+=1),l.setDate(l.getDate()+1);d+=1,c.push("</tr>")}e+=1,l.setDate(1),l.setFullYear(t),l.setMonth(e-1),p=l.getMonth()+1,c.push("</tbody></table></td>")}return c.join("")},r.prototype.toggle=function(){this.picker.hasClass("active")?this.hide():this.show()},r.prototype.show=function(){var e,t;for(this.picker.addClass("visible").addClass("active"),this.options.fullsize?this.picker.addClass("period_picker_maximize"):this.picker.hasClass("xdsoft_i_moved")||(t=this.button.offset(),this.picker.css({left:t.left,top:t.top+this.button.height()})),this.regenerate(),e=0;e<this.onAfterShow.length;e+=1)this.onAfterShow[e].call(this)},r.prototype.hide=function(){var e=this;e.picker.hasClass("visible")&&(e.picker.removeClass("active"),e.picker.hasClass("animation")?setTimeout(function(){e.picker.hasClass("active")||e.picker.removeClass("visible")},300):e.picker.removeClass("visible"))},r.prototype.destroy=function(){this.picker.remove(),this.button.remove(),this.startinput.show(),this.endinput.show(),e(t).off(".xdsoft"+this.uniqueid)},e.fn.periodpicker=function(i,o,s){var n=this;return this.each(function(){var a,p=e(this),d=p.data("periodpicker");if(d)switch(i){case"picker":n=d;break;case"setOption":d.options[o]=s;break;case"setOptions":d.options=e.extend(!0,{},d.options,o);break;case"clear":d.addRange();break;case"change":d.addRange([d.startinput.val(),d.endinput.val()]);break;case"destroy":d.hide();break;case"hide":d.hide();break;case"show":d.show();break;case"value":void 0!==o?d.addRange(o):n=d.period;break;case"valueStringStrong":n=d.getInputsValue().join("-");break;case"valueString":n=d.getLabel().join("-")}else a=e.extend(!0,{},e.fn.periodpicker.defaultOptions,i),void 0===t.moment&&(t.moment=function(t){var i="string"===e.type(t)?new Date(parseInt(t.split(".")[2],10),parseInt(t.split(".")[1],10)-1,parseInt(t.split(".")[0],10)):new Date(t),o=["January","February","March","April","May","June","July","August","September","October","November","December"];return{getDOY:function(e){return Math.ceil(e/864e5)},isSame:function(e){return void 0!==e&&i.getDate()===e.getDate()&&i.getMonth()===e.getMonth()&&i.getFullYear()===e.getFullYear()},format:function(e){var t,r,s,n;switch(e){case"MMMM YYYY":return o[i.getMonth()]+" "+i.getFullYear();case".MM.YYYY":return"."+(i.getMonth()+1)+"."+i.getFullYear();case"YYYY":return i.getFullYear();case"D":return i.getDate();case"M":return i.getMonth()+1;case"E":return i.getDay()+1;case"W":return t=new Date(i.valueOf()),r=(i.getDay()+6)%7,t.setDate(t.getDate()-r+3),s=new Date(t.getFullYear(),0,4),n=(t-s)/864e5,1+Math.ceil(n/7)}return i.getDate()+"."+(i.getMonth()>8?i.getMonth()+1:"0"+(i.getMonth()+1))+"."+i.getFullYear()},isValid:function(){return"[object Date]"!==Object.prototype.toString.call(i)?!1:!isNaN(i.getTime())},diff:function(e){return e=new Date(e),this.getDOY(e)-this.getDOY(i)},toDate:function(){return i},isBetween:function(e,t){return i>=e&&t>=i}}},t.moment.locale=function(){return this},t.moment.weekdaysShort=function(){return["Sun","Mon","Tue","Wen","Thu","Fri","Sat","San"]}),d=new r(this,a),p.data("periodpicker",d)}),n},e.fn.periodpicker.defaultOptions={animation:!0,lang:"en",i18n:{en:{"Select week #":"Select week #","Select period":"Select period","Select date":"Select date","Choose period":"Select period","Choose date":"Select date"},ru:{"Move to select the desired period":"Переместите, чтобы выбрать нужный период","Select week #":"Выбрать неделю №","Select period":"Выбрать период","Select date":"Выбрать дату","Open fullscreen":"Открыть на весь экран",Close:"Закрыть",OK:"OK","Choose period":"Выбрать период","Choose date":"Выбрать дату"},fr:{"Move to select the desired period":"Déplacer pour sélectionner la période désirée","Select week #":"Sélectionner la semaine #","Select period":"Choisissez une date","Select date":"Sélectionner la date","Open fullscreen":"Ouvrir en plein écran",Close:"Fermer",OK:"OK","Choose period":"Choisir la période","Choose date":"Choisir une date"}},timepicker:!1,timepickerOptions:{inputFormat:"HH:mm"},yearsLine:!0,title:!0,okButton:!0,closeButton:!0,fullsizeButton:!0,resizeButton:!0,navigate:!0,fullsizeOnDblClick:!0,fullsize:!1,draggable:!0,mousewheel:!0,reverseMouseWheel:!0,hideAfterSelect:!1,norange:!1,formatMonth:"MMMM YYYY",formatDecoreDate:"D MMMM",formatDecoreDateWithYear:"D MMMM YYYY",formatDecoreDateWithoutMonth:"D",formatDate:"YYYY/MM/D",formatDecoreDateTimeWithoutMonth:"HH:mm D",formatDecoreDateTime:"HH:mm D MMMM",formatDecoreDateTimeWithYear:"HH:mm D MMMM YYYY",formatDateTime:"HH:mm YYYY/MM/D",end:"",startMonth:(new Date).getMonth()+1,startYear:(new Date).getFullYear(),dayOfWeekStart:1,yearSizeInPixels:120,timepickerWidthInPixels:50,monthWidthInPixels:184,monthHeightInPixels:174,someYOffset:100,yearsPeriod:[2e3,(new Date).getFullYear()+20],weekEnds:[6,7],holidays:[],disableDays:[],minDate:!1,maxDate:!1,cells:[1,3]},Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var i,o;for(o=this.length,i=t||0;o>i;i+=1)if(this[i]===e)return i;return-1})}(jQuery,window,document),function(e,t,i){"use strict";function o(i){var o=new Date,r=0,s=this;return s.onChange=[],s.validate=function(){i.minTime&&(i.minTime instanceof Date||(i.minTime=s.parse(i.minTime)),s.isValid(i.minTime)?o<i.minTime&&(o=s.cloneTime(i.minTime)):i.minTime=!1),i.maxTime&&(i.maxTime instanceof Date||(i.maxTime=s.parse(i.maxTime)),s.isValid(i.maxTime)?o>i.maxTime&&(o=s.cloneTime(i.maxTime)):i.maxTime=!1)},s.cloneTime=function(e){var t=new Date;return t.setHours(e.getHours()),t.setMinutes(e.getMinutes()),t.setSeconds(e.getSeconds()),t},s.isValid=function(e){return"[object Date]"!==Object.prototype.toString.call(e)?!1:!isNaN(e.getTime())},s.hours12Format=function(){var e=o.getHours();return 0===e?12:e>0&&13>e?e:e>12&&23>=e?e-12:void 0},s.to12Format=function(e){return 12!==e||r?r&&12>e?e+12:e:0},s.change=function(){var t;if(s.onChange.length)for(t=0;t<s.onChange.length;t+=1)e.isFunction(s.onChange[t])&&s.onChange[t].call(s,s.get(),o)},s.index=function(e,t){var n,a=o.getTime();if(void 0!==t&&null!==t){switch(t=parseInt(t,10),e){case 1:o.setMinutes(t);break;case 2:o.setSeconds(t);break;case 3:n=o.getHours(),r=t,12>n&&t?o.setHours(n+12):n>=12&&!t&&o.setHours(n-12);break;default:o.setHours(i.twelveHoursFormat?s.to12Format(t):t)}r=s.index(3),s.validate(),a!==o.getTime()&&s.change()}switch(e){case 1:return o.getMinutes();case 2:return o.getSeconds();case 3:return r=o.getHours()>=12?1:0;default:return i.twelveHoursFormat?s.hours12Format():o.getHours()}},s.parse=function(e){return void 0!==t.moment?moment(e,i.inputFormat).toDate():Date.parse(e)},s.set=function(e){var t=o.getTime(),i=s.isValid(e)?e:s.parse(e);s.isValid(i)&&(o=i,t!==o.getTime()&&(s.validate(),s.change()))},s.get=function(){return void 0!==t.moment?moment(o).format(i.inputFormat):String(o)},s.getTime=function(){return o.getTime()},s}function r(t,o,r){var s=this;s.box=r||i.body,s.options=o,s.startinput=e(t),s.uniqueid=n,n+=1,s.init()}function s(o,r){var s=this;s.uniqueid=n,n+=1,s.startinput=e(o),s.picker=e('<div class="periodpicker_timepicker_dialog"></div>'),s.startinput.TimePicker(r,s.picker),e(i.body).append(s.picker),s.startinput.on("focus.xdsoft"+s.uniqueid,function(){s.show()}),e(t).on("mousedown.xdsoft"+s.uniqueid,function(){s.hide()})}var n=1;r.prototype.getRealOffset=function(e){var t=this.getIndex(e);return-1!==this.indexes[e].indexOf(t)?this.indexes[e].indexOf(t)*this.itemHeight():0},r.prototype.getIndex=function(e){return Math.floor(this.currentime.index(e)/this.options.steps[e])*this.options.steps[e]},r.prototype.height=function(){return this.timepicker?parseInt(this.timepicker.get(0).offsetHeight,10):0},r.prototype.itemHeight=function(){return this.items[0][0]?parseInt(this.items[0][0].get(0).offsetHeight,10):22},r.prototype.highlight=function(){var e,t;for(void 0===this.last&&(this.last=[]),e=0;e<this.boxes.length;e+=1)t=this.getIndex(e),void 0!==this.items[e][this.indexes[e].indexOf(t)]&&this.items[e][this.indexes[e].indexOf(t)].addClass("active"),void 0!==this.last[e]&&this.last[e]!==this.indexes[e].indexOf(t)&&void 0!==this.items[e][this.last[e]]&&this.items[e][this.last[e]].removeClass("active"),this.last[e]=this.indexes[e].indexOf(t)},r.prototype.setTime=function(e){var t,i;if(void 0!==e&&e&&e.length)for(i=this.boxes.length-1;i>=0;i-=1)this.currentime.index(i,e[i]);for(i=0;i<this.boxes.length;i+=1)void 0!==this.boxes[i]&&(t=-this.getRealOffset(i)+Math.ceil(this.height()-this.itemHeight())/2,this.boxes[i].css("margin-top",t+"px"));this.highlight()},r.prototype.xy=function(e){var t,i={x:0,y:0};return"touchstart"===e.type||"touchmove"===e.type||"touchend"===e.type||"touchcancel"===e.type?(t=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0],i.x=t.clientX,i.y=t.clientY):("mousedown"===e.type||"mouseup"===e.type||"mousemove"===e.type||"mouseover"===e.type||"mouseout"===e.type||"mouseenter"===e.type||"mouseleave"===e.type)&&(i.x=e.clientX,i.y=e.clientY),i
},r.prototype.init=function(){var i,r,s,n=this;n.timepicker=e('<div class="periodpicker_timepicker xdsoft_noselect"><div class="periodpicker_timepicker_sliders">'+(n.options.hours?'<div data-index="0" class="periodpicker_hourspicker_box"><div class="periodpicker_hourspicker"></div><input readonly="true" type="text"/></div>':"")+(n.options.minutes?'<div data-index="1" class="periodpicker_minutespicker_box"><div class="periodpicker_minutespicker"></div><input readonly="true" type="text"/></div>':"")+(n.options.seconds?'<div data-index="2" class="periodpicker_secondspicker_box"><div class="periodpicker_secondspicker"></div><input readonly="true" type="text"/></div>':"")+(n.options.ampm?'<div data-index="3" class="periodpicker_ampmpicker_box"><div class="periodpicker_ampmpicker"><div data-value="0" class="periodpicker_0 periodpicker_item">AM</div><div data-value="1" class="periodpicker_1 periodpicker_item">PM</div></div><input readonly="true" type="text"/></div>':"")+'</div><div class="periodpicker_timepicker_center"></div></div>'),n.currentime=new o(n.options),n.currentime.set(n.startinput.length&&n.startinput.val()?n.startinput.val():n.options.defaultTime),n.options.onChange&&n.currentime.onChange.push(n.options.onChange),n.options.saveOnChange&&n.currentime.onChange.push(function(e){var t=n.startinput.val();n.startinput.val(e),e!==t&&n.startinput.trigger("change")}),n.boxes={},s=0,n.timepicker.find(".periodpicker_timepicker_sliders>div>div").each(function(){s=Math.max(s,parseInt(e(this).parent().data("index"),10)),n.boxes[parseInt(e(this).parent().data("index"),10)]=e(this)}),n.boxes.length=s+1,n.timepicker.find(".periodpicker_timepicker_sliders>div").addClass("periodpicker_col"+n.timepicker.find(".periodpicker_timepicker_sliders>div>div").length),n.timer2=0,n.timepicker.on("mousewheel",function(e){n.options.mouseWheel&&(e.preventDefault(),e.stopPropagation())}),n.timepicker.find(".periodpicker_timepicker_sliders>div").on("mousewheel",function(t){if(n.options.mouseWheel){var i=e(this),o=[null,null,null,null],r=parseInt(e(this).data("index"),10);i.addClass("draggable"),o[r]=3>r?n.currentime.index(r)+-t.deltaY*(n.options.inverseMouseWheel?-1:1)*n.options.steps[r]:n.currentime.index(r)-1,n.setTime.call(n,o),clearTimeout(n.timer2),n.timer2=setTimeout(function(){i.removeClass("draggable")},300),t.preventDefault(),t.stopPropagation()}}),n.timepicker.find(".periodpicker_timepicker_sliders").on("click",".periodpicker_item",function(){if(n.options.clickAndSelect){var t=parseInt(e(this).data("value"),10),i=[null,null,null,null],o=parseInt(e(this).parent().parent().data("index"),10);n.iwasdragged||isNaN(t)||(i[o]=t,n.setTime.call(n,i))}}),n.timer=0,n.timepicker.find(".periodpicker_timepicker_sliders>div input").on("keydown",function(t){if(n.options.listenKeyPress){var i=[null,null,null,null],o=e(this),r=parseInt(o.parent().data("index"),10);switch(t.keyCode){case 38:i[r]=n.currentime.index(r)-n.options.steps[r],n.setTime.call(n,i);break;case 39:e(this).parent().next().length&&e(this).parent().next().find("input")[0].focus();break;case 37:e(this).parent().prev().length&&e(this).parent().prev().find("input")[0].focus();break;case 40:i[r]=n.currentime.index(r)+n.options.steps[r],n.setTime.call(n,i);break;default:/[0-9amp]/i.test(String.fromCharCode(t.keyCode))&&o.val(o.val()+String.fromCharCode(t.keyCode)),clearTimeout(n.timer),n.timer=setTimeout(function(){var e=o.val();o.val(""),3===r&&e.length&&(e="p"===e.toLowerCase().substr(0,1)?1:0),e=parseInt(e,10),isNaN(e)||(i[r]=e,n.setTime.call(n,i))},300)}}}),n.timepicker.find(".periodpicker_timepicker_sliders>div").on("mousedown.xdsoft touchstart.xdsoft",function(t){n.options.dragAndDrop&&(n.drag=!0,i=[n.xy(t).x,n.xy(t).y],i[4]=parseInt(e(this).data("index"),10),i[3]=n.boxes[i[4]],i[2]=parseInt(i[3].css("margin-top"),10),i[3].find("div").removeClass("active"),i[3].parent().addClass("draggable"),n.iwasdragged=!1,t.preventDefault(),t.stopImmediatePropagation())}),n.iwasdragged=!1,e(t).on("mouseup.xdsoft"+n.uniqueid+" touchend.xdsoft"+n.uniqueid,function(e){n.options.dragAndDrop&&n.drag&&(n.drag=!1,n.setTime(),i[3].parent().removeClass("draggable"),e.stopImmediatePropagation())}).on("mousemove.xdsoft"+n.uniqueid+" touchmove.xdsoft"+n.uniqueid,function(e){if(n.drag&&n.options.dragAndDrop){r=[n.xy(e).x-i[0],n.xy(e).y-i[1]],i[3].css({marginTop:i[2]+r[1]}),r[1]>10&&(n.iwasdragged=!0);var t=-Math.round((-(n.height()-n.itemHeight())/2+i[2]+r[1])/n.itemHeight());0>t&&(t=0),t>=n.items[i[4]].length&&(t=n.items[i[4]].length-1),t=parseInt(n.items[i[4]][t].data("value"),10),n.currentime.index(i[4],t),n.highlight(),e.preventDefault()}}),e(n.box).append(n.timepicker),n.generateTimepicker(),n.setTime()},r.prototype.destroy=function(){var i=this;e(t).off("mouseup.xdsoft"+i.uniqueid+" touchend.xdsoft"+i.uniqueid).off("mousemove.xdsoft"+i.uniqueid+" touchmove.xdsoft"+i.uniqueid),i.timepicker.remove(),delete i.timepicker,delete i.boxes,delete i.currentime},r.prototype.generateTimepicker=function(){var t,i,o=this;for(o.items=[[],[],[],[]],o.indexes=[[],[],[],[0,1]],t=0;2>=t;t+=1)if(void 0!==o.options.parts[t]&&void 0!==o.boxes[t]){if(!o.options.twelveHoursFormat||t>0)for(i=o.options.parts[t][0][0];i<=o.options.parts[t][0][1];i+=o.options.steps[t])o.items[t].push(e('<div data-value="'+i+'" class="periodpicker_'+i+' periodpicker_item">'+(10>i?"0":"")+i+"</div>")),o.indexes[t].push(i);else for(o.items[t].push(e('<div data-value="12" class="periodpicker_12 periodpicker_item">12</div>')),o.indexes[t].push(12),i=1;11>=i;i+=o.options.steps[t])o.items[t].push(e('<div data-value="'+i+'" class="periodpicker_'+i+' periodpicker_item">'+(10>i?"0":"")+i+"</div>")),o.indexes[t].push(i);o.boxes[t].html(o.items[t])}o.boxes[3]&&o.boxes[3].length&&o.boxes[t].find("div").each(function(){o.items[3].push(e(this))})},e.fn.TimePicker=function(t,i){var o,s=this;return this.each(function(){var n,a=e(this),p=a.data("timepicker");if(p)switch(t){case"stopDrag":p.drag=!1,p.timepicker.find(".draggable").removeClass("draggable"),p.setTime();break;case"regenerate":p.setTime();break;case"destroy":p.destroy();break;case"save":a.val(p.currentime.get());break;case"setValue":p.currentime.set(i),p.setTime();break;case"setMin":case"setMax":o=p.currentime.getTime(),p.options["setMin"===t?"minTime":"maxTime"]=i,p.currentime.validate(),p.setTime(),o!==p.currentime.getTime()&&p.currentime.change();break;case"getValue":s=p.currentime.get()}else n=e.extend(!0,{},e.fn.TimePicker.defaultOptions,t),p=new r(this,n,i),a.data("timepicker",p)}),s},e.fn.timepicker=e.fn.TimePicker,e.fn.TimePicker.defaultOptions={clickAndSelect:!0,dragAndDrop:!0,mouseWheel:!0,inverseMouseWheel:!1,listenKeyPress:!0,saveOnChange:!0,onChange:function(){return!0},twelveHoursFormat:!0,inputFormat:"HH:mm:ss",defaultTime:"00:00:00",minTime:!1,maxTime:!1,hours:!0,minutes:!0,seconds:!1,ampm:!0,parts:[[[0,23]],[[0,59]],[[0,59]],[[0,1]]],steps:[1,1,1,1]},s.prototype.destroy=function(){this.startinput.TimePicker("destroy")},s.prototype.hide=function(){this.picker.hasClass("visible")&&this.picker.removeClass("visible")},s.prototype.show=function(){if(!this.picker.hasClass("visible")){var e=this.startinput.offset();this.picker.css({left:e.left,top:e.top+this.startinput[0].offsetHeight}),this.picker.addClass("visible"),this.startinput.TimePicker("regenerate")}},e.fn.TimePickerAlone=function(t,i,o){var r=this;return this.each(function(){var r,n=e(this),a=n.data("timepickeralone");if(a)switch(t){case"destroy":a.destroy();break;default:return a.startinput.TimePicker(t,i,o)}else r=e.extend(!0,{},e.fn.TimePicker.defaultOptions,t),a=new s(this,r),n.data("timepickeralone",a)}),r},e.fn.timepickeralone=e.fn.TimePickerAlone}(jQuery,window,document),!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var n=t||window.event,a=p.call(arguments,1),d=0,l=0,h=0,u=0,m=0,f=0;if(t=e.event.fix(n),t.type="mousewheel","detail"in n&&(h=-1*n.detail),"wheelDelta"in n&&(h=n.wheelDelta),"wheelDeltaY"in n&&(h=n.wheelDeltaY),"wheelDeltaX"in n&&(l=-1*n.wheelDeltaX),"axis"in n&&n.axis===n.HORIZONTAL_AXIS&&(l=-1*h,h=0),d=0===h?l:h,"deltaY"in n&&(h=-1*n.deltaY,d=h),"deltaX"in n&&(l=n.deltaX,0===h&&(d=-1*l)),0!==h||0!==l){if(1===n.deltaMode){var k=e.data(this,"mousewheel-line-height");d*=k,h*=k,l*=k}else if(2===n.deltaMode){var g=e.data(this,"mousewheel-page-height");d*=g,h*=g,l*=g}if(u=Math.max(Math.abs(h),Math.abs(l)),(!s||s>u)&&(s=u,o(n,u)&&(s/=40)),o(n,u)&&(d/=40,l/=40,h/=40),d=Math[d>=1?"floor":"ceil"](d/s),l=Math[l>=1?"floor":"ceil"](l/s),h=Math[h>=1?"floor":"ceil"](h/s),c.settings.normalizeOffset&&this.getBoundingClientRect){var _=this.getBoundingClientRect();m=t.clientX-_.left,f=t.clientY-_.top}return t.deltaX=l,t.deltaY=h,t.deltaFactor=s,t.offsetX=m,t.offsetY=f,t.deltaMode=0,a.unshift(t,d,l,h),r&&clearTimeout(r),r=setTimeout(i,200),(e.event.dispatch||e.event.handle).apply(this,a)}}function i(){s=null}function o(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var r,s,n=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],a="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],p=Array.prototype.slice;if(e.event.fixHooks)for(var d=n.length;d;)e.event.fixHooks[n[--d]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var i=a.length;i;)this.addEventListener(a[--i],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var i=a.length;i;)this.removeEventListener(a[--i],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var i=e(t),o=i["offsetParent"in e.fn?"offsetParent":"parent"]();return o.length||(o=e("body")),parseInt(o.css("fontSize"),10)||parseInt(i.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});