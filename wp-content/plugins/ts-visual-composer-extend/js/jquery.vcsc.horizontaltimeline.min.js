jQuery(document).ready(function(e){function t(e){e.each(function(){var e=jQuery(this),t={};if(timelineDirection=e.attr("data-direction"),timelineStartEvent=parseInt(e.attr("data-startevent")),timelineMinDistance=parseInt(e.attr("data-minspace")),timelineMaxDistance=parseInt(e.attr("data-maxspace")),timelineLeftDistance=parseInt(e.attr("data-leftspace")),timelineRightDistance=parseInt(e.attr("data-rightspace")),timelineColumnsStack=parseInt(e.attr("data-columnsstack")),timelineIndexLooper=0,timelineTotalWidth=0,timelineConvertStorage=[],timelineConvertUNIX=0,timelineConvertMoment="",timelineEqualizer="true"==e.attr("data-equalizer"),timelineReverse="true"==e.attr("data-reverse"),timelineKeyboard="true"==e.attr("data-keyboard"),t.timelineWrapper=e.find(".ts-horizontal-timeline-wrapper"),t.timelinePreloader=e.find(".ts-horizontal-timeline-preloader"),t.timelineBullets=e.find(".ts-horizontal-timeline-bullets"),t.timelineContent=e.children(".ts-horizontal-timeline-content"),t.timelineItems=e.find(".ts-horizontal-timeline-items"),0==t.timelineItems.find("li").length)return!1;t.timelineBullets.find("li").each(function(e){timelineConvertMoment=moment(jQuery(this).attr("data-original"),["MM/DD/YYYY","MM/DD/YYYY HH:mm:ss"]),timelineConvertUNIX=1e3*timelineConvertMoment.unix(),jQuery.inArray(timelineConvertUNIX,timelineConvertStorage)>-1&&(timelineConvertMoment=timelineConvertMoment.add(1,"minutes"),timelineConvertUNIX+=6e4),timelineConvertStorage.push(timelineConvertUNIX),jQuery(this).attr("data-timestamp",timelineConvertUNIX).attr("data-date",timelineConvertMoment.format("MM/DD/YYYY HH:mm:ss")).find("a").attr("data-timestamp",timelineConvertUNIX)}),timelineConvertStorage=[],t.timelineContent.find("li").each(function(e){timelineConvertMoment=moment(jQuery(this).attr("data-original"),["MM/DD/YYYY","MM/DD/YYYY HH:mm:ss"]),timelineConvertUNIX=1e3*timelineConvertMoment.unix(),jQuery.inArray(timelineConvertUNIX,timelineConvertStorage)>-1&&(timelineConvertMoment=timelineConvertMoment.add(1,"minutes"),timelineConvertUNIX+=6e4),timelineConvertStorage.push(timelineConvertUNIX),jQuery(this).attr("data-timestamp",timelineConvertUNIX).attr("data-date",timelineConvertMoment.format("MM/DD/YYYY HH:mm:ss"))}),t.timelineBullets.find("li.ts-horizontal-timeline-quick").sort(function(e,t){var i=parseInt(jQuery(e).attr("data-timestamp")),n=parseInt(jQuery(t).attr("data-timestamp"));return timelineReverse?i>n?-1:i<n?1:0:i<n?-1:i>n?1:0}).appendTo(t.timelineBullets),t.timelineItems.find("li.ts-horizontal-timeline-single").sort(function(e,t){var i=parseInt(jQuery(e).attr("data-timestamp")),n=parseInt(jQuery(t).attr("data-timestamp"));return timelineReverse?i>n?-1:i<n?1:0:i<n?-1:i>n?1:0}).appendTo(t.timelineItems),t.eventsWrapper=t.timelineWrapper.children(".ts-horizontal-timeline-events"),t.fillingLine=t.eventsWrapper.children(".ts-horizontal-timeline-filling"),t.timelineEvents=t.eventsWrapper.find("a"),t.timelineDates=function(e){var t=[];return e.each(function(){var e=jQuery(this).attr("data-timestamp");t.push(e)}),t}(t.timelineEvents),t.timelineSmallest=function(e,t){var n=[];for(i=1;i<e.length;i++){var a=c(e[i-1],e[i],t,"minutes",!1);n.push(a)}return Math.min.apply(null,n)}(t.timelineDates,timelineReverse),t.timelineNavigation=e.find(".ts-horizontal-timeline-navigation"),t.timelineNextPrev=e.find(".ts-horizontal-timeline-nextprev"),t.timelineBullets.find("li").each(function(e){e==timelineStartEvent?(timelineStartEvent=jQuery(this).attr("data-timestamp"),jQuery(this).find("a").addClass("selected").removeClass("older-event")):(jQuery(this).find("a").removeClass("selected"),timelineIndexLooper<timelineStartEvent&&jQuery(this).find("a").addClass("older-event")),timelineIndexLooper++}),t.timelineContent.find("li").each(function(e){jQuery(this).attr("data-timestamp")==timelineStartEvent?jQuery(this).addClass("selected"):jQuery(this).removeClass("selected")});var l=e.width(),s=m(t,timelineTotalWidth,timelineMinDistance,timelineMaxDistance,timelineLeftDistance,timelineRightDistance,timelineEqualizer,timelineReverse);if(e.addClass("loaded"),t.timelineNavigation.on("click",".next",function(e){e.preventDefault(),jQuery(this).hasClass("inactive")||n(t,s,"next")}),t.timelineNavigation.on("click",".prev",function(e){e.preventDefault(),jQuery(this).hasClass("inactive")||n(t,s,"prev")}),t.timelineNextPrev.on("click",".next",function(e){e.preventDefault(),a(t,s,"next")}),t.timelineNextPrev.on("click",".prev",function(e){e.preventDefault(),a(t,s,"prev")}),t.eventsWrapper.on("click","a",function(e){e.preventDefault(),t.timelineEvents.removeClass("selected"),jQuery(this).addClass("selected"),f(jQuery(this)),o(jQuery(this),t.fillingLine,s),d(t,jQuery(this))}),"ontouchstart"in document.documentElement){var p=null,g=null;1==$TS_VCSC_Hammer_ReleaseNew?(p=document.getElementById(t.timelineWrapper.attr("id")),(p=new Hammer(p,{prevent_default:!0})).on("swipeleft",function(e){return e.preventDefault(),n(t,s,"next"),!1}).on("swiperight",function(e){return e.preventDefault(),n(t,s,"prev"),!1}),g=document.getElementById(t.timelineContent.attr("id")),(g=new Hammer(g,{prevent_default:!0})).on("swipeleft",function(e){return e.preventDefault(),a(t,s,"next"),!1}).on("swiperight",function(e){return e.preventDefault(),a(t,s,"prev"),!1})):((p=new Hammer(t.timelineWrapper)).on("swipeleft",function(){return n(t,s,"next"),!1}).on("swiperight",function(){return n(t,s,"prev"),!1}),(g=new Hammer(t.timelineContent)).on("swipeleft",function(){return a(t,s,"next"),!1}).on("swiperight",function(){return a(t,s,"prev"),!1}))}timelineKeyboard&&jQuery(document).keyup(function(i){"37"==i.which&&h(e.get(0))?a(t,s,"prev"):"39"==i.which&&h(e.get(0))&&a(t,s,"next")}),r(t),t.timelinePreloader.hide(),jQuery(window).on("debouncedresize",function(i){v(t.eventsWrapper.get(0),"translateX","0px"),l=e.width(),(s=m(t,timelineTotalWidth,timelineMinDistance,timelineMaxDistance,timelineLeftDistance,timelineRightDistance,timelineEqualizer,timelineReverse))<=l?(t.timelineNavigation.hide(),t.timelineWrapper.addClass("ts-horizontal-timeline-allbullets")):(t.timelineNavigation.show(),t.timelineWrapper.removeClass("ts-horizontal-timeline-allbullets")),u(t),function(e){var t=e.timelineContent.find(".selected").outerHeight();e.timelineContent.css("height",t+"px")}(t),setTimeout(function(){l=e.width(),s=m(t,timelineTotalWidth,timelineMinDistance,timelineMaxDistance,timelineLeftDistance,timelineRightDistance,timelineEqualizer,timelineReverse),o(t.eventsWrapper.find("a.selected"),t.fillingLine,timelineTotalWidth)},250)})})}function n(e,t,i){var n=p(e.eventsWrapper),a=Number(e.timelineWrapper.css("width").replace("px",""));"next"==i?s(e,n-a+timelineMinDistance,a-t):s(e,n+a-timelineMinDistance)}function a(e,t,i){var n=e.timelineContent.find(".selected");if(("next"==i?n.next():n.prev()).length>0){var a=e.eventsWrapper.find(".selected"),r="next"==i?a.parent("li").next("li").children("a"):a.parent("li").prev("li").children("a");o(r,e.fillingLine,t),d(e,r),r.addClass("selected"),a.removeClass("selected"),f(r),l(i,r,e)}}function r(e){var t=e.timelineContent.find(".selected").index(),i=e.timelineContent.find("li").length-1;e.timelineNextPrev.find(".prev").removeClass("inactive"),e.timelineNextPrev.find(".next").removeClass("inactive"),0==t?e.timelineNextPrev.find(".prev").addClass("inactive"):t==i&&e.timelineNextPrev.find(".next").addClass("inactive")}function l(e,t,i){var n=window.getComputedStyle(t.get(0),null),a=Math.ceil(Number(n.getPropertyValue("left").replace("px",""))),r=Math.ceil(Number(i.timelineWrapper.width())),l=Math.ceil(Number(i.eventsWrapper.width())),o=Math.ceil(p(i.eventsWrapper));("next"==e&&a>r-o||"prev"==e&&a<-o)&&s(i,r/2-a,r-l)}function s(e,t,i){var n=e.eventsWrapper.get(0);t=t>0?0:t,v(n,"translateX",(t=void 0!==i&&t<i?i:t)+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==i?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")}function o(e,t,i){var n=window.getComputedStyle(e.get(0),null),a=n.getPropertyValue("left"),r=n.getPropertyValue("width"),l=(a=Number(a.replace("px",""))+Number(r.replace("px",""))/2)/i;v(t.get(0),"scaleX",l)}function m(e,t,n,a,r,s,m,d){var u=e.timelineWrapper.width(),f=0,p=0,v=0,h=0;if(e.eventsWrapper.css("width","auto"),a>u&&(a=u-2*n),a<0&&(a=n),m){for(i=0;i<e.timelineDates.length;i++)v=h+n,e.timelineEvents.eq(i).css("left",v+"px"),h=v;t=v}else{for(i=0;i<e.timelineDates.length;i++)f=0==i?0:c(e.timelineDates[i-1],e.timelineDates[i],d,"minutes",!1),(p=Math.ceil(f/e.timelineSmallest*n))>a?p=a:p<n&&(p=n),v=0==i?h+r:h+p,e.timelineEvents.eq(i).css("left",v+"px"),h=v;t=v}return(t+=s)<u&&(t=u),e.eventsWrapper.css("width",t+"px"),o(e.eventsWrapper.find("a.selected"),e.fillingLine,t),l("next",e.eventsWrapper.find("a.selected"),e),t}function d(e,t){var i=t.attr("data-timestamp"),n=e.timelineContent.find(".selected"),a=e.timelineContent.find('[data-timestamp="'+i+'"]'),l=a.outerHeight();if(a.index()>n.index())var s="ts-horizontal-timeline-single selected enter-right",o="ts-horizontal-timeline-single leave-left";else var s="ts-horizontal-timeline-single selected enter-left",o="ts-horizontal-timeline-single leave-right";a.attr("class",s),n.attr("class",o).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){n.removeClass("leave-right leave-left"),a.removeClass("enter-left enter-right")}),e.timelineContent.css("height",l+"px"),r(e),u(e)}function u(e){timelineWrapperWidth=e.timelineItems.width(),timelineColumnsStack=parseInt(e.timelineItems.attr("data-columnsstack")),e.timelineItems.children("li.ts-horizontal-timeline-single").each(function(e){"true"==jQuery(this).attr("data-columns")&&(timelineWrapperWidth<=timelineColumnsStack?jQuery(this).removeClass("ts-horizontal-timeline-columns"):jQuery(this).addClass("ts-horizontal-timeline-columns"))})}function f(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function p(e){var t=window.getComputedStyle(e.get(0),null),i=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(i.indexOf("(")>=0)n=(i=(i=(i=i.split("(")[1]).split(")")[0]).split(","))[4];else var n=0;return Number(n)}function v(e,t,i){e.style["-webkit-transform"]=t+"("+i+")",e.style["-moz-transform"]=t+"("+i+")",e.style["-ms-transform"]=t+"("+i+")",e.style["-o-transform"]=t+"("+i+")",e.style.transform=t+"("+i+")"}function c(e,t,i,n,a){var r,l,s,o,m;return m=t-e,a?(o=Math.floor(m/1e3),s=Math.floor(o/60),o%=60,l=Math.floor(s/60),s%=60,r=Math.floor(l/24),l%=24):(o=Math.floor(m/1e3),s=Math.floor(o/60),l=Math.floor(s/60),r=Math.floor(l/24)),"days"==n?Math.abs(r):"hours"==n?Math.abs(l):"minutes"==n?Math.abs(s):"seconds"==n?Math.abs(o):"millis"==n?Math.abs(m):"all"==n?{days:Math.abs(r),hours:Math.abs(l),minutes:Math.abs(s),seconds:Math.abs(o),millis:Math.abs(m)}:void 0}function h(e){for(var t=e.offsetTop,i=e.offsetLeft,n=e.offsetWidth,a=e.offsetHeight;e.offsetParent;)t+=(e=e.offsetParent).offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+a>window.pageYOffset&&i+n>window.pageXOffset}var g=jQuery(".ts-horizontal-timeline-main");g.length>0&&t(g)});