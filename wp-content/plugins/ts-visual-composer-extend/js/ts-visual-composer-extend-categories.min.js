jQuery(document).ready(function(){function t(){return jQuery(".ts-composium-filter-container").css("height","auto"),jQuery(".ts-composium-filter-controls").css("height","auto"),g=jQuery(this).attr("data-composium-subcategory"),jQuery("button[data-composium-subcategory]").removeClass("ts-composium-filter-active"),jQuery(this).addClass("ts-composium-filter-active"),jQuery(r).each(function(){jQuery(this).is(g)?jQuery(this).closest(".wpb-layout-element-button").addClass("vc_visible"):jQuery(this).closest(".wpb-layout-element-button").removeClass("vc_visible")}).promise().done(function(){e()}),!0}function e(){jQuery(".ts-composium-filter-selectors").hasClass("ts-composium-filter-visible")?(y=jQuery(window).height(),h=jQuery("#vc_ui-panel-add-element").outerHeight(!0),d=jQuery("#vc_ui-panel-add-element").css("max-height").replace("px",""),f=jQuery(".vc_ui-panel-header-container").outerHeight(!0),j=jQuery(".vc_ui-panel-content-container").outerHeight(!0),Q=jQuery(".ts-composium-filter-controls").outerHeight(!0),b=jQuery(".ts-composium-filter-elements").outerHeight(!0),y>Q&&Q>b&&j>Q?jQuery(".ts-composium-filter-container").css("height",Q+"px"):d-f-Q>=b?jQuery(".ts-composium-filter-container").css("height",Q+"px"):d-f-Q<b?Q>b&&Q<=d-f?jQuery(".ts-composium-filter-container").css("height",Q+"px"):Q>b&&Q>d-f?(jQuery(".ts-composium-filter-container").css("height",d-f+"px"),jQuery(".ts-composium-filter-controls").css("height",d-f+"px")):(jQuery(".ts-composium-filter-container").css("height",j+"px"),jQuery(".ts-composium-filter-controls").css("height",j+"px")):Q>j?(jQuery(".ts-composium-filter-container").css("height",j+"px"),jQuery(".ts-composium-filter-controls").css("height",j+"px")):(jQuery(".ts-composium-filter-container").css("height","auto"),jQuery(".ts-composium-filter-controls").css("height","auto"))):(jQuery(".ts-composium-filter-container").css("height","auto"),jQuery(".ts-composium-filter-controls").css("height","auto"))}function o(t){try{$TS_Composium_Filter.vc.category==jQuery(this).data("filter")||"Composium"==jQuery.trim(jQuery(this).text())?(jQuery(".ts-composium-filter-selectors").removeClass("ts-composium-filter-hidden").addClass("ts-composium-filter-visible").show(),n=0,jQuery.each(m,function(t,e){a=0,l=0,jQuery(r).each(function(){jQuery(this).is("."+e)&&(a++,jQuery(this).closest(".wpb-layout-element-button").hasClass("vc_inappropriate")&&l++)}),p=jQuery(".ts-composium-filter-button[data-composium-subcategory='."+e+"']").attr("data-composium-label"),n+=a-l,a==l?jQuery(".ts-composium-filter-button[data-composium-subcategory='."+e+"']").attr("disabled","disabled").prop("disabled",!0).addClass("ts-composium-filter-disabled").text(p+" (0)"):jQuery(".ts-composium-filter-button[data-composium-subcategory='."+e+"']").removeAttr("disabled").removeClass("ts-composium-filter-disabled").text(p+" ("+(a-l)+")")}),p=jQuery(".ts-composium-filter-button[data-composium-subcategory='*']").attr("data-composium-label"),jQuery(".ts-composium-filter-button[data-composium-subcategory='*']").text(p+" ("+n+")").click()):jQuery(".ts-composium-filter-selectors").removeClass("ts-composium-filter-visible").addClass("ts-composium-filter-hidden").hide(),e(),setTimeout(function(){e()},100)}catch(t){console&&console.log&&console.log(t.message)}return!0}function s(){""!=jQuery(this).val()?(jQuery(".ts-composium-filter-container").css("height","auto"),jQuery(".ts-composium-filter-controls").hasClass("ts-composium-filter-disabled")||(jQuery(r).each(function(){jQuery(this).closest(".wpb-layout-element-button").addClass("vc_visible")}),jQuery(".ts-composium-filter-controls").addClass("ts-composium-filter-disabled")),jQuery(".ts-composium-filter-selectors").hide(),jQuery("button[data-composium-subcategory]").removeClass("ts-composium-filter-active"),jQuery("button[data-composium-subcategory]:first").addClass("ts-composium-filter-active")):""==jQuery(this).val()&&jQuery(".ts-composium-filter-controls").removeClass("ts-composium-filter-disabled")}var i=!1;if("undefined"!=typeof $TS_Composium_Filter&&void 0!==typeof $TS_Composium_Filter&&(i=!0),1==i){var u=null,r=[],c=[],m=[],a=0,l=0,n=0,p="";jQuery($TS_Composium_Filter.vc.subcategories).each(function(t,e){for(var o in e)e.hasOwnProperty(o)&&(u=jQuery("#"+o),jQuery(e[o]).each(function(t,e){jQuery("#"+o).addClass(e),jQuery.inArray(e,c)<0&&(c.push(e),u.length>0&&jQuery.inArray(e,m)<0&&m.push(e))}),r.push(u))}),u=null,jQuery(".ts-composium-filter-container").closest(".wpb-elements-list").addClass("ts-composium-filter-applied"),jQuery.each(c,function(t,e){jQuery.inArray(e,m)<0&&jQuery(".ts-composium-filter-button[data-composium-subcategory='."+e+"']").hide(),p=jQuery(".ts-composium-filter-button[data-composium-subcategory='."+e+"']").text(),jQuery(".ts-composium-filter-button[data-composium-subcategory='."+e+"']").attr("data-composium-label",p)}),p=jQuery(".ts-composium-filter-button[data-composium-subcategory='*']").text(),jQuery(".ts-composium-filter-button[data-composium-subcategory='*']").attr("data-composium-label",p),jQuery(".vc_add-element-filter-button").off("click",o).on("click",o);var y=jQuery(window).height(),h=jQuery("#vc_ui-panel-add-element").outerHeight(!0),d=jQuery("#vc_ui-panel-add-element").css("max-height"),f=jQuery(".vc_ui-panel-header-container").outerHeight(!0),j=jQuery(".vc_ui-panel-content-container").outerHeight(!0),Q=jQuery(".ts-composium-filter-controls").outerHeight(!0),b=jQuery(".ts-composium-filter-elements").outerHeight(!0);jQuery(".ts-composium-filter-selectors").find("button").each(function(){Q+=jQuery(this).outerHeight(!0)});var g="";jQuery("button[data-composium-subcategory]").off("click",t).on("click",t),jQuery(window).resize(function(){jQuery(".ts-composium-filter-container").css("height","auto"),jQuery(".ts-composium-filter-controls").css("height","auto"),e()});jQuery("#vc_elements_name_filter").off("keyup",s).on("keyup",s)}});