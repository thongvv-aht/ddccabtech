jQuery,jQuery(document).ready(function(){function e(e,i,a,n,r,s,o,l){""!=o&&void 0!=o&&"undefined"!=o&&("rating_value"==o?((k=jQuery(".ts-nouislider-input-serial.nouislider-input-selector.nouislider-input-composer.wpb_vc_param_value.rating_value.nouislider")).attr("max",a),j=document.getElementById(k.siblings(".ts-nouislider-input-element").attr("id")),k.siblings(".ts-nouislider-input-element").hasClass("ts-nouislider-initialized")&&(x=t(i,a,n),b="false"==k.siblings(".ts-nouislider-input-element").attr("data-pips")?"":{mode:"values",density:x[0],values:x[1],stepped:!0,format:wNumb({decimals:r,postfix:s})},j.noUiSlider.updateOptions({range:{min:[parseInt(i)],max:[parseInt(a)]},step:.25}),l&&((Q=j.querySelector(".noUi-pips")).parentElement.removeChild(Q),j.noUiSlider.pips(b)))):"rating_maximum"==o&&(k=jQuery(".ts-nouislider-input-serial.nouislider-input-selector.nouislider-input-composer.wpb_vc_param_value.rating_value.nouislider"),j=document.getElementById(k.siblings(".ts-nouislider-input-element").attr("id")),S=jQuery(".ts-nouislider-input-serial.nouislider-input-selector.nouislider-input-composer.wpb_vc_param_value.rating_maximum.nouislider"),y=k.siblings(".ts-nouislider-input-element").attr("data-value"),a=S.val(),k.attr("max",a),jQuery(j).siblings(".ts-nouislider-input-max").html(parseInt(a)+".00"),k.siblings(".ts-nouislider-input-element").hasClass("ts-nouislider-initialized")&&"false"==k.siblings(".ts-nouislider-input-element").attr("data-init")&&(k.val(y),k.siblings(".ts-nouislider-input-element").attr("data-init","true"),x=t(i,a,n),b="false"==k.siblings(".ts-nouislider-input-element").attr("data-pips")?"":{mode:"values",density:x[0],values:x[1],stepped:!0,format:wNumb({decimals:r,postfix:s})},j.noUiSlider.updateOptions({range:{min:[parseInt(i)],max:[parseInt(a)]},step:.25}),jQuery(j).siblings(".ts-nouislider-input-max").html(parseInt(a)),j.noUiSlider.set(y),l&&((Q=j.querySelector(".noUi-pips")).parentElement.removeChild(Q),j.noUiSlider.pips(b)))))}function t(e,t,i){var a=[],n=[],r=4,s=!1,o=!1,l=!1,d=!1,c=null,u=null,f=null,p=null;if(n.push(e),n.push(t),e<0){if((c=(t-e)/2)%1==0&&(n.push(c+e),s=!0),(u=(t-e)/4)%1==0&&(n.push(u+e),n.push(3*u+e),s=!1,l=!0),!s&&!l){(f=(t-e)/3)%1==0&&(n.push(f+e),n.push(2*f+e),o=!0)}if(!s&&!o&&!l){(p=(t-e)/5)%1==0&&(n.push(d+e),n.push(2*d+e),n.push(3*d+e),n.push(4*d+e),d=!0)}}else 0==e?((c=t/2)%1==0&&(n.push(c),s=!0),(u=t/4)%1==0&&(n.push(u),n.push(3*u),l=!0),s||l||(f=t/3)%1==0&&(n.push(f),n.push(2*f),o=!0),s||o||l||(p=t/5)%1==0&&(n.push(p),n.push(2*p),n.push(3*p),n.push(4*p),d=!0)):e>0&&((c=(t-e)/2)%1==0&&(n.push(c+e),s=!0),(u=(t-e)/4)%1==0&&(n.push(u+e),n.push(3*u+e),s=!1,l=!0),s||l||(f=(t-e)/3)%1==0&&(n.push(f+e),n.push(2*f+e),o=!0),o||l||(p=(t-e)/5)%1==0&&(n.push(d+e),n.push(2*d+e),n.push(3*d+e),n.push(4*d+e),d=!0));return n.sort(function(e,t){return e>t}),s?r=4:o?r=3:l?r=4:d&&(r=5),a.push(r),a.push(n),a}function a(e,t,a){if(t&&""!=a)e.find("input.ts-conditionals-usercaps").TS_VCSC_TagEditor("removeTag",a,!0);else if(!t){var n=e.find("input.ts-conditionals-usercaps").TS_VCSC_TagEditor("getTags")[0].tags;for(i=0;i<n.length;i++)e.find("input.ts-conditionals-usercaps").TS_VCSC_TagEditor("removeTag",n[i])}}function n(e,t){var i=[];return"userroles"==t?e.find(".ts-conditionals-userroles input.ts-conditionals-userrole").each(function(){jQuery(this).prop("checked")&&i.push(jQuery(this).attr("value"))}):"othertags"==t?e.find(".ts-conditionals-othertags input.ts-conditionals-othertag").each(function(){jQuery(this).prop("checked")&&i.push(jQuery(this).attr("value"))}):"devicetypes"==t&&e.find(".ts-conditionals-devicetypes input.ts-conditionals-devicetype").each(function(){jQuery(this).prop("checked")&&i.push(jQuery(this).attr("value"))}),i=i.join(",")}function r(e,t,i,a,n,r,s,o,l,d,c){var u="";if("everybody"!=t||""!=o||""!=f){var f={viewerstatus:t,restriction:""==i?"none":i,userroles:a,userscope:""==n?"any":n,usercaps:r,otherscope:""==s?"any":s,othertags:o,devicetypes:l};f=JSON.stringify(f),f=TS_VCSC_Base64.encode(f)}e.val(f),""!=d&&(u+=c.viewerstatus+": "+("everybody"==t?c.everybody:"loggedin"==t?c.loggedin:c.external),"loggedin"==t&&(u+=" / "+c.userconditions+": ","none"==i?u+=c.none:"userroles"==i?u+=c.userroles:"userrights"==i&&(u+=c.userrights)),u+=" / "+c.othertags+": "+(""!=o?c.yes:c.no),jQuery("#"+d).val(u))}function s(){var e=null;jQuery("#csf-modal-ts-composium-shortcode").find(".ts-datetime-picker-wrapper").each(function(){(e=jQuery(this)).find(".ts-nouislider-time-element").each(function(){!function(e){if(!e.hasClass("ts-nouislider-initialized")){var t=parseFloat(e.attr("data-min")),i=parseFloat(e.attr("data-max")),a=parseFloat(e.attr("data-step")),n=parseFloat(e.attr("data-value")),r=parseFloat(e.attr("data-decimals")),s=(e.attr("data-unit"),e.attr("id")),o=document.getElementById(s),l=e.siblings(".ts-nouislider-serial"),f=e.siblings(".ts-nouislider-time-lower-up"),p=e.siblings(".ts-nouislider-time-lower-down"),h=e.siblings(".ts-nouislider-time-faster-up"),g=e.siblings(".ts-nouislider-time-faster-down"),m=jQuery("#"+e.parent().attr("data-output")).find(".ts-nouislider-time-final");1==u&&(noUiSlider.create(o,{range:{min:[t],max:[i]},start:n,handles:1,step:a,behaviour:"extend-tap",connect:[!0,!1],format:wNumb({mark:".",decimals:r}),pips:{mode:"values",density:4,values:[0,360,720,1080,1440],stepped:!0,format:wNumb({encoder:function(e){return e/=60},decoder:function(e){return e*=60}})}}),o.noUiSlider.set(n),e.addClass("ts-nouislider-initialized"),o.noUiSlider.on("update",function(e,t){l.val(d(60*e)),c(m,e)}),o.noUiSlider.on("change",function(e,t){l.val(d(60*e)).trigger("change"),c(m,e)}),f.on("click",function(){var e=o.noUiSlider.get();(e=parseInt(e)+1)>1440&&(e=1440),o.noUiSlider.set([e,e[1]]),c(m,e)}),h.on("click",function(){var e=o.noUiSlider.get();(e=parseInt(e)+5)>1440&&(e=1440),o.noUiSlider.set([e,e[1]]),c(m,e)}),p.on("click",function(){var e=o.noUiSlider.get();(e=parseInt(e)-1)<1&&(e=1),o.noUiSlider.set([e,e[1]]),c(m,e)}),g.on("click",function(){var e=o.noUiSlider.get();(e=parseInt(e)-5)<1&&(e=1),o.noUiSlider.set([e,e[1]]),c(m,e)}))}}(jQuery(this))}),e.find(".ts-timeonly-picker-element").each(function(){!function(e){var t=e.find(".ts-timeonlypicker-value"),i=(e.find(".ts-timeonlypicker-value").val(),e.find(".ts-timeonlypicker-clear")),a=e.find(".ts-timeonlypicker-single"),n=e.find(".ts-timeonlypicker-minutes"),r=jQuery("option:selected",n),s=parseInt(r.attr("value"));0!=i.length&&i.click(function(){a.ts_datetimepicker({value:""}),t.val("")});a.data("xdsoft_datetimepicker")&&a.ts_datetimepicker("destroy");n.on("change",function(e){var t=jQuery("option:selected",jQuery(this)),i=parseInt(t.attr("value"));s=i,o(a,"",i)});a.ts_datetimepicker({lazyInit:!0,lang:"en",inline:!0,datepicker:!1,hours12:!1,format:"h:i A",formatTime:"h:i A",step:s,scrollTime:!0,timepickerScrollbar:!0,allowBlank:!0,onGenerate:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onShow:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onSelectDate:function(e,t){},onChangeDateTime:function(e,i){var a=i.val();t.val(a)}})}(jQuery(this))}),e.find(".ts-dateonly-picker-element").each(function(){!function(e){var t=e.find(".ts-datepicker-value"),i=(e.find(".ts-datepicker-value").val(),e.find(".ts-datepicker-clear")),a=parseInt(e.attr("data-year-start")),n=parseInt(e.attr("data-year-end"));0!=i.length&&i.click(function(){r.ts_datetimepicker({value:""}),t.val("")});e.find(".ts-datepicker").data("xdsoft_datetimepicker")&&e.find(".ts-datepicker").ts_datetimepicker("destroy");var r=e.find(".ts-datepicker").ts_datetimepicker({lang:"en",inline:!0,timepicker:!1,format:"m/d/Y",formatDate:"Y/m/d",allowBlank:!0,yearStart:a,yearEnd:n,onShow:function(e){},onSelectDate:function(e,t){},onChangeDateTime:function(e,i){var a=i.val();t.val(a)}})}(jQuery(this))}),e.find(".ts-datetime-picker-element").each(function(){!function(e){var t=e.find(".ts-datetimepicker-value"),i=(e.find(".ts-datetimepicker-value").val(),e.find(".ts-datetimepicker-clear")),a=e.find(".ts-datetimepicker-single"),n=e.find(".ts-datetimepicker-minutes"),r=jQuery("option:selected",n),s=parseInt(r.attr("value")),l=parseInt(e.attr("data-year-start")),d=parseInt(e.attr("data-year-end"));0!=i.length&&i.click(function(){a.ts_datetimepicker({value:""}),t.val("")});a.data("xdsoft_datetimepicker")&&a.ts_datetimepicker("destroy");n.on("change",function(e){var t=jQuery("option:selected",jQuery(this)),i=parseInt(t.attr("value"));s=i,o(a,"",i)});a.ts_datetimepicker({lang:"en",inline:!0,timepicker:!0,datepicker:!0,hours12:!1,format:"m/d/Y h:i A",formatDate:"m/d/Y",formatTime:"h:i A",step:s,scrollTime:!0,timepickerScrollbar:!0,allowBlank:!0,yearStart:l,yearEnd:d,onGenerate:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onShow:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onSelectDate:function(e,t){},onChangeDateTime:function(e,i){var a=i.val();t.val(a)}})}(jQuery(this))}),e.find(".ts-dateonly-range-element").each(function(){!function(e){var t=e.find(".ts-dateonlyrange-value"),i=(t.val(),e.find(".ts-dateonlyrange-clear"),e.find(".ts-dateonlyrange-start")),a=e.find(".ts-dateonlyrange-end"),n=e.find(".ts-dateonlyrange-output-start"),r=e.find(".ts-dateonlyrange-output-end"),s=parseInt(e.attr("data-year-start")),o=parseInt(e.attr("data-year-end")),d="",c="";i.data("xdsoft_datetimepicker")&&i.ts_datetimepicker("destroy");a.data("xdsoft_datetimepicker")&&a.ts_datetimepicker("destroy");i.ts_datetimepicker({lang:"en",inline:!0,timepicker:!1,datepicker:!0,hours12:!1,format:"m/d/Y",formatDate:"m/d/Y",formatTime:"h:i A",defaultSelect:!0,step:60,scrollTime:!0,timepickerScrollbar:!0,allowBlank:!0,yearStart:s,yearEnd:o,onGenerate:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onShow:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onSelectDate:function(e,t){},onChangeDateTime:function(e,s){l(i,a),d=i.val(),c=a.val(),t.val(d+"|"+c).trigger("change"),n.html(d),r.html(c)}}),a.ts_datetimepicker({lang:"en",inline:!0,timepicker:!1,datepicker:!0,hours12:!1,format:"m/d/Y",formatDate:"m/d/Y",formatTime:"h:i A",defaultSelect:!1,step:60,scrollTime:!0,timepickerScrollbar:!0,allowBlank:!0,yearStart:s,yearEnd:o,onGenerate:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onShow:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onSelectDate:function(e,t){},onChangeDateTime:function(e,s){l(i,a),d=i.val(),c=a.val(),t.val(d+"|"+c).trigger("change"),n.html(d),r.html(c)}});l(i,a)}(jQuery(this))}),e.find(".ts-datetime-range-element").each(function(){!function(e){var t=e.find(".ts-datetimerange-value"),i=(t.val(),e.find(".ts-datetimerange-clear"),e.find(".ts-datetimerange-start")),a=e.find(".ts-datetimerange-end"),n=(i.parent(),a.parent(),e.find(".ts-datetimerange-minutes")),r=jQuery("option:selected",n),s=parseInt(r.attr("value")),d=e.find(".ts-datetimerange-output-start"),c=e.find(".ts-datetimerange-output-end"),u=parseInt(e.attr("data-year-start")),f=parseInt(e.attr("data-year-end")),p=i.val(),h=a.val();n.on("change",function(e){var t=jQuery("option:selected",jQuery(this)),n=parseInt(t.attr("value"));s=n,o(i,a,n)}),i.data("xdsoft_datetimepicker")&&i.ts_datetimepicker("destroy");a.data("xdsoft_datetimepicker")&&a.ts_datetimepicker("destroy");i.ts_datetimepicker({lang:"en",inline:!0,timepicker:!0,datepicker:!0,hours12:!1,format:"m/d/Y h:i A",formatDate:"m/d/Y",formatTime:"h:i A",defaultSelect:!0,step:s,scrollTime:!0,timepickerScrollbar:!0,allowBlank:!0,yearStart:u,yearEnd:f,onGenerate:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onShow:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onSelectDate:function(e,t){},onChangeDateTime:function(e,n){l(i,a,s),p=i.val(),h=a.val(),t.val(p+"|"+h).trigger("change"),d.html(p),c.html(h)}}).promise().done(function(){}),a.ts_datetimepicker({lang:"en",inline:!0,timepicker:!0,datepicker:!0,hours12:!1,format:"m/d/Y h:i A",formatDate:"m/d/Y",formatTime:"h:i A",defaultSelect:!1,step:s,scrollTime:!0,timepickerScrollbar:!0,allowBlank:!0,yearStart:u,yearEnd:f,onGenerate:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onShow:function(e){jQuery(this).trigger("afterOpen.xdsoft")},onSelectDate:function(e,t){},onChangeDateTime:function(e,n){l(i,a,s),p=i.val(),h=a.val(),t.val(p+"|"+h).trigger("change"),d.html(p),c.html(h)}}).promise().done(function(){});setTimeout(function(){l(i,a,s)},250)}(jQuery(this))})}),e=null}function o(e,t,i){""!=e&&"undefined"!=e&&void 0!=e&&null!=e&&e.data("xdsoft_datetimepicker").setOptions({step:i}),""!=t&&"undefined"!=t&&void 0!=t&&null!=t&&t.data("xdsoft_datetimepicker").setOptions({step:i})}function l(e,t,i){var a=t.val();a=a.split(" ")[0],e.data("xdsoft_datetimepicker").setOptions({maxDate:a||!1});var n=e.val();n=function(e,t){var i=e.split("/"),a=new Date(parseInt(i[2],10),parseInt(i[0],10)-1,parseInt(i[1],10));return a.setTime(a.getTime()+864e5*t),i[0]=""+(a.getMonth()+1),i[0].length<2&&(i[0]="0"+i[0]),i[1]=""+a.getDate(),i[1].length<2&&(i[1]="0"+i[1]),i[2]=""+a.getFullYear(),i.join("/")}(n=n.split(" ")[0],1),t.data("xdsoft_datetimepicker").setOptions({minDate:n||!1})}function d(e,t,i){t=void 0!==t&&t,i=void 0!==i&&i;var a=Math.floor(e/3600);e-=3600*a,i&&24==a&&(a=0);var n=Math.floor(e/60);if(e-=60*n,i)r="";else if(a>=13){if(24==a)r=" AM";else r=" PM";a-=12}else if(12==a)r=" PM";else var r=" AM";return t?(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)+":"+(e<10?"0"+e:e)+r:(a<10?"0"+a:a)+":"+(n<10?"0"+n:n)+r}function c(e,t){t=d(t*=60),e.html(t)}var u=!1;"undefined"!=typeof noUiSlider&&void 0!==typeof noUiSlider&&"object"==typeof noUiSlider&&(u=!0),jQuery("#csf-modal-ts-composium-shortcode").addClass("ts-codestar-shortcode-generator");var f=jQuery("#ts-settings-statistics-shortcode-wrapper").length>0,p=jQuery("#csf-modal-ts-composium-shortcode"),h="",g=[],m=[];if(p.length>0){p.find(".csf-modal-select");var v=p.find(".csf-modal-insert");p.find(".csf-modal-header");if(f&&jQuery("#ts-composium-generator-input").val(""),f&&jQuery("body").on("click",".csf-shortcode-button.ts-composium-generator-trigger",function(e){e.preventDefault(),jQuery("#ts-settings-statistics-shortcode-wrapper").hide(),jQuery("#ts-composium-generator-input").val(""),p.show()}),f&&jQuery("body").on("click","#csf-modal-ts-composium-shortcode .csf-modal-insert",function(e){e.preventDefault();try{m=p.find(".csf-field:not(.hidden)").find(":input:not(.ignore)").serializeObjectCSF(),g=jQuery.parseJSON(p.find(".csf-field.csf-field-defaultsstorage").find(".ts-defaultsstorage-content").html()),h=Object.keys(m)[0]}catch(e){}setTimeout(function(){jQuery("#ts-settings-statistics-shortcode-wrapper").show()},250)}),"undefined"!=typeof Clipboard&&null!==Clipboard&&void 0!==Clipboard&&f){new Clipboard("#ts-composium-clipboard-button").off().on("success",function(e){e.clearSelection(),jQuery("#ts-settings-statistics-clipboard-success").slideFade(),jQuery("#ts-settings-statistics-clipboard-error").hide(),setTimeout(function(){jQuery("#ts-settings-statistics-clipboard-success").slideFade()},7e3)}).on("error",function(e){e.clearSelection(),jQuery("#ts-settings-statistics-clipboard-success").hide(),jQuery("#ts-settings-statistics-clipboard-error").slideFade(),setTimeout(function(){jQuery("#ts-settings-statistics-clipboard-error").slideFade()},7e3)})}jQuery("body").on("change",".ts-codestar-switcher-check",function(){var e=jQuery(this),t=e.parent().parent().siblings(".ts-codestar-value"),i=e.prop("checked");1==i?t.val("true").trigger("change"):0==i&&t.val("false").trigger("change")}),jQuery(document).ajaxComplete(function(i,o,l){l.hasOwnProperty("data")&&l.data.indexOf("csf-get-shortcode-ts-composium-shortcode")>=0&&(jQuery("#csf-modal-ts-composium-shortcode").find(".ts-css3-animations-wrapper").each(function(){var e=jQuery(this),t=e.find(".ts-css3-animations-select"),i=e.find(".ts-css3-animations-preview").find("span"),a=e.attr("data-connector"),n="true"==e.attr("data-chosen"),r=t.find("option:selected").attr("data-name");if("false"==e.attr("data-initialized")){if(0!=a.length&&jQuery("#"+a).val(r),t.on("change",function(e){var t=jQuery(this).val(),n=e.which||e.key;if(void 0!=n&&"undefined"!=n&&38!=n&&40!=n)return!1;jQuery(this).attr("data-option",t);var r=jQuery(this).find("option:selected").attr("data-value"),s=jQuery(this).find("option:selected").attr("data-group"),o=jQuery(this).find("option:selected").attr("data-name");"Standard WP Bakery Page Builder"==s?i.removeClass().addClass("wpb_start_animation wpb_"+r).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){jQuery(this).removeClass().addClass("wpb_hover_animation  wpb_"+r)}):i.removeClass().addClass("ts-viewport-css-"+r+" ts-animation-frame").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){jQuery(this).removeClass().addClass("ts-hover-css-"+r+" ts-animation-frame")}),0!=a.length&&jQuery('input[name="'+a+'"').val(o)}),n)try{t.csf_chosen()}catch(e){}e.attr("data-initialized","true")}}),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-font-icons-picker-parent").each(function(){if(!jQuery(this).hasClass("ts-font-icons-picker-initialized")){var e=jQuery(this).find(".ts-font-icons-picker"),t="true"==e.attr("data-chosen");e.find("select").fontIconPicker({theme:"fip-grey",emptyIcon:"true"==e.attr("data-empty"),emptyIconValue:e.attr("data-transparent"),iconsPerPage:parseInt(e.attr("data-pagecount")),hasSearch:"true"==e.attr("data-search"),allCategoryText:e.attr("data-text-allfonts"),unCategorizedText:e.attr("data-text-uncategorized"),searchPlaceholder:e.attr("data-text-searchicons"),windowDebounceDelay:200}).promise().done(function(){if(t)try{e.find(".icon-category-select").csf_chosen()}catch(e){}}),jQuery(this).addClass("ts-font-icons-picker-initialized")}}),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-devicetypes-container").each(function(){var e=jQuery(this),t="",i=jQuery(this).find('input.ts-devicetypes-datastring[name="'+jQuery(this).attr("data-input")+'"]');e.find(".ts-devicetypes-input-slider").each(function(){var e=jQuery(this).find(".csf-slider-ui"),t=jQuery(this).find("input"),i=t.data(),a=t.val()||0;e.hasClass("ui-slider")&&e.empty(),e.slider({range:"min",value:a,min:i.min,max:i.max,step:i.step,slide:function(e,i){t.val(i.value).trigger("change")}}),t.on("input",function(){e.slider("value",t.val())})}),e.find(".ts-devicetypes-item-input").on("change",function(){t="",e.find(".ts-devicetypes-item-input").each(function(e,i){var a=jQuery(i).attr("data-id"),n=jQuery(i).attr("data-unit"),r=jQuery(i).val(),s=null;jQuery.isNumeric(r)&&(s=r.match(/^[-+]?[0-9]+$/)?a+":"+jQuery(i).val()+n+";":a+":0"+n+";",t+=s)}),i.val(t)})}),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-tag-editor-wrapper").each(function(){var e=jQuery(this);"false"==e.attr("data-initialized")&&(e.find("input").TS_VCSC_TagEditor({initialTags:[],maxTags:0,maxLength:50,delimiter:e.attr("data-delimiter"),placeholder:e.attr("data-placeholder"),forceLowercase:"true"==e.attr("data-lowercase"),forceNumbersOnly:"true"==e.attr("data-numbersonly"),removeDuplicates:!0,clickDelete:"true"==e.attr("data-clickdelete"),animateDelete:175,sortable:"true"==e.attr("data-sortable"),autocomplete:null,onChange:function(){},beforeTagSave:function(){},beforeTagDelete:function(){}}),e.attr("data-initialized","true"))}),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-live-preview-wrapper").each(function(){var e=jQuery(this);if("false"==e.attr("data-initialized")){var t=jQuery(this).find(".ts-live-preview-selectbox"),i=jQuery(this).attr("data-preview"),a=jQuery(this).attr("data-connector"),n=t.find("option:selected").attr("data-name"),r=jQuery(this).find(".ts-live-preview-display"),s="true"==e.attr("data-chosen");if(0!=a.length&&jQuery("#"+a).val(n),"preloaders"==i&&(-1==t.find("option:selected").attr("data-value")||"-1"==t.find("option:selected").attr("data-value")?r.hide():r.show(),r.find(".ts-preloader-animation-"+t.find("option:selected").attr("data-value")).addClass("ts-live-preview-active")),t.on("change keydown keyup",function(e){var t=jQuery(this).val(),s=e.which||e.key;if(void 0!=s&&"undefined"!=s&&38!=s&&40!=s)return!1;jQuery(this).attr("data-option",t),"preloaders"==i&&(-1==t||"-1"==t?r.hide():r.show(),r.find(".ts-preloader-animation-main").removeClass("ts-live-preview-active").addClass("ts-live-preview-hidden"),r.find(".ts-preloader-animation-"+t).addClass("ts-live-preview-active")),0!=a.length&&jQuery("#"+a).val(n)}),s)try{t.csf_chosen()}catch(e){}e.attr("data-initialized","true")}}),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-advanced-tables-wrapper").each(function(){var e=jQuery(this);if("false"==e.attr("data-initialized")){var t=e.find("select.ts-advanced-tables-select-input"),i=e.find(".ts-advanced-tables-summary"),a=null,n="true"==e.attr("data-chosen"),r=i.find(".ts-advanced-tables-summary-rows"),s=i.find(".ts-advanced-tables-summary-columns"),o=i.find(".ts-advanced-tables-summary-created"),l=i.find(".ts-advanced-tables-summary-updated"),d=i.find(".ts-advanced-tables-summary-info"),c=i.attr("data-string-rows"),u=i.attr("data-string-columns"),f=i.attr("data-string-created"),p=i.attr("data-string-updated");if(t.on("change",function(){a=jQuery(this).find(":selected"),r.html(c+" "+a.attr("data-rows")),s.html(u+" "+a.attr("data-columns")),o.html(f+" "+a.attr("data-created")),l.html(p+" "+a.attr("data-updated")),d.html(TS_VCSC_Base64.decode(a.attr("data-info"))),v.show()}),n)try{t.csf_chosen()}catch(e){}e.attr("data-initialized","true")}}),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-conditionals-wrapper").each(function(){var e=jQuery(this);if(e.hasClass("ts-conditionals-initialized"))return!1;var t=e.find(".ts-conditionals-wrapper"),i="true"==e.attr("data-chosen"),s=t.attr("data-connector"),o=e.find(".ts-conditionals-aggregate"),l=o.val();l=TS_VCSC_Base64.decode(l),l=jQuery.parseJSON(l);var d=e.find(".ts-conditionals-autocomplete").attr("data-autocomplete");d=d.split(",");var c={viewerstatus:t.attr("data-string-viewerstatus"),none:t.attr("data-string-none"),everybody:t.attr("data-string-everybody"),loggedin:t.attr("data-string-loggedin"),external:t.attr("data-string-external"),userconditions:t.attr("data-string-userconditions"),userroles:t.attr("data-string-userroles"),userrights:t.attr("data-string-userrights"),othertags:t.attr("data-string-othertags"),yes:t.attr("data-string-yes"),no:t.attr("data-string-no")},u=e.find("select.ts-conditionals-viewerstatus").find("option:selected").attr("value"),f=e.find("select.ts-conditionals-restriction").find("option:selected").attr("value"),p=n(e,"userroles"),h=e.find("select.ts-conditionals-userscope").find("option:selected").attr("value"),g=e.find("input.ts-conditionals-usercaps").val(),m=e.find("select.ts-conditionals-otherscope").find("option:selected").attr("value"),v=n(e,"othertags"),y=n(e,"devicetypes"),k="";if(e.find("select.ts-conditionals-viewerstatus").on("change",function(){"everybody"==(u=jQuery(this).find("option:selected").attr("value"))||"external"==u?(e.find(".ts-conditionals-restrictions").hide(),f="none",h="any",g="",p="",e.find(".ts-conditionals-isloggedin input.ts-codestar-value[type=hidden]").val("false").trigger("change"),e.find(".ts-conditionals-restrictions").hide(),e.find(".ts-conditionals-userrights").hide(),e.find(".ts-conditionals-userroles").hide(),e.find("select.ts-conditionals-restriction").find("option").removeAttr("selected").prop("selected",!1),e.find("select.ts-conditionals-restriction").find('option[value="none"]').attr("selected","selected").prop("selected",!0),e.find("select.ts-conditionals-userscope").find("option").removeAttr("selected").prop("selected",!1),e.find("select.ts-conditionals-userscope").find('option[value="any"]').attr("selected","selected").prop("selected",!0),a(e,!1,""),e.find("input.ts-conditionals-usercaps").val(""),e.find(".ts-conditionals-userroles input.ts-conditionals-userrole").prop("checked",!1).removeAttr("checked")):"loggedin"==u&&e.find(".ts-conditionals-restrictions").show(),r(o,u,f,p,h,g,m,v,y,s,c)}),i)try{e.find("select.ts-conditionals-viewerstatus").csf_chosen()}catch(e){}if(e.find("select.ts-conditionals-restriction").on("change",function(){"none"==(f=jQuery(this).find("option:selected").attr("value"))?(h="any",g="",p="",e.find(".ts-conditionals-userrights").hide(),e.find(".ts-conditionals-userroles").hide(),e.find("select.ts-conditionals-userscope").find("option").removeAttr("selected").prop("selected",!1),e.find("select.ts-conditionals-userscope").find('option[value="any"]').attr("selected","selected").prop("selected",!0),a(e,!1,""),e.find("input.ts-conditionals-usercaps").val(""),e.find(".ts-conditionals-userroles input.ts-conditionals-userrole").prop("checked",!1).removeAttr("checked")):"userroles"==f?(h="any",g="",e.find(".ts-conditionals-userrights").hide(),e.find(".ts-conditionals-userroles").show(),e.find("select.ts-conditionals-userscope").find("option").removeAttr("selected").prop("selected",!1),e.find("select.ts-conditionals-userscope").find('option[value="any"]').attr("selected","selected").prop("selected",!0),a(e,!1,""),e.find("input.ts-conditionals-usercaps").val("")):"userrights"==f&&(p="",e.find(".ts-conditionals-userrights").show(),e.find(".ts-conditionals-userroles").hide(),e.find(".ts-conditionals-userroles input.ts-conditionals-userrole").prop("checked",!1).removeAttr("checked")),r(o,u,f,p,h,g,m,v,y,s,c)}),i)try{e.find("select.ts-conditionals-restriction").csf_chosen()}catch(e){}if(e.find(".ts-conditionals-userroles input.ts-conditionals-userrole").on("change",function(){p=n(e,"userroles"),r(o,u,f,p,h,g,m,v,y,s,c)}),e.find("select.ts-conditionals-userscope").on("change",function(){h=jQuery(this).find("option:selected").attr("value"),r(o,u,f,p,h,g,m,v,y,s,c)}),i)try{e.find("select.ts-conditionals-userscope").csf_chosen()}catch(e){}if(e.find("input.ts-conditionals-usercaps").TS_VCSC_TagEditor({initialTags:[],maxTags:0,maxLength:50,delimiter:", ",placeholder:"",forceLowercase:!0,forceNumbersOnly:!1,removeDuplicates:!0,clickDelete:!1,animateDelete:175,sortable:!0,autocomplete:{delay:100,source:d,position:{collision:"flip"},minLength:2},onChange:function(t,i,n){""!=d&&-1==jQuery.inArray(k,d)?(a(e,!0,k),k=""):(g=e.find("input.ts-conditionals-usercaps").val(),r(o,u,f,p,h,g,m,v,y,s,c))},beforeTagSave:function(e,t,i,a,n){k=n},beforeTagDelete:function(e,t,i,a){}}),e.find(".ts-conditionals-othertoggle input.ts-codestar-checkbox[type=checkbox]").on("change",function(){m="any",v="",e.find("select.ts-conditionals-otherscope").find("option").removeAttr("selected").prop("selected",!1),e.find("select.ts-conditionals-otherscope").find('option[value="any"]').attr("selected","selected").prop("selected",!0),e.find(".ts-conditionals-othertags input.ts-conditionals-othertag").prop("checked",!1).removeAttr("checked"),jQuery(this).prop("checked")?(e.find(".ts-conditionals-othertoggle input.ts-codestar-value[type=hidden]").val("true").trigger("change"),e.find(".ts-conditionals-othertags").show()):(e.find(".ts-conditionals-othertoggle input.ts-codestar-value[type=hidden]").val("false").trigger("change"),e.find(".ts-conditionals-othertags").hide()),r(o,u,f,p,h,g,m,v,y,s,c)}),e.find("select.ts-conditionals-otherscope").on("change",function(){m=jQuery(this).find("option:selected").attr("value"),r(o,u,f,p,h,g,m,v,y,s,c)}),i)try{e.find("select.ts-conditionals-otherscope").csf_chosen()}catch(e){}e.find(".ts-conditionals-othertags input.ts-conditionals-othertag").on("change",function(){v=n(e,"othertags"),r(o,u,f,p,h,g,m,v,y,s,c)}),e.find(".ts-conditionals-devicetoggle input.ts-codestar-checkbox[type=checkbox]").on("change",function(){y="",e.find(".ts-conditionals-devicetypes input.ts-conditionals-devicetype").prop("checked",!1).removeAttr("checked"),jQuery(this).prop("checked")?(e.find(".ts-conditionals-devicetoggle input.ts-codestar-value[type=hidden]").val("true").trigger("change"),e.find(".ts-conditionals-devicetypes").show()):(e.find(".ts-conditionals-devicetoggle input.ts-codestar-value[type=hidden]").val("false").trigger("change"),e.find(".ts-conditionals-devicetypes").hide()),r(o,u,f,p,h,g,m,v,y,s,c)}),e.find(".ts-conditionals-devicetypes input.ts-conditionals-devicetype").on("change",function(){y=n(e,"devicetypes"),r(o,u,f,p,h,g,m,v,y,s,c)}),r(o,u,f,p,h,g,m,v,y,s,c),e.addClass("ts-conditionals-initialized")}),s(),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-base64-textarea-wrapper").each(function(){$editor=jQuery(this).find(".ts-base64-textarea-editor"),$holder=jQuery(this).find(".ts-base64-textarea-input"),$editor.on("change keyup paste",function(){$holder.val(TS_VCSC_Base64.encode($editor.val()))}),$editor.val(TS_VCSC_Base64.decode($holder.val()))}),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-nouislider-input-slider-wrapper").find(".ts-nouislider-input-element").each(function(){if(!jQuery(this).hasClass("ts-nouislider-initialized")){var i=parseFloat(jQuery(this).attr("data-min")),a=parseFloat(jQuery(this).attr("data-max")),n=parseFloat(jQuery(this).attr("data-step")),r=parseFloat(jQuery(this).attr("data-value")),s=parseFloat(jQuery(this).attr("data-decimals")),o="true"==jQuery(this).attr("data-extract"),l=jQuery(this).attr("data-unit"),d=jQuery(this).attr("data-class"),c=jQuery("body").find(".ts-nouislider-input-element").length,u=jQuery(this).attr("id")+"-"+c;jQuery(this).attr("id",u);var f=document.getElementById(u),p="";void 0!==jQuery(this).data("callback")&&(p=jQuery(this).attr("data-callback"));var h=jQuery(this).siblings(".ts-nouislider-input-serial"),g=null;"responsive"==d?g=jQuery(this).parent().siblings(".ts-userpro-width-type-value"):"fixed"==d?g=jQuery(this).parent().siblings(".ts-userpro-width-type-value"):"general"==d&&1==o&&(g=jQuery(this).parent().siblings(".ts-nouislider-input-value"));var m=jQuery(this).siblings(".ts-nouislider-input-up"),v=jQuery(this).siblings(".ts-nouislider-input-down"),y=(wNumb({prefix:"",decimals:s,thousand:","}),"false"!=jQuery(this).attr("data-tooltip")&&[wNumb({decimals:s})]),k=t(i,a),S="true"==jQuery(this).attr("data-pips"),j="false"==jQuery(this).attr("data-pips")?"":{mode:"values",density:k[0],values:k[1],stepped:!0,format:wNumb({decimals:s,postfix:l})};noUiSlider.create(f,{range:{min:[i],max:[a]},start:r,handles:1,step:n,tooltips:y,behaviour:"extend-tap",connect:[!0,!1],format:wNumb({mark:".",decimals:s}),pips:j},!0),f.noUiSlider.set(r),jQuery(this).addClass("ts-nouislider-initialized"),"rating_maximum"!=p&&jQuery(this).attr("data-init","true"),f.noUiSlider.on("update",function(t,i){h.val(t),"responsive"==d?g.val(t+"%"):"fixed"==d?g.val(t+"px"):"general"==d&&(1==o&&null!=g?g.val(t+l):null!=g&&g.val(t)),0==o&&e(0,0,t,.25,2,"",p,S)}),f.noUiSlider.on("change",function(t,i){h.val(t).trigger("change"),"responsive"==d?g.val(t+"%").trigger("change"):"fixed"==d?g.val(t+"px").trigger("change"):"general"==d&&(1==o&&null!=g?g.val(t+l).trigger("change"):null!=g&&g.val(t).trigger("change")),0==o&&e(0,0,t,.25,2,"",p,S)}),m.on("click",function(){var e=f.noUiSlider.get(),t=parseFloat(e)+parseFloat(n);f.noUiSlider.set(t)}),v.on("click",function(){var e=f.noUiSlider.get(),t=parseFloat(e)-parseFloat(n);f.noUiSlider.set(t)}),h.on("change",function(){f.noUiSlider.set(jQuery(this).val())})}}),jQuery("#csf-modal-ts-composium-shortcode").find(".ts-nouislider-input-slider-wrapper").find(".ts-nouislider-range-element").each(function(){if(!jQuery(this).hasClass("ts-nouislider-initialized")){var e=parseFloat(jQuery(this).attr("data-min")),t=parseFloat(jQuery(this).attr("data-max")),i=parseFloat(jQuery(this).attr("data-step")),a=jQuery(this).attr("data-value"),n=parseFloat(jQuery(this).attr("data-decimals")),r=parseFloat(jQuery(this).attr("data-start")),s=parseFloat(jQuery(this).attr("data-end")),o=jQuery(this).siblings(".ts-nouislider-range-lower-down"),l=jQuery(this).siblings(".ts-nouislider-range-lower-up"),c=jQuery(this).siblings(".ts-nouislider-range-upper-down"),u=jQuery(this).siblings(".ts-nouislider-range-upper-up"),f=jQuery("#"+jQuery(this).parent().attr("data-output")),p=f.find(".ts-nouislider-range-start"),h=f.find(".ts-nouislider-range-end"),g=a.split(","),m="",v=d(5*g[0]*60),y=d(5*g[1]*60);p.html(v),h.html(y);var k=jQuery(this).attr("id"),S=document.getElementById(k),j=jQuery(this).siblings(".ts-nouislider-input-serial");noUiSlider.create(S,{range:{min:[e],max:[t]},margin:3,connect:[!1,!0,!1],orientation:"horizontal",start:[r,s],handles:2,step:i,format:wNumb({mark:".",decimals:n}),pips:{mode:"values",density:4,values:[0,72,144,216,288],stepped:!0,format:wNumb({encoder:function(e){return e=5*e/60},decoder:function(e){return e=60*e/5}})}}),jQuery(this).addClass("ts-nouislider-initialized"),S.noUiSlider.set([g[0],g[1]]),S.noUiSlider.on("update",function(e,t){g=S.noUiSlider.get(),v=d(5*g[0]*60),y=d(5*g[1]*60),j.val(g[0]+","+g[1]).trigger("change"),p.html(v),h.html(y)}),l.on("click",function(){m=S.noUiSlider.get(),S.noUiSlider.set([parseFloat(m[0])+1,null])}),o.on("click",function(){m=S.noUiSlider.get(),S.noUiSlider.set([parseFloat(m[0])-1,null])}),u.on("click",function(){m=S.noUiSlider.get(),S.noUiSlider.set([null,parseFloat(m[1])+1])}),c.on("click",function(){m=S.noUiSlider.get(),S.noUiSlider.set([null,parseFloat(m[1])-1])})}}))})}var y=0,k=null,S=null,j=null,b=[],x=[],Q=null});var TS_VCSC_Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="";if(""==e||void 0==e)return t;var i,a,n,r,s,o,l,d=0;for(e=TS_VCSC_Base64._utf8_encode(e);d<e.length;)r=(i=e.charCodeAt(d++))>>2,s=(3&i)<<4|(a=e.charCodeAt(d++))>>4,o=(15&a)<<2|(n=e.charCodeAt(d++))>>6,l=63&n,isNaN(a)?o=l=64:isNaN(n)&&(l=64),t=t+this._keyStr.charAt(r)+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(l);return t},decode:function(e){var t="";if(""==e||void 0==e)return t;var i,a,n,r,s,o,l=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)i=this._keyStr.indexOf(e.charAt(l++))<<2|(r=this._keyStr.indexOf(e.charAt(l++)))>>4,a=(15&r)<<4|(s=this._keyStr.indexOf(e.charAt(l++)))>>2,n=(3&s)<<6|(o=this._keyStr.indexOf(e.charAt(l++))),t+=String.fromCharCode(i),64!=s&&(t+=String.fromCharCode(a)),64!=o&&(t+=String.fromCharCode(n));return t=TS_VCSC_Base64._utf8_decode(t)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var a=e.charCodeAt(i);a<128?t+=String.fromCharCode(a):a>127&&a<2048?(t+=String.fromCharCode(a>>6|192),t+=String.fromCharCode(63&a|128)):(t+=String.fromCharCode(a>>12|224),t+=String.fromCharCode(a>>6&63|128),t+=String.fromCharCode(63&a|128))}return t},_utf8_decode:function(e){for(var t="",i=0,a=c1=c2=0;i<e.length;)(a=e.charCodeAt(i))<128?(t+=String.fromCharCode(a),i++):a>191&&a<224?(c2=e.charCodeAt(i+1),t+=String.fromCharCode((31&a)<<6|63&c2),i+=2):(c2=e.charCodeAt(i+1),c3=e.charCodeAt(i+2),t+=String.fromCharCode((15&a)<<12|(63&c2)<<6|63&c3),i+=3);return t}};!function(e){var t,i,a=e.event;t=a.special.debouncedresize={setup:function(){e(this).on("resize",t.handler)},teardown:function(){e(this).off("resize",t.handler)},handler:function(e,n){var r=this,s=arguments,o=function(){e.type="debouncedresize",a.dispatch.apply(r,s)};i&&clearTimeout(i),n?o():i=setTimeout(o,t.threshold)},threshold:150},e.event.special.debouncedresize.threshold=250}(jQuery),function(e){e.fn.TS_VCSC_TagEditorInput=function(){var t=" ",i=e(this),a=parseInt(i.css("fontSize")),n=e("<span/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),letterSpacing:i.css("letterSpacing"),whiteSpace:"nowrap"});return n.insertAfter(i),i.bind("keyup keydown focus",function(){if(t!==(t=i.val())){n.text(t);var e=n.width()+a;20>e&&(e=20),e!=i.width()&&i.width(e)}})},e.fn.TS_VCSC_TagEditor=function(t,a,n){function r(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}var s,o=e.extend({},e.fn.TS_VCSC_TagEditor.defaults,t);if(o.dregex=new RegExp("["+o.delimiter.replace("-","-")+"]","g"),"string"==typeof t){var l=[];return this.each(function(){var i=e(this),r=i.data("options"),s=i.next(".tag-editor");if("getTags"==t)l.push({field:i[0],editor:s,tags:s.data("tags")});else if("addTag"==t){if(r.maxTags&&s.data("tags").length>=r.maxTags)return!1;e('<li><div class="tag-editor-spacer">&nbsp;'+r.delimiter[0]+'</div><div class="tag-editor-tag"></div><div class="tag-editor-delete"><i></i></div></li>').appendTo(s).find(".tag-editor-tag").html('<input type="text" maxlength="'+r.maxLength+'">').addClass("active").find("input").val(a).blur(),n?e(".placeholder",s).remove():s.click()}else"removeTag"==t?(e(".tag-editor-tag",s).filter(function(){return e(this).text()==a}).closest("li").find(".tag-editor-delete").click(),n||s.click()):"destroy"==t&&i.removeClass("tag-editor-hidden-src").removeData("options").off("focus.tag-editor").next(".tag-editor").remove()}),"getTags"==t?l:this}return window.getSelection&&e(document).off("keydown.tag-editor").on("keydown.tag-editor",function(t){if(8==t.which||46==t.which||t.ctrlKey&&88==t.which){try{var a=getSelection(),n="BODY"==document.activeElement.tagName?e(a.getRangeAt(0).startContainer.parentNode).closest(".tag-editor"):0}catch(t){n=0}if(a.rangeCount>0&&n&&n.length){var r=[],s=a.toString().split(n.prev().data("options").dregex);for(i=0;i<s.length;i++){var o=e.trim(s[i]);o&&r.push(o)}return e(".tag-editor-tag",n).each(function(){~e.inArray(e(this).text(),r)&&e(this).closest("li").find(".tag-editor-delete").click()}),!1}}}),this.each(function(){function t(){!o.placeholder||l.length||e(".deleted, .placeholder, input",d).length||d.append('<li class="placeholder"><div>'+o.placeholder+"</div></li>")}function i(i){var a=l.toString();l=e(".tag-editor-tag:not(.deleted)",d).map(function(t,i){var a=e.trim(e(this).hasClass("active")?e(this).find("input").val():e(i).text());if(a)return a}).get(),d.data("tags",l),n.val(l.join(o.delimiter[0])),i||a!=l.toString()&&o.onChange(n,d,l),t()}function a(t){var a,s=t.closest("li"),c=t.val().replace(/ +/," ").split(o.dregex),u=t.data("old_tag"),f=l.slice(0),p=!1;c=c.filter(function(e){return e});for(var h=0;h<c.length;h++)if(g=e.trim(c[h]).slice(0,o.maxLength),o.forceLowercase&&(g=g.toLowerCase()),o.forceNumbersOnly&&(g=g.replace(/\D/g,"")),a=o.beforeTagSave(n,d,f,u,g),g=a||g,!1!==a&&g&&(o.removeDuplicates&&~e.inArray(g,f)&&e(".tag-editor-tag:not(.active)",d).each(function(t){e(this).text()==g&&e(this).closest("li").remove()}),f.push(g),s.before('<li><div class="tag-editor-spacer">&nbsp;'+o.delimiter[0]+'</div><div class="tag-editor-tag">'+r(g)+'</div><div class="tag-editor-delete"><i></i></div></li>'),o.maxTags&&f.length>=o.maxTags)){p=!0;break}t.attr("maxlength",o.maxLength).removeData("old_tag").val(""),p?t.blur():t.focus(),i()}var n=e(this),l=[],d=e("<ul "+(o.clickDelete?'oncontextmenu="return false;" ':"")+'class="tag-editor"></ul>').insertAfter(n);n.addClass("tag-editor-hidden-src").data("options",o).on("focus.tag-editor",function(){d.click()}),d.append('<li style="width:1px">&nbsp;</li>');var c='<li><div class="tag-editor-spacer">&nbsp;'+o.delimiter[0]+'</div><div class="tag-editor-tag"></div><div class="tag-editor-delete"><i></i></div></li>';d.on("click",function(t,i){var a,n,r=99999;if(!window.getSelection||""==getSelection())return o.maxTags&&d.data("tags").length>=o.maxTags?(d.find("input").blur(),!1):(s=!0,e("input:focus",d).blur(),!!s&&(s=!0,e(".placeholder",d).remove(),i&&i.length?n="before":e(".tag-editor-tag",d).each(function(){var s=e(this),o=s.offset(),l=o.left,d=o.top;t.pageY>=d&&t.pageY<=d+s.height()&&(t.pageX<l?(n="before",a=l-t.pageX):(n="after",a=t.pageX-l-s.width()),a<r&&(r=a,i=s))}),"before"==n?e(c).insertBefore(i.closest("li")).find(".tag-editor-tag").click():"after"==n?e(c).insertAfter(i.closest("li")).find(".tag-editor-tag").click():e(c).appendTo(d).find(".tag-editor-tag").click(),!1))}),d.on("click",".tag-editor-delete",function(a){if(e(this).prev().hasClass("active"))return e(this).closest("li").find("input").caretme(-1),!1;var r=e(this).closest("li"),s=r.find(".tag-editor-tag");return!1!==o.beforeTagDelete(n,d,l,s.text())&&(s.addClass("deleted").animate({width:0},o.animateDelete,function(){r.remove(),t()}),i(),!1)}),o.clickDelete&&d.on("mousedown",".tag-editor-tag",function(a){if(a.ctrlKey||a.which>1){var r=e(this).closest("li"),s=r.find(".tag-editor-tag");return!1!==o.beforeTagDelete(n,d,l,s.text())&&(s.addClass("deleted").animate({width:0},o.animateDelete,function(){r.remove(),t()}),i(),!1)}}),d.on("click",".tag-editor-tag",function(t){if(o.clickDelete&&(t.ctrlKey||t.which>1))return!1;if(!e(this).hasClass("active")){var i=e(this).text(),a=Math.abs((e(this).offset().left-t.pageX)/e(this).width()),n=parseInt(i.length*a),s=e(this).html('<input type="text" maxlength="'+o.maxLength+'" value="'+r(i)+'">').addClass("active").find("input");if(s.data("old_tag",i).TS_VCSC_TagEditorInput().focus().caretme(n),o.autocomplete){var l=e.extend({},o.autocomplete),c="select"in l?o.autocomplete.select:"";l.select=function(t,i){c&&c(t,i),setTimeout(function(){d.trigger("click",[e(".active",d).find("input").closest("li").next("li").find(".tag-editor-tag")])},20)},s.autocomplete(l)}}return!1}),d.on("blur","input",function(c){c.stopPropagation();var u=e(this),f=(u.closest("li"),u.data("old_tag")),p=e.trim(u.val().replace(/ +/," ").replace(o.dregex,o.delimiter[0]));if(p){if(p.indexOf(o.delimiter[0])>=0)return void a(u);if(p!=f)if(o.forceLowercase&&(p=p.toLowerCase()),o.forceNumbersOnly&&(p=p.replace(/\D/g,"")),cb_val=o.beforeTagSave(n,d,l,f,p),p=cb_val||p,!1===cb_val||""==p){if(f)return u.val(f).focus(),s=!1,void i();try{u.closest("li").remove()}catch(c){}f&&i()}else o.removeDuplicates&&e(".tag-editor-tag:not(.active)",d).each(function(t){e(this).text()==p&&e(this).closest("li").remove()})}else{if(f&&!1===o.beforeTagDelete(n,d,l,f))return u.val(f).focus(),s=!1,void i();try{u.closest("li").remove()}catch(c){}f&&i()}u.parent().html(r(p)).removeClass("active"),p!=f&&i(),t()});var u;d.on("paste","input",function(t){e(this).removeAttr("maxlength"),(u=e(this)).trigger("change"),setTimeout(function(){a(u)},30)});var f;d.on("keypress","input",function(t){o.delimiter.indexOf(String.fromCharCode(t.which))>=0&&(f=e(this),setTimeout(function(){a(f)},20))}),d.on("keydown","input",function(t){var i=e(this);if((37==t.which||!o.autocomplete&&38==t.which)&&!i.caretme()||8==t.which&&!i.val()){return(a=i.closest("li").prev("li").find(".tag-editor-tag")).length?a.click().find("input").caretme(-1):!i.val()||o.maxTags&&d.data("tags").length>=o.maxTags||e(c).insertBefore(i.closest("li")).find(".tag-editor-tag").click(),!1}if((39==t.which||!o.autocomplete&&40==t.which)&&i.caretme()==i.val().length){return(r=i.closest("li").next("li").find(".tag-editor-tag")).length?r.click().find("input").caretme(0):i.val()&&d.click(),!1}if(9==t.which){if(t.shiftKey){var a=i.closest("li").prev("li").find(".tag-editor-tag");if(a.length)a.click().find("input").caretme(0);else{if(!i.val()||o.maxTags&&d.data("tags").length>=o.maxTags)return n.attr("disabled","disabled"),void setTimeout(function(){n.removeAttr("disabled")},30);e(c).insertBefore(i.closest("li")).find(".tag-editor-tag").click()}return!1}if((r=i.closest("li").next("li").find(".tag-editor-tag")).length)r.click().find("input").caretme(0);else{if(!i.val())return;d.click()}return!1}if(!(46!=t.which||e.trim(i.val())&&i.caretme()!=i.val().length)){var r=i.closest("li").next("li").find(".tag-editor-tag");return r.length?r.click().find("input").caretme(0):i.val()&&d.click(),!1}if(13==t.which)return d.trigger("click",[i.closest("li").next("li").find(".tag-editor-tag")]),o.maxTags&&d.data("tags").length>=o.maxTags&&d.find("input").blur(),!1;if(36!=t.which||i.caretme()){if(35==t.which&&i.caretme()==i.val().length)d.find(".tag-editor-tag").last().click();else if(27==t.which)return i.val(i.data("old_tag")?i.data("old_tag"):"").blur(),!1}else d.find(".tag-editor-tag").first().click()});for(var p=o.initialTags.length?o.initialTags:n.val().split(o.dregex),h=0;h<p.length&&!(o.maxTags&&h>=o.maxTags);h++){var g=e.trim(p[h].replace(/ +/," "));g&&(o.forceLowercase&&(g=g.toLowerCase()),l.push(g),d.append('<li><div class="tag-editor-spacer">&nbsp;'+o.delimiter[0]+'</div><div class="tag-editor-tag">'+r(g)+'</div><div class="tag-editor-delete"><i></i></div></li>'))}i(!0),o.sortable&&e.fn.sortable&&d.sortable({distance:5,cancel:".tag-editor-spacer, input",helper:"clone",update:function(){i()}})})},e.fn.TS_VCSC_TagEditor.defaults={initialTags:[],maxTags:0,maxLength:50,delimiter:",;",placeholder:"",forceLowercase:!0,forceNumbersOnly:!1,removeDuplicates:!0,clickDelete:!1,animateDelete:175,sortable:!0,autocomplete:null,onChange:function(){},beforeTagSave:function(){},beforeTagDelete:function(){}}}(jQuery),function(e,t){var i=document.createElement("input"),a={setSelectionRange:"setSelectionRange"in i||"selectionStart"in i,createTextRange:"createTextRange"in i||"selection"in document},n=/\r\n/g,r=/\r/g,s=function(t){return void 0!==t.value?t.value:e(t).text()},o=function(e,t){var i=s(e).replace(r,"").length;return void 0===t&&(t=i),(t=Math.floor(t))<0&&(t=i+t),t<0&&(t=0),t>i&&(t=i),t},l=function(e,t,i,a){this.start=e||0,this.end=t||0,this.length=i||0,this.text=a||""};l.prototype.toString=function(){return JSON.stringify(this,null,"    ")};var d=function(e){if(e)return a.setSelectionRange?function(e){return e.selectionStart}(e):a.createTextRange?function(e){var t,i,a,r,o;return e.focus(),e.focus(),(t=document.selection.createRange())&&t.parentElement()===e?(a=s(e),r=a.length,(i=e.createTextRange()).moveToBookmark(t.getBookmark()),(o=e.createTextRange()).collapse(!1),i.compareEndPoints("StartToEnd",o)>-1?a.replace(n,"\n").length:-i.moveStart("character",-r)):0}(e):void 0},c=function(e,t){e.focus(),t=o(e,t),a.setSelectionRange?function(e,t){e.setSelectionRange(t,t)}(e,t):a.createTextRange&&function(e,t){var i=e.createTextRange();i.move("character",t),i.select()}(e,t)},u=function(e){if(e)return a.setSelectionRange?function(e){var t=new l;t.start=e.selectionStart,t.end=e.selectionEnd;var i=Math.min(t.start,t.end),a=Math.max(t.start,t.end);return t.length=a-i,t.text=s(e).substring(i,a),t}(e):a.createTextRange?function(e){var t=new l;e.focus();var i=document.selection.createRange();if(i&&i.parentElement()===e){var a,n,r,o,d=0,c=0,u=s(e);a=u.length,n=u.replace(/\r\n/g,"\n"),(r=e.createTextRange()).moveToBookmark(i.getBookmark()),(o=e.createTextRange()).collapse(!1),r.compareEndPoints("StartToEnd",o)>-1?d=c=a:(d=-r.moveStart("character",-a),d+=n.slice(0,d).split("\n").length-1,r.compareEndPoints("EndToEnd",o)>-1?c=a:(c=-r.moveEnd("character",-a),c+=n.slice(0,c).split("\n").length-1)),d-=u.substring(0,d).split("\r\n").length-1,c-=u.substring(0,c).split("\r\n").length-1,t.start=d,t.end=c,t.length=t.end-t.start,t.text=n.substr(t.start,t.length)}return t}(e):void 0},f=function(e,t,i){t=o(e,t),i=o(e,i),a.setSelectionRange?function(e,t,i){e.setSelectionRange(t,i)}(e,t,i):a.createTextRange&&function(e,t,i){var a=e.createTextRange();a.moveEnd("textedit",-1),a.moveStart("character",t),a.moveEnd("character",i-t),a.select()}(e,t,i)};e.extend(e.fn,{caretme:function(){var t=this.filter("input, textarea");if(0===arguments.length){var i=t.get(0);return d(i)}if("number"==typeof arguments[0]){var a=arguments[0];t.each(function(e,t){c(t,a)})}else{var n=arguments[0];t.each(function(t,i){!function(t,i){var a=d(t),n=s(t).replace(r,""),o=+(a+i.length+(n.length-a)),l=+t.getAttribute("maxlength");if(function(e,t){return e.hasAttribute?e.hasAttribute(t):void 0!==e[t]}(t,"maxlength")&&o>l){var u=i.length-(o-l);i=i.substr(0,u)}!function(t,i){void 0!==t.value?t.value=i:e(t).text(i)}(t,n.substr(0,a)+i+n.substr(a)),c(t,a+i.length)}(i,n)})}return this},rangeme:function(){var t=this.filter("input, textarea");if(0===arguments.length){var i=t.get(0);return u(i)}if("number"==typeof arguments[0]){var a=arguments[0],n=arguments[1];t.each(function(e,t){f(t,a,n)})}else{var r=arguments[0];t.each(function(t,i){!function(t,i){var a=e(t),n=a.val(),r=u(t),s=+(r.start+i.length+(n.length-r.end)),o=+a.attr("maxlength");if(a.is("[maxlength]")&&s>o){var l=i.length-(s-o);i=i.substr(0,l)}var d=n.substr(0,r.start),c=n.substr(r.end);a.val(d+i+c);var p=r.start,h=p+i.length;f(t,r.length?p:h,h)}(i,r)})}return this},selectAll:function(){return this.each(function(t,i){!function(t){var i=e(t);i.is("input, textarea")||t.select?i.select():a.setSelectionRange?function(e){var t=window.getSelection(),i=document.createRange();i.selectNodeContents(e),t.removeAllRanges(),t.addRange(i)}(t):a.createTextRange&&function(e){var t=document.body.createTextRange();t.moveToElementText(e),t.select()}(t)}(i)})}}),e.extend(e,{deselectAll:function(){return document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),this}})}(window.jQuery||window.Zepto||window.$);