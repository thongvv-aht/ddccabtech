!function(t,e,n){"use strict";function i(t,e){var n=null;return function(){var i=this,r=arguments;null===n&&(n=setTimeout(function(){t.apply(i,r),n=null},e))}}var r=function(){var t={};return function(e){if(t[e]!==n)return t[e];var i=document.createElement("div").style,r=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+["webkit","moz","ms","o"].join(r+" ")+r).split(" ");for(var s in a)if(a[s]in i)return t[e]=a[s];return t[e]=!1}}(),a="http://www.w3.org/2000/svg",s=function(){var t;return function(){if(t!==n)return t;var e=document.createElement("div");return e.innerHTML="<svg/>",t=e.firstChild&&e.firstChild.namespaceURI===a}}(),o=t(e),l=r("transform"),u={preloader:!0,itemContainer:"ul",itemSelector:"li",start:"center",fadeIn:500,grayout:!0,mirror:!0,mirrorHeight:10,loop:!1,autoplay:!1,pauseOnHover:!0,style:"coverflow",spacing:-.6,maxwidth:320,sidespace:30,click:!0,keyboard:!0,scrollwheel:!0,touch:!0,nav:!1,buttons:!1,buttonPrev:"Previous",buttonNext:"Next",onItemSwitch:!1},c={main:"ts-flipster-wrapper",active:"ts-flipster-active",processing:"ts-flipster-processing",container:"ts-flipster-container",grayout:"ts-flipster-grayout",nav:"ts-flipster-nav",navChild:"ts-flipster-nav-child",navItem:"ts-flipster-nav-item",navLink:"ts-flipster-nav-link",navCurrent:"ts-flipster-nav-item-current",navCategory:"ts-flipster-nav-item-category",navCategoryLink:"ts-flipster-nav-link-category",button:"ts-flipster-button",buttonPrev:"ts-flipster-button-prev",buttonNext:"ts-flipster-button-next",item:"ts-flipster-item",itemCurrent:"ts-flipster-item-current",itemPast:"ts-flipster-item-past",itemFuture:"ts-flipster-item-future",itemContent:"ts-flipster-item-content"},f=new RegExp("\\b("+c.itemCurrent+"|"+c.itemPast+"|"+c.itemFuture+")(.*?)(\\s|$)","g"),p=new RegExp("\\s\\s+","g");t.fn.TS_VCSC_Flipster=function(r){if("string"==typeof r){var h=Array.prototype.slice.call(arguments,1);return this.each(function(){var e=t(this).data("methods");return e[r]?e[r].apply(this,h):this})}var d=t.extend({},u,r);return this.each(function(){function r(t){var e="next"===t?d.buttonNext:d.buttonPrev;return"custom"!==d.buttons&&s?'<svg viewBox="0 0 13 20" xmlns="'+a+'" aria-labelledby="title"><title>'+e+'</title><polyline points="10,3 3,10 10,17"'+("next"===t?' transform="rotate(180 6.5,10)"':"")+"/></svg>":e}function u(e){return e=e||"next",t('<button class="'+c.button+" "+("next"===e?c.buttonNext:c.buttonPrev)+'" role="button" />').html(r(e)).on("click",function(t){I(e),t.preventDefault()})}function h(){d.buttons&&z.length>1&&(U.find("."+c.button).remove(),U.append(u("prev"),u("next")))}function v(){var e={};!d.nav||z.length<=1||(M&&M.remove(),M=t('<ul class="'+c.nav+" "+c.nav+"-"+d.nav+'" role="navigation" />'),O=t(""),z.each(function(n){var i=t(this).data("flip-category"),r=n+1,a=t('<a href="#" class="'+c.navLink+'">'+r+"</a>").data("index",n);if(O=O.add(a),i){if(!e[i]){var s=t('<li class="'+c.navItem+" "+c.navCategory+'">'),o=t('<a href="#" class="'+c.navLink+" "+c.navCategoryLink+'" data-flip-category="'+i+'">'+i+"</a>").data("category",i).data("index",n);e[i]=t('<ul class="'+c.navChild+'" />'),O=O.add(o),s.append(o,e[i]).appendTo(M)}e[i].append(a)}else M.append(a);a.wrap('<li class="'+c.navItem+'">')}),M.on("click","a",function(e){var n=t(this).data("index");n>=0&&(I(n),e.preventDefault())}),"after"===d.nav?U.append(M):U.prepend(M),B=M.find("."+c.navItem))}function m(){if(d.nav){var e=A.data("flip-category");B.removeClass(c.navCurrent),O.filter(function(){return t(this).data("index")===X||e&&t(this).data("category")===e}).parent().addClass(c.navCurrent)}}function g(){U.css("transition","none"),L.css("transition","none"),z.css("transition","none")}function y(){U.css("transition",""),L.css("transition",""),z.css("transition","")}function C(){var e,n=0;return z.each(function(){(e=t(this).height())>n&&(n=e)}),n}function w(t){if(t&&g(),N=L.width(),L.attr("data-width-current",N),x(N,!1),F=C(),d.mirror&&(F+=F/100*d.mirrorHeight),L.height(F),!N)return void(R=R||setInterval(function(){w(t)},500));R&&(clearInterval(R),R=!1),d.buttons&&z.length>1&&U.find("."+c.button).each(function(t){jQuery(this).css("margin-top","-"+jQuery(this).outerHeight()/2+"px"),M&&"before"===d.nav?jQuery(this).css("top",F/2+M.height()+"px"):jQuery(this).css("top",F/2+"px")}),b(t)}function x(t,e){(parseInt(L.attr("data-width-last"))!=t||e)&&($=t-2*d.sidespace<d.maxwidth?t-2*d.sidespace:d.maxwidth,z.each(function(t){jQuery(this).css("max-width",$+"px")}),d.mirror&&U.find("img").reflect({height:1/d.mirrorHeight,opacity:.5}),L.attr("data-width-last",t))}function b(e){z.each(function(n){var i,r,a=t(this);a.attr("class",function(t,e){return e&&e.replace(f,"").replace(p," ")}),i=a.outerWidth(),0!==d.spacing&&a.css("margin-right",i*d.spacing+"px"),r=a.position().left,V[n]=-1*(r+i/2-N/2),n===z.length-1&&(k(),e&&setTimeout(y,1))})}function k(){var e,i,r,a=z.length;z.each(function(n){e=t(this),i=" ",n===X?(i+=c.itemCurrent,r=a+1):n<X?(i+=c.itemPast+" "+c.itemPast+"-"+(X-n),r=n):(i+=c.itemFuture+" "+c.itemFuture+"-"+(n-X),r=a-n),e.css("z-index",r).attr("class",function(t,e){return e&&e.replace(f,"").replace(p," ")+i})}),X>=0&&(N&&V[X]!==n||w(!0),l?L.css("transform","translateX("+V[X]+"px)"):L.css({left:V[X]+"px"})),m()}function I(t){var e=X;if(!(z.length<=1))return"prev"===t?X>0?X--:d.loop&&(X=z.length-1):"next"===t?X<z.length-1?X++:d.loop&&(X=0):"number"==typeof t?X=t:t!==n&&(X=z.index(t)),A=z.eq(X),X!==e&&d.onItemSwitch&&d.onItemSwitch.call(U,z[X],z[e]),d.grayout&&(jQuery(z).removeClass(c.itemCurrent).addClass(c.grayout),jQuery(A).addClass(c.itemCurrent).removeClass(c.grayout)),"coverflow"!=d.style&&"flat"!=d.style||b(),k(),U}function j(t){return d.autoplay=t||d.autoplay,clearInterval(q),q=setInterval(function(){var t=X;I("next"),t!==X||d.loop||clearInterval(q)},d.autoplay),U}function D(){return clearInterval(q),q=0,U}function Q(t){return D(),d.autoplay&&t&&(q=-1),U}function H(){U.hasClass(c.active)||(U.removeClass(c.processing),w(!0),d.preloader&&U.parents(".ts-lightbox-gallery-flipster-main").find(".ts-lightbox-gallery-flipster-preloader").hide(),U.removeAttr("style").hide().addClass(c.active),w(!0),U.fadeIn(d.fadeIn))}function T(){if(!(z.length<=1))return z.addClass(c.item).each(function(){var e=t(this);e.children("."+c.itemContent).length||e.wrapInner('<div class="'+c.itemContent+'" />')}),d.click?"carousel"==d.style?z.find("."+c.itemContent).on("click.flipster touchend.flipster",function(n){t(this).hasClass(c.itemCurrent)&&t(this).hasClass("kraut-lightbox-window")?(n.preventDefault(),e.open(t.trim(t(this).find("a.kraut-lightbox-disabled").attr("href")),"_blank")):W||(t(this).parent().hasClass(c.itemCurrent)||n.preventDefault(),I(this.parentElement))}):z.on("click.flipster touchend.flipster",function(n){t(this).hasClass(c.itemCurrent)&&t(this).hasClass("kraut-lightbox-window")?(n.preventDefault(),e.open(t.trim(t(this).find("a.kraut-lightbox-disabled").attr("href")),"_blank")):W||(t(this).hasClass(c.itemCurrent)||n.preventDefault(),I(this))}):"carousel"==d.style?z.find("."+c.itemContent).on("click.flipster touchend.flipster",function(n){t(this).hasClass(c.itemCurrent)&&t(this).hasClass("kraut-lightbox-window")&&(n.preventDefault(),e.open(t.trim(t(this).find("a.kraut-lightbox-disabled").attr("href")),"_blank"))}):z.on("click.flipster touchend.flipster",function(n){t(this).hasClass(c.itemCurrent)&&t(this).hasClass("kraut-lightbox-window")&&(n.preventDefault(),e.open(t.trim(t(this).find("a.kraut-lightbox-disabled").attr("href")),"_blank"))}),d.grayout&&z.on("mouseenter.flipster",function(t){jQuery(this).hasClass(c.itemCurrent)||jQuery(this).removeClass(c.grayout)}).on("mouseleave.flipster",function(t){jQuery(this).hasClass(c.itemCurrent)||jQuery(this).addClass(c.grayout)}),h(),v(),X>=0&&I(X),U}function _(t){d.keyboard&&(t[0].tabIndex=0,t.on("keydown.flipster",i(function(t){var e=t.which;37!==e&&39!==e||(I(37===e?"prev":"next"),t.preventDefault())},250,!0)))}function P(t){if(d.scrollwheel){var e,n,r=!1,a=0,s=0,l=0;t.on("mousewheel.flipster wheel.flipster",function(){r=!0}).on("mousewheel.flipster wheel.flipster",i(function(t){clearTimeout(s),s=setTimeout(function(){a=0,l=0},300),t=t.originalEvent,l+=t.wheelDelta||-1*(t.deltaY+t.deltaX),Math.abs(l)<25||(a++,n!==(e=l>0?"prev":"next")&&(a=0),n=e,(a<6||a%3==0)&&I(e),l=0)},50)),o.on("mousewheel.flipster wheel.flipster",function(t){r&&(t.preventDefault(),r=!1)})}}function S(t){if(d.touch){if(1==$TS_VCSC_Hammer_ReleaseNew){var e=document.getElementById(t.attr("id"));new Hammer(e,{prevent_default:!0}).on("swipeleft",function(t){return t.preventDefault(),W=!0,I("next"),!1}).on("swiperight",function(t){return t.preventDefault(),W=!0,I("prev"),!1})}else(e=new Hammer(t)).on("swipeleft",function(t){return I("next"),W=!0,!1}).on("swiperight",function(t){return W=!0,I("prev"),!1});t.on("touchend touchcancel",function(t){W=!1})}}var E,L,N,F,R,z,A,M,B,O,U=t(this),V=[],X=0,$=320,q=!1,W=!1;E={jump:I,next:function(){return I("next")},prev:function(){return I("prev")},play:j,stop:D,pause:Q,index:T},U.data("methods",E),U.hasClass(c.active)||function(){var t;if(U.css("visibility","hidden"),L=U.find(d.itemContainer).addClass(c.container),z=L.find(d.itemSelector),N=L.width(),L.attr("data-width-current",N).attr("data-width-last",N),x(N,!0),T(),z.length<=1)return void U.css("visibility","");t=!!d.style&&"ts-flipster-"+d.style.split(" ").join(" ts-flipster-"),U.addClass([c.main,l?"flipster-transform":" flipster-no-transform",t,d.click?"ts-flipster-click":""].join(" "));var e=U.find("img");if(d.start&&(X="center"===d.start?Math.floor(z.length/2):d.start),I(X),e.length>1){var n=0;e.ensureLoad(function(){++n>=e.length&&H()}),setTimeout(H,1e4)}else setTimeout(H,500);o.on("resize.flipster",i(w,400)),d.autoplay&&j(),d.pauseOnHover&&L.on("mouseenter.flipster",function(){q?Q(!0):D()}).on("mouseleave.flipster",function(){-1===q&&j()}),_(U),P(L),S(L)}()})}}(jQuery,window);