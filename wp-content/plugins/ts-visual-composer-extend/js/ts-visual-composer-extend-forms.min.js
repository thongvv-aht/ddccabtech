!function(t,e){if("function"==typeof define&&define.amd)define(["exports","module"],e);else if("undefined"!=typeof exports&&"undefined"!=typeof module)e(exports,module);else{var i={exports:{}};e(i.exports,i),t.autosize=i.exports}}(this,function(t,e){"use strict";function i(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=document.createEvent("Event");e.initEvent("autosize:destroy",!0,!1),t.dispatchEvent(e)}}function n(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName){var e=document.createEvent("Event");e.initEvent("autosize:update",!0,!1),t.dispatchEvent(e)}}var a="function"==typeof Set?new Set:function(){var t=[];return{has:function(e){return Boolean(t.indexOf(e)>-1)},add:function(e){t.push(e)},delete:function(e){t.splice(t.indexOf(e),1)}}}(),r=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((r=function(t){return t}).destroy=function(t){return t},r.update=function(t){return t}):((r=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return function(t){function e(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,u=e,d&&(t.style.overflowY=e),i()}function i(){var e=window.pageYOffset,i=document.body.scrollTop,n=t.style.height;t.style.height="auto";var a=t.scrollHeight+f;0!==t.scrollHeight?(t.style.height=a+"px",m=t.clientWidth,document.documentElement.scrollTop=e,document.body.scrollTop=i):t.style.height=n}function n(){var n=t.style.height;if(i(),window.getComputedStyle(t,null).height!==t.style.height?"visible"!==u&&e("visible"):"hidden"!==u&&e("hidden"),n!==t.style.height){var a=document.createEvent("Event");a.initEvent("autosize:resized",!0,!1),t.dispatchEvent(a)}}var r=void 0===arguments[1]?{}:arguments[1],o=r.setOverflowX,s=void 0===o||o,l=r.setOverflowY,d=void 0===l||l;if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!a.has(t)){var f=null,u=null,m=t.clientWidth,p=function(){t.clientWidth!==m&&n()},c=function(e){window.removeEventListener("resize",p),t.removeEventListener("input",n),t.removeEventListener("keyup",n),t.removeEventListener("autosize:destroy",c),a.delete(t),Object.keys(e).forEach(function(i){t.style[i]=e[i]})}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",c),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",n),window.addEventListener("resize",p),t.addEventListener("input",n),t.addEventListener("autosize:update",n),a.add(t),s&&(t.style.overflowX="hidden",t.style.wordWrap="break-word"),function(){var e=window.getComputedStyle(t,null);u=e.overflowY,"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),f="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(f)&&(f=0),n()}()}}(t,e)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],i),t},r.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],n),t}),e.exports=r}),function(t){function e(){jQuery(".ts-testimonial-frontend-submission-form").each(function(){var t=jQuery(this);t.find(".ts-testimonial-form-input").each(function(){var t=jQuery(this);t.parents(".minimal-form-input").length>0&&t.parents(".minimal-form-input").children().unwrap()}),t.find(".ts-testimonial-form-label").each(function(){var t=jQuery(this);t.children().length>0&&t.empty().html(t.attr("data-label"))})})}jQuery(document).ready(function(){jQuery(".ts-testimonial-frontend-submission-form").each(function(){var t=jQuery(this),e="true"==t.attr("data-frontend"),i=t.find("textarea");e||(autosize(i),t.find(".ts-testimonial-form-input").each(function(){var t=jQuery(this),e=jQuery(this).attr("data-required"),i=jQuery(this).attr("data-standard"),n=jQuery(this).attr("data-error");"true"==e&&t.bind("focus click keyup input paste",function(){""==t.val()?t.siblings(".ts-testimonial-form-label-text").addClass("validation-fail").text(n):t.siblings(".ts-testimonial-form-label-text").removeClass("validation-fail").text(i)})}),t.find('input[type="file"]').length>0&&t.find('input[type="file"]').on("change",function(){var t=jQuery(this).attr("data-allowable"),e=jQuery(this).attr("data-standard"),i=jQuery(this).attr("data-error")+" "+t.replace(/,/g,", ");t=t.split(",");var n=jQuery(this).get(0).files.length,a=jQuery(this).val();n>1?(jQuery(this).val(""),jQuery(this).siblings(".ts-testimonial-form-label-text").addClass("validation-fail").text(i)):-1==jQuery.inArray(a.split(".").pop().toLowerCase(),t)?(jQuery(this).val(""),jQuery(this).siblings(".ts-testimonial-form-label-text").addClass("validation-fail").text(i)):jQuery(this).siblings(".ts-testimonial-form-label-text").removeClass("validation-fail").text(e)}),t.on("submit",function(){jQuery(this).find(".ts-testimonial-frontend-submission-ajax-button").removeClass("waiting").addClass("sending")}),t.find(".ts-testimonial-frontend-submission-ajax-button").on("click",function(e){var i=jQuery(this),n=0;t.find(".ts-testimonial-form-input").each(function(){var t=jQuery(this).val(),e=jQuery(this).attr("data-required"),i=jQuery(this).attr("data-standard"),a=jQuery(this).attr("data-error");"true"==e&&""==t?(n++,jQuery(this).siblings(".ts-testimonial-form-label-text").addClass("validation-fail").text(a)):jQuery(this).siblings(".ts-testimonial-form-label-text").removeClass("validation-fail").text(i)});var a="";if(t.find('input[type="file"]').length>0){var r=t.find('input[type="file"]'),o=r.attr("data-allowable"),s=r.attr("data-standard"),l=r.attr("data-error")+" "+o.replace(/,/g,", ");o=o.split(",");var d=r.get(0).files.length;if(a=r.val(),d>1)n++,r.siblings(".ts-testimonial-form-label-text").addClass("validation-fail").text(l);else if(""!=a){var f=a.replace(/^.*\./,"");f=f==a?"":f.toLowerCase(),-1!=jQuery.inArray(f,o)?r.siblings(".ts-testimonial-form-label-text").removeClass("validation-fail").text(s):(n++,r.siblings(".ts-testimonial-form-label-text").addClass("validation-fail").text(l))}else r.siblings(".ts-testimonial-form-label-text").removeClass("validation-fail").text(s)}var u="true"==t.attr("data-form-active"),m="true"==t.attr("data-form-ajax"),p="";if(0!=n)return e.preventDefault(),void jQuery("html, body").animate({scrollTop:t.offset().top},500);if(m){e.preventDefault(),i.removeClass("waiting").addClass("sending"),t.find(".ts-testimonial-frontend-submission-errors").fadeOut(500);var c=new FormData(t[0]);t.find('input[type="file"]').length>0&&""!=a?c.append("avatar",t.find('input[type="file"]')[0].files[0]):c.append("avatar",""),c.append("form_random",t.attr("data-form-random")),c.append("form_active","true"==t.attr("data-form-active")),c.append("form_confirm",t.attr("data-form-confirm")),c.append("post_status",t.attr("data-form-status")),c.append("post_featured",t.attr("data-form-featured")),c.append("post_allowable",t.attr("data-form-allowable")),c.append("post_category",t.attr("data-form-category")),c.append("category_single",t.attr("data-form-single")),c.append("error_nonce",t.attr("data-error-nonce")),c.append("error_title",t.attr("data-error-title")),c.append("error_author",t.attr("data-error-author")),c.append("error_content",t.attr("data-error-content")),c.append("error_featured",t.attr("data-error-featured")),c.append("action","ts_testimonials"),jQuery.ajax({type:"post",action:"ts_testimonials",url:t.attr("action"),cache:!1,processData:!1,contentType:!1,data:c,enctype:"multipart/form-data"}).done(function(e){e.hasOwnProperty("success")&&(e.success?(t.find(".ts-testimonial-frontend-submission-messages").fadeIn(500),t[0].reset()):(e.hasOwnProperty("message")&&(console.log(e),t.find(".ts-testimonial-frontend-submission-failure").empty(),jQuery.each(e.message,function(t,e){p=p+e+"</br>"}),t.find(".ts-testimonial-frontend-submission-failure").html(p)),t.find(".ts-testimonial-frontend-submission-errors").fadeIn(500))),i.removeClass("sending").addClass("waiting")}).fail(function(t,e,i){console.log(t,e,i)}).always(function(){setTimeout(function(){t.find(".ts-testimonial-frontend-submission-messages").fadeOut(500,function(){})},5e3)})}else u?(t.find(".ts-testimonial-form-button-submit").trigger("click"),t[0].reset()):(t.find(".ts-testimonial-frontend-submission-messages").fadeIn(500),setTimeout(function(){t.find(".ts-testimonial-frontend-submission-messages").fadeOut(500,function(){})},5e3))}))}),setTimeout(function(){e()},500)}),jQuery(window).load(function(){setTimeout(function(){e()},500)})}(jQuery);