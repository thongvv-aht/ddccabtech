!function(i){i.fn.TS_VCSC_Adipoli=function(e){function t(e,t){for(var a=0;a<t.slices;a++){var o=Math.round(e.width()/t.slices);a==t.slices-1?e.children(".adipoli-after").append(i('<div class="adipoli-slice"></div>').css({left:o*a+"px",width:e.width()-o*a+"px",height:"0px",opacity:"0",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(o+a*o-o)+"px 0%",backgroundSize:e.width()+"px "+e.height()+"px"})):e.children(".adipoli-after").append(i('<div class="adipoli-slice"></div>').css({left:o*a+"px",width:o+"px",height:"0px",opacity:"0",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(o+a*o-o)+"px 0%",backgroundSize:e.width()+"px "+e.height()+"px"}))}}function a(e,t){for(var a=Math.round(e.width()/t.boxCols),o=Math.round(e.height()/t.boxRows),r=0;r<t.boxRows;r++)for(var h=0;h<t.boxCols;h++)h==t.boxCols-1?e.children(".adipoli-after").append(i('<div class="adipoli-box"></div>').css({opacity:0,left:a*h+"px",top:o*r+"px",width:e.width()-a*h+"px",height:o+"px",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(a+h*a-a)+"px -"+(o+r*o-o)+"px",backgroundSize:e.width()+"px "+e.height()+"px"})):e.children(".adipoli-after").append(i('<div class="adipoli-box"></div>').css({opacity:0,left:a*h+"px",top:o*r+"px",width:a+"px",height:o+"px",background:'url("'+e.children("img").attr("src")+'") no-repeat -'+(a+h*a-a)+"px -"+(o+r*o-o)+"px",backgroundSize:e.width()+"px "+e.height()+"px"}))}function o(i){for(var e,t,a=i.length;a;e=parseInt(Math.random()*a),t=i[--a],i[a]=i[e],i[e]=t);return i}function r(i){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=i.width||i.naturalWidth,e.height=i.height||i.naturalHeight,t.drawImage(i,0,0);for(var a=t.getImageData(0,0,e.width,e.height),o=0;o<a.height;o++)for(var r=0;r<a.width;r++){var h=4*o*a.width+4*r,s=(a.data[h]+a.data[h+1]+a.data[h+2])/3;a.data[h]=s,a.data[h+1]=s,a.data[h+2]=s}return t.putImageData(a,0,0,0,0,a.width,a.height),e.toDataURL()}var h=i.extend({startEffect:"transparent",hoverEffect:"normal",triggerEffect:"hover",imageOpacity:.5,animSpeed:300,fillColor:"#000",textColor:"#fff",overlayText:"",slices:10,boxCols:5,boxRows:3,popOutMargin:10,popOutShadow:10,resizeOnly:!1},e);return jQuery(this).one("loadadipoli",function(){i(this).wrap(function(){return'<div class="adipoli-wrapper '+i(this).attr("class")+'" style="width:'+i(this).width()+"px; height:"+i(this).height()+'px;"/>'});var e=i(this).width(),s=i(this).height(),n=i(this).parents(".adipoli-wrapper");if(h.resizeOnly)n.siblings(".adipoli-before").appendTo(n),n.siblings(".adipoli-after").appendTo(n),i(this).hide(),i(this).siblings(".adipoli-before").show();else{if(i(this).parent().append('<div class="adipoli-before '+i(this).attr("class")+'" style="display:none;width:'+e+"px; height:"+s+'px;"><img src="'+i(this).attr("src")+'" style="width:'+e+"px; height:"+s+'px;"/></div>'),i(this).parent().append('<div class="adipoli-after '+i(this).attr("class")+'" style="display:none;width:'+e+"px; height:"+s+'px;"></div>'),"transparent"==h.startEffect)i(this).hide(),i(this).siblings(".adipoli-before").css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*h.imageOpacity+')"',filter:"alpha(opacity="+100*h.imageOpacity+")","-moz-opacity":h.imageOpacity,"-khtml-opacity":h.imageOpacity,opacity:h.imageOpacity}).show();else if("grayscale"==h.startEffect){var c=i(this);c.siblings(".adipoli-before").children("img").each(function(){var e=new Image;e.crossOrigin="Anonymous",i(e).one("load",function(){c.siblings(".adipoli-before").children("img").attr("src",r(e)),c.hide(),c.siblings(".adipoli-before").show(),e=null}),e.src=this.src})}else"normal"==h.startEffect?(i(this).hide(),i(this).siblings(".adipoli-before").show()):"overlay"==h.startEffect&&((c=i(this)).hide(),i(this).siblings(".adipoli-before").html(h.overlayText).css({"-ms-filter":'"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*h.imageOpacity+')"',filter:"alpha(opacity="+100*h.imageOpacity+")","-moz-opacity":h.imageOpacity,"-khtml-opacity":h.imageOpacity,opacity:h.imageOpacity,background:h.fillColor,color:h.textColor}).fadeIn(),c.show());i(this).attr("data-init","true")}i(this).parent().bind("mouseenter",function(){if("normal"==h.hoverEffect){var r=i(this);r.children(".adipoli-after").html('<img src="'+r.children("img").attr("src")+'" style="width:'+e+"px; height:"+s+'px;"/>').fadeIn(h.animSpeed)}else if("popout"==h.hoverEffect){var n=(r=i(this)).children("img").width(),c=r.children("img").height();r.children(".adipoli-after").html('<img src="'+r.children("img").attr("src")+'" style="width:'+e+"px; height:"+s+'px;"/>');var p=r.children(".adipoli-after").children("img");p.width(n+2*h.popOutMargin),p.height(c+2*h.popOutMargin),r.children(".adipoli-after").width(n+2*h.popOutMargin),r.children(".adipoli-after").height(c+2*h.popOutMargin),r.children(".adipoli-after").css({left:"-"+h.popOutMargin+"px",top:"-"+h.popOutMargin+"px","box-shadow":"0px 0px "+h.popOutShadow+"px #000"}).show()}else if("sliceDown"==h.hoverEffect||"sliceDownLeft"==h.hoverEffect||"sliceUp"==h.hoverEffect||"sliceUpLeft"==h.hoverEffect||"sliceUpRandom"==h.hoverEffect||"sliceDownRandom"==h.hoverEffect){i(this).children(".adipoli-after").show(),t(i(this),h);var l=0,d=0,f=i(".adipoli-slice",i(this));"sliceDownLeft"!=h.hoverEffect&&"sliceUpLeft"!=h.hoverEffect||(f=i(".adipoli-slice",i(this))._reverse()),"sliceUpRandom"!=h.hoverEffect&&"sliceDownRandom"!=h.hoverEffect||(f=o(i(".adipoli-slice",i(this)))),f.each(function(){var e=i(this);"sliceDown"==h.hoverEffect||"sliceDownLeft"==h.hoverEffect?e.css({top:"0px"}):"sliceUp"!=h.hoverEffect&&"sliceUpLeft"!=h.hoverEffect||e.css({bottom:"0px"}),d==h.slices-1?setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},h.animSpeed,"",function(){})},100+l):setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},h.animSpeed)},100+l),l+=50,d++})}else if("sliceUpDown"==h.hoverEffect||"sliceUpDownLeft"==h.hoverEffect){i(this).children(".adipoli-after").show(),t(i(this),h),l=0,d=0;var g=0;f=i(".adipoli-slice",i(this)),"sliceUpDownLeft"==h.hoverEffect&&(f=i(".adipoli-slice",i(this))._reverse()),f.each(function(){var e=i(this);0==d?(e.css("top","0px"),d++):(e.css("bottom","0px"),d=0),g==h.slices-1?setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},h.animSpeed,"",function(){})},100+l):setTimeout(function(){e.animate({height:"100%",opacity:"1.0"},h.animSpeed)},100+l),l+=50,g++})}else if("fold"==h.hoverEffect||"foldLeft"==h.hoverEffect)i(this).children(".adipoli-after").show(),t(r=i(this),h),l=0,d=0,f=i(".adipoli-slice",r),"foldLeft"==h.hoverEffect&&(f=i(".adipoli-slice",i(this))._reverse()),f.each(function(){var e=i(this),t=e.width();e.css({top:"0px",height:"100%",width:"0px"}),d==h.slices-1?setTimeout(function(){e.animate({width:t,opacity:"1.0"},h.animSpeed,"",function(){})},100+l):setTimeout(function(){e.animate({width:t,opacity:"1.0"},h.animSpeed)},100+l),l+=50,d++});else if("boxRandom"==h.hoverEffect){i(this).children(".adipoli-after").show(),a(r=i(this),h);var m=h.boxCols*h.boxRows;d=0,l=0;var v=o(i(".adipoli-box",r));v.each(function(){var e=i(this);d==m-1?setTimeout(function(){e.animate({opacity:"1"},h.animSpeed,"",function(){})},100+l):setTimeout(function(){e.animate({opacity:"1"},h.animSpeed)},100+l),l+=20,d++})}else if("boxRain"==h.hoverEffect||"boxRainReverse"==h.hoverEffect||"boxRainGrow"==h.hoverEffect||"boxRainGrowReverse"==h.hoverEffect){i(this).children(".adipoli-after").show(),a(r=i(this),h),m=h.boxCols*h.boxRows,d=0,l=0;var x=0,u=0,w=new Array;w[x]=new Array,v=i(".adipoli-box",r),"boxRainReverse"!=h.hoverEffect&&"boxRainGrowReverse"!=h.hoverEffect||(v=i(".adipoli-box",r)._reverse()),v.each(function(){w[x][u]=i(this),++u==h.boxCols&&(u=0,w[++x]=new Array)});for(var b=0;b<2*h.boxCols;b++){for(var y=b,E=0;E<h.boxRows;E++)y>=0&&y<h.boxCols&&(!function(e,t,a,o,r){var s=i(w[e][t]),n=s.width(),c=s.height();"boxRainGrow"!=h.hoverEffect&&"boxRainGrowReverse"!=h.hoverEffect||s.width(0).height(0),o==r-1?setTimeout(function(){s.animate({opacity:"1",width:n,height:c},h.animSpeed/1.3,"",function(){})},100+a):setTimeout(function(){s.animate({opacity:"1",width:n,height:c},h.animSpeed/1.3)},100+a)}(E,y,l,d,m),d++),y--;l+=100}}}),i(this).parent().bind("mouseleave",function(){i(this).children(".adipoli-after").html("").hide()})}).each(function(){this.complete&&i(this).trigger("loadadipoli")}),i(this)},i.fn._reverse=[].reverse}(jQuery);