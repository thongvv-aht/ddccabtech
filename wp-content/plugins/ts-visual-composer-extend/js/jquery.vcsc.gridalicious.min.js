!function(i,t){var e=function(i,t,e){var n;return function(){function s(){e||i.apply(o,r),n=null}var o=this,r=arguments;n?clearTimeout(n):e&&i.apply(o,r),n=setTimeout(s,t||150)}};jQuery.fn[t]=function(i){return i?this.bind("resize",e(i)):this.trigger(t)}}(jQuery,"smartresize"),function(i){i.Gal=function(t,e){this.element=i(e),this._init(t)},i.Gal.settings={selector:".item",content:"",width:225,gutter:20,animate:!1,simple:!0,animationOptions:{speed:200,duration:300,effect:"fadeInOnAppear",queue:!0,complete:function(){}}},i.Gal.prototype={_init:function(t){var e=this;this.container=e,this.name=this._setName(5),this.gridArr=[],this.gridArrAppend=[],this.gridArrPrepend=[],this.setArr=!1,this.setGrid=!1,this.setOptions,this.cols=0,this.itemCount=0,this.prependCount=0,this.isPrepending=!1,this.appendCount=0,this.resetCount=!0,this.ifCallback=!0,this.box=this.element,this.boxWidth=this.box.width(),this.options=i.extend(!0,{},i.Gal.settings,t),this.content=this.options.content,this.gridArr=[],this.isResizing=!1,this.isFirstRun=!0,this.w=0,this.boxArr=[],this._setCols(),this._setContent(),this._renderGrid("append"),i(this.box).addClass("gridalicious"),i(window).smartresize(function(){e.resize(),setTimeout(function(){jQuery(window).trigger("resize"),jQuery(window).trigger("debouncedresize")},500)})},_setName:function(i,t){return t=t?t:"",i?this._setName(--i,"0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz".charAt(Math.floor(60*Math.random()))+t):t},_setContent:function(){var t=this.box,e=jQuery("#"+this.content),n=e.children();n.sort(function(i,t){var e=parseInt(i.getAttribute("data-grid-item")),n=parseInt(t.getAttribute("data-grid-item"));return e>n?1:n>e?-1:0}),n.detach().appendTo(t),this.gridArr=i.makeArray(this.box.find(this.options.selector)),t=null,e=null,n=null},_setCols:function(){this.cols=Math.floor(this.box.width()/this.options.width),this.cols<1&&(this.cols=1),diff=this.box.width()-this.cols*this.options.width-this.options.gutter,diff=(diff+this.options.gutter)/this.cols,w=(this.options.width+diff)/this.box.width()*100,this.w=w;for(var t=0;t<this.cols;t++){var e=i("<div></div>").addClass("galcolumn").attr("id","item"+t+this.name).css({width:w+"%",paddingLeft:0==t?0:this.options.gutter,paddingBottom:this.options.gutter,"float":"left","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","-o-box-sizing":"border-box","box-sizing":"border-box"});this.box.append(e)}this.box.find(i("#clear"+this.name)).remove();var n=i("<div></div>").css({clear:"both",height:"0",width:"0",display:"block"}).attr("id","clear"+this.name);this.box.append(n)},_renderGrid:function(t,e,n){{var s=[],o=[],r=0,h=(this.prependCount,this.appendCount),a=this.options.gutter,d=this.options.simple,p=this.cols,c=this.name,l=this.box,u=null,f=0,g=0,m=null,b=0,v=0;i(".galcolumn").width()}e?(o=e,"append"==t&&(h+=n,r=this.appendCount),"prepend"==t&&(this.isPrepending=!0,r=Math.round(n%p),0>=r&&(r=p)),"renderAfterPrepend"==t&&(h+=n,r=n)):(o=this.gridArr,h=i(this.gridArr).size()),i.each(o,function(e,n){var o=i(n),x="100%";o.hasClass("not-responsive")&&(x="auto"),o.css({marginBottom:a,zoom:"1",filter:"alpha(opacity=0)",opacity:"0"}).find("img, object, embed, iframe").css({width:x,height:"auto","margin-left":"auto","margin-right":"auto"}),d||(0==i("#item0"+c).height()?(f=0,g=0,b=0,v=0):p>1&&1==e?(f=0,g=1,b=i("#item0"+c).height(),v=0):(u=[].reduce.call(i(l).find(".galcolumn"),function(t,e){return i(t).height()<i(e).height()?t:e}),f=i(u).height(),g=i(u).prevAll(".galcolumn").length,m=[].reduce.call(i(l).find(".galcolumn"),function(t,e){return i(t).height()>i(e).height()?t:e}),b=i(m).height(),v=i(m).prevAll(".galcolumn").length)),"prepend"==t?(r--,i("#item"+r+c).prepend(o),s.push(o),0==r&&(r=p)):(d?(i("#item"+r+c).append(o),s.push(o),r++,r>=p&&(r=0)):(i("#item"+g+c).append(o),s.push(o),r++),h>=p&&(h-=p))}),this.appendCount=h,this.itemCount=r,"append"==t||"prepend"==t?("prepend"==t&&this._updateAfterPrepend(this.gridArr,o),this._renderItem(s),this.isPrepending=!1):this._renderItem(this.gridArr)},_collectItems:function(){var t=[];return i(this.box).find(this.options.selector).each(function(){t.push(i(this))}),t},_renderItem:function(t){var e=this.options.animationOptions.speed,n=this.options.animationOptions.effect,s=this.options.animationOptions.duration,o=this.options.animationOptions.queue,r=this.options.animate,h=this.options.animationOptions.complete,a=0,d=0;r===!0&&this.isFirstRun?(this.box.one("inview",function(r,p,c,l){if(p){{jQuery(this)}"top"==l&&(o===!0&&"fadeInOnAppear"==n?(this.isPrepending&&t.reverse(),i.each(t,function(n,o){setTimeout(function(){i(o).animate({opacity:"1.0"},s),d++,d==t.length&&h.call(void 0,t)},a*e),a++})):o===!1&&"fadeInOnAppear"==n&&(this.isPrepending&&t.reverse(),i.each(t,function(e,n){i(n).animate({opacity:"1.0"},s),d++,d==t.length&&this.ifCallback&&h.call(void 0,t)})),o!==!0||n||i.each(t,function(e,n){i(n).css({opacity:"1",filter:"alpha(opacity=100)"}),d++,d==t.length&&this.ifCallback&&h.call(void 0,t)}))}else{jQuery(this)}}),this.isFirstRun=!1):r!==!0||this.isResizing||this.isFirstRun?(i.each(t,function(t,e){i(e).css({opacity:"1",filter:"alpha(opacity=100)"})}),this.ifCallback&&h.call(t)):(o===!0&&"fadeInOnAppear"==n?(this.isPrepending&&t.reverse(),i.each(t,function(n,o){setTimeout(function(){i(o).animate({opacity:"1.0"},s),d++,d==t.length&&h.call(void 0,t)},a*e),a++})):o===!1&&"fadeInOnAppear"==n&&(this.isPrepending&&t.reverse(),i.each(t,function(e,n){i(n).animate({opacity:"1.0"},s),d++,d==t.length&&this.ifCallback&&h.call(void 0,t)})),o!==!0||n||i.each(t,function(e,n){i(n).css({opacity:"1",filter:"alpha(opacity=100)"}),d++,d==t.length&&this.ifCallback&&h.call(void 0,t)}))},_updateAfterPrepend:function(t,e){var n=this.gridArr;i.each(e,function(i,t){n.unshift(t)}),this.gridArr=n},resize:function(){var t=this.content;this.box.width()!==this.boxWidth&&(this.box.unbind("inview"),this.box.find(i(".galcolumn")).children().each(function(){jQuery(this).detach().appendTo(jQuery("#"+t))}),this.box.find(i(".galcolumn")).remove(),this._setCols(),this._setContent(),this.ifCallback=!1,this.isResizing=!0,this._renderGrid("append"),this.ifCallback=!0,this.isResizing=!1,this.boxWidth=this.box.width())},append:function(t){var e=this.gridArr,n=this.gridArrPrepend;i.each(t,function(i,t){e.push(t),n.push(t)}),this._renderGrid("append",t,i(t).size())},prepend:function(t){this.ifCallback=!1,this._renderGrid("prepend",t,i(t).size()),this.ifCallback=!0}},i.fn.TS_VCSC_Gridalicious=function(t,e){return this.each("string"==typeof t?function(){var n=i.data(this,"gridalicious");n[t].apply(n,[e])}:function(){i.data(this,"gridalicious",new i.Gal(t,this))}),this}}(jQuery);