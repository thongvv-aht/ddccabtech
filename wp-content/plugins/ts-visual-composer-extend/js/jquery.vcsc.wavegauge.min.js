function TS_VCSC_WaveFillGaugeDefaultSettings(){return{minValue:0,maxValue:100,valueCountUp:!0,displayPercent:!0,circleThickness:.05,circleFillGap:.05,circleColor:"#178BCA",circleFadeTime:1e3,waveHeight:.05,waveCount:1,waveRiseTime:1e3,waveAnimateTime:18e3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#178BCA",waveOffset:0,textVertPosition:.5,textSize:1,textColor:"#045681",waveTextColor:"#A4DBf8"}}function TS_VCSC_WaveFillGaugeClickUpdate(t,a,e){jQuery("#"+t).on("click",function(){var t=a.attr("data-gauge-value"),r=a.attr("data-gauge-second");"true"==a.attr("data-gauge-alternate")?(e.update(t),a.attr("data-gauge-alternate","false")):(e.update(r),a.attr("data-gauge-alternate","true"))})}function TS_VCSC_LoadLiquidFillGauge(t,a,e){function r(){z.attr("transform","translate("+A(z.attr("T"))+",0)"),z.transition().duration(e.waveAnimateTime*(1-z.attr("T"))).ease("linear").attr("transform","translate("+A(1)+",0)").attr("T",1).each("end",function(){z.attr("T",0),r(e.waveAnimateTime)})}null==e&&(e=TS_VCSC_WaveFillGaugeDefaultSettings());var i,n=d3.select("#"+t),l=Math.min(parseInt(n.style("width")),parseInt(n.style("height")))/2,o=parseInt(n.style("width"))/2-l,s=parseInt(n.style("height"))/2-l,u=Math.max(e.minValue,Math.min(e.maxValue,a))/e.maxValue;i=e.waveHeightScaling?d3.scale.linear().range([0,e.waveHeight,0]).domain([0,50,100]):d3.scale.linear().range([e.waveHeight,e.waveHeight]).domain([0,100]);var d=e.textSize*l/2,c=parseFloat(a).toFixed(2),v=e.valueCountUp?e.minValue:c,g=e.displayPercent?"%":"",p=e.circleThickness*l,f=p+e.circleFillGap*l,m=l-f,w=m*i(100*u),h=2*m/e.waveCount,x=1+e.waveCount,C=h*x,T=function(t){return Math.round(t)};parseFloat(c)!=parseFloat(T(c))&&(T=function(t){return parseFloat(t).toFixed(1)}),parseFloat(c)!=parseFloat(T(c))&&(T=function(t){return parseFloat(t).toFixed(2)});for(var F=[],y=0;y<=40*x;y++)F.push({x:y/(40*x),y:y/40});var S=d3.scale.linear().range([0,2*Math.PI]).domain([0,1]),I=d3.scale.linear().range([0,l]).domain([0,l]),V=d3.scale.linear().range([0,C]).domain([0,1]),_=d3.scale.linear().range([0,w]).domain([0,1]),M=d3.scale.linear().range([f+2*m+w,f-w]).domain([0,1]),A=d3.scale.linear().range([0,C-2*m]).domain([0,1]),G=d3.scale.linear().range([f+2*m,f+.7*d]).domain([0,1]),P=n.append("g").attr("transform","translate("+o+","+s+")"),R=d3.svg.arc().startAngle(S(0)).endAngle(S(1)).outerRadius(I(l)).innerRadius(I(l-p)),k=P.append("path").attr("class","liquidFillGaugeCircle").attr("d",R).style("fill",e.circleColor).attr("transform","translate("+l+","+l+")");jQuery(k[0]).fadeTo(0,0),jQuery(k[0]).fadeTo(e.circleFadeTime,1);var q=P.append("text").text(T(v)+g).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",d+"px").style("fill",e.textColor).attr("transform","translate("+l+","+G(e.textVertPosition)+")"),H=d3.svg.area().x(function(t){return V(t.x)}).y0(function(t){return _(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*t.y*Math.PI))}).y1(function(t){return 2*m+w}),j=P.append("defs").append("clipPath").attr("id","clipWave"+t),z=j.append("path").datum(F).attr("d",H).attr("T",0),Q=P.append("g").attr("clip-path","url(#clipWave"+t+")");Q.append("circle").attr("cx",l).attr("cy",l).attr("r",m).style("fill",e.waveColor);var W=Q.append("text").text(T(v)+g).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",d+"px").style("fill",e.waveTextColor).attr("transform","translate("+l+","+G(e.textVertPosition)+")");if(e.valueCountUp){var U=function(){var t=d3.interpolate(this.textContent,c);return function(a){this.textContent=T(t(a))+g}};q.transition().duration(e.waveRiseTime).tween("text",U),W.transition().duration(e.waveRiseTime).tween("text",U)}var b=f+2*m-C;return e.waveRise?j.attr("transform","translate("+b+","+M(0)+")").transition().duration(e.waveRiseTime).attr("transform","translate("+b+","+M(u)+")").each("start",function(){z.attr("transform","translate(1,0)")}):j.attr("transform","translate("+b+","+M(u)+")"),e.waveAnimate&&r(),new function(){this.update=function(t){var a=parseFloat(t).toFixed(2),n=function(t){return Math.round(t)};parseFloat(a)!=parseFloat(n(a))&&(n=function(t){return parseFloat(t).toFixed(1)}),parseFloat(a)!=parseFloat(n(a))&&(n=function(t){return parseFloat(t).toFixed(2)});var l=function(){var a=d3.interpolate(this.textContent,parseFloat(t).toFixed(2));return function(t){this.textContent=n(a(t))+g}};q.transition().duration(e.waveRiseTime).tween("text",l),W.transition().duration(e.waveRiseTime).tween("text",l);var o,s=Math.max(e.minValue,Math.min(e.maxValue,t))/e.maxValue,u=m*i(100*s),d=d3.scale.linear().range([f+2*m+u,f-u]).domain([0,1])(s),c=d3.scale.linear().range([0,C]).domain([0,1]),v=d3.scale.linear().range([0,u]).domain([0,1]);o=e.waveHeightScaling?d3.svg.area().x(function(t){return c(t.x)}).y0(function(t){return v(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*t.y*Math.PI))}).y1(function(t){return 2*m+u}):H;var p=e.waveAnimate?A(1):0;z.transition().duration(0).transition().duration(e.waveAnimate?e.waveAnimateTime*(1-z.attr("T")):e.waveRiseTime).ease("linear").attr("d",o).attr("transform","translate("+p+",0)").attr("T","1").each("end",function(){e.waveAnimate&&(z.attr("transform","translate("+A(0)+",0)"),r(e.waveAnimateTime))}),j.transition().duration(e.waveRiseTime).attr("transform","translate("+b+","+d+")")}}}jQuery(document).ready(function(){function t(){jQuery(".ts-liquid-gauge-wrapper").each(function(){var t=jQuery(this),a=t.attr("data-randomizer"),e=t.attr("data-circle-position");if("center"==e)r="margin: 0 auto; float: none;";else if("left"==e)r="margin: 0 auto; float: left;";else if("right"==e)var r="margin: 0 auto; float: right;";var i=parseInt(t.attr("data-current")),n=parseInt(t.attr("data-circle-maxsize")),l=t.width();t.width();if(l>n)o=n;else var o=l;var s=t.find("svg"),u="ts-liquid-gauge-svg-"+a,d="true"==t.attr("data-gauge-click"),c="true"==t.attr("data-viewport-active"),v="true"==t.attr("data-viewport-mobile"),g=t.attr("data-viewport-offset"),p=parseInt(t.attr("data-viewport-delay")),f="true"==t.attr("data-viewport-triggered");if(0==TS_VCSC_MobileDevice||1==TS_VCSC_MobileDevice&&1==v)m=!0;else var m=!1;if(s.length>0&&i!=l)s.off().remove(),s=null;else if(i==l)return!1;t.attr("data-current",l),t.append('<svg id="'+u+'" class="ts-liquid-gauge-svg" width="'+o+'" height="'+o+'" style="display: block; padding: 0; '+r+'"></svg>'),s=t.find("svg");var w=TS_VCSC_WaveFillGaugeDefaultSettings();if(w.minValue=parseInt(t.attr("data-gauge-min")),w.maxValue=parseInt(t.attr("data-gauge-max")),w.valueCountUp="true"==t.attr("data-gauge-countup"),w.displayPercent="true"==t.attr("data-gauge-percent"),w.circleColor=t.attr("data-circle-color"),w.circleThickness=parseInt(t.attr("data-circle-thickness"))/100,w.circleFillGap=parseInt(t.attr("data-circle-gap"))/100,w.textColor=t.attr("data-circle-text"),w.waveTextColor=t.attr("data-wave-text"),w.waveColor=t.attr("data-wave-color"),w.waveHeight=parseInt(t.attr("data-wave-height"))/100,w.waveCount=parseInt(t.attr("data-wave-count")),w.waveHeightScaling=!0,w.waveAnimate="true"==t.attr("data-wave-animateallow"),w.waveAnimateTime=parseInt(t.attr("data-wave-animatetime")),w.waveRise="true"==t.attr("data-wave-riseallow"),w.waveRiseTime=parseInt(t.attr("data-wave-risetime")),w.waveOffset=parseInt(t.attr("data-wave-offset")),w.textVertPosition=parseInt(t.attr("data-circle-label"))/100,w.textSize=1,c&&!f&&void 0!==jQuery.fn.waypoint&&1==m)var h=t.waypoint({handler:function(a){setTimeout(function(){if("false"==t.attr("data-viewport-triggered")){var a=TS_VCSC_LoadLiquidFillGauge(u,parseInt(t.attr("data-gauge-value")),w);d&&TS_VCSC_WaveFillGaugeClickUpdate(u,t,a)}t.attr("data-viewport-triggered","true");try{t.waypoint("destroy")}catch(t){}try{h.destroy()}catch(t){}},p)},offset:g,triggerOnce:!0});else{var x=TS_VCSC_LoadLiquidFillGauge(u,parseInt(t.attr("data-gauge-value")),w);d&&TS_VCSC_WaveFillGaugeClickUpdate(u,t,x)}})}t(),jQuery(window).on("debouncedresize",function(a){t()})});