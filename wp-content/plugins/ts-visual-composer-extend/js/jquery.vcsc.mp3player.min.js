jQuery(function(){jQuery(document).ready(function(){jQuery(".ts-mp3-player-element").each(function(){var e=jQuery(this),t=e.parent(),a=e.attr("id"),n="true"==e.attr("data-narrow")?!0:!1,i=e.attr("data-autoplay"),s="true"==e.attr("data-showlist")?!0:!1,l="true"==e.attr("data-mutex")?!0:!1,r="true"==e.attr("data-showlrc")?!0:!1,o=e.attr("data-preload"),u=e.attr("data-mode"),d=e.attr("data-theme"),c=e.attr("data-loading"),p=e.attr("data-listmaxheight"),m=e.attr("data-playlist");m=jQuery.parseJSON(TS_VCSC_Base64.decode(m));var h=parseInt(e.attr("data-liststart")),y=parseInt(e.attr("data-trackcount")),v=parseInt(e.attr("data-volume"))/100,f=0;if(jQuery.each(m,function(e,t){t.hasOwnProperty("lrc")&&""!=t.lrc&&f++}),0==f&&(r=!1),0==y)return e.remove(),!1;1==y?(m=m[0],h=0):n=!1;var g=new APlayer({element:document.getElementById(a),narrow:n,autoplay:"init"==i?!0:!1,liststart:h,showlist:s,showlrc:r?3:0,loading:c,mutex:l,volume:v,theme:d,mode:u,preload:o,listmaxheight:p,music:m});("inviewall"==i||"inviewsingle"==i||"viewportall"==i||"viewportsingle"==i)&&setTimeout(function(){t.on("inview.ts-mp3-player-"+i,function(e,a,n,s){a?(t.addClass("ts-mp3-player-visible").removeClass("ts-mp3-player-hidden"),g.play(),"viewportsingle"==i&&t.off("inview.ts-mp3-player-"+i)):(t.removeClass("ts-mp3-player-visible").addClass("ts-mp3-player-hidden"),("inviewall"==i||"inviewsingle"==i)&&g.pause(),"inviewsingle"==i&&t.off("inview.ts-mp3-player-"+i))})},500)})})}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("APlayer",[],t):"object"==typeof exports?exports.APlayer=t():e.APlayer=t()}(this,function(){return function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}([function(e){"use strict";function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),n=[],i=function(){function e(a){function i(e){for(var t=e.offsetLeft,a=e.offsetParent,n=void 0;null!==a;)t+=a.offsetLeft,a=a.offsetParent;return n=document.body.scrollLeft+document.documentElement.scrollLeft,t-n}function s(e){for(var t=e.offsetTop,a=e.offsetParent,n=void 0;null!==a;)t+=a.offsetTop,a=a.offsetParent;return n=document.body.scrollTop+document.documentElement.scrollTop,t-n}var l=this;t(this,e);var r={play:["0 0 16 31","M15.552 15.168q0.448 0.32 0.448 0.832 0 0.448-0.448 0.768l-13.696 8.512q-0.768 0.512-1.312 0.192t-0.544-1.28v-16.448q0-0.96 0.544-1.28t1.312 0.192z"],pause:["0 0 17 32","M14.080 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048zM2.88 4.8q2.88 0 2.88 2.048v18.24q0 2.112-2.88 2.112t-2.88-2.112v-18.24q0-2.048 2.88-2.048z"],"volume-up":["0 0 28 32","M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528zM25.152 16q0 2.72-1.536 5.056t-4 3.36q-0.256 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.704 0.672-1.056 1.024-0.512 1.376-0.8 1.312-0.96 2.048-2.4t0.736-3.104-0.736-3.104-2.048-2.4q-0.352-0.288-1.376-0.8-0.672-0.352-0.672-1.056 0-0.448 0.32-0.8t0.8-0.352q0.224 0 0.48 0.096 2.496 1.056 4 3.36t1.536 5.056zM29.728 16q0 4.096-2.272 7.552t-6.048 5.056q-0.224 0.096-0.448 0.096-0.48 0-0.832-0.352t-0.32-0.8q0-0.64 0.704-1.056 0.128-0.064 0.384-0.192t0.416-0.192q0.8-0.448 1.44-0.896 2.208-1.632 3.456-4.064t1.216-5.152-1.216-5.152-3.456-4.064q-0.64-0.448-1.44-0.896-0.128-0.096-0.416-0.192t-0.384-0.192q-0.704-0.416-0.704-1.056 0-0.448 0.32-0.8t0.832-0.352q0.224 0 0.448 0.096 3.776 1.632 6.048 5.056t2.272 7.552z"],"volume-down":["0 0 28 32","M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8zM20.576 16q0 1.344-0.768 2.528t-2.016 1.664q-0.16 0.096-0.448 0.096-0.448 0-0.8-0.32t-0.32-0.832q0-0.384 0.192-0.64t0.544-0.448 0.608-0.384 0.512-0.64 0.192-1.024-0.192-1.024-0.512-0.64-0.608-0.384-0.544-0.448-0.192-0.64q0-0.48 0.32-0.832t0.8-0.32q0.288 0 0.448 0.096 1.248 0.48 2.016 1.664t0.768 2.528z"],"volume-off":["0 0 28 32","M13.728 6.272v19.456q0 0.448-0.352 0.8t-0.8 0.32-0.8-0.32l-5.952-5.952h-4.672q-0.48 0-0.8-0.352t-0.352-0.8v-6.848q0-0.48 0.352-0.8t0.8-0.352h4.672l5.952-5.952q0.32-0.32 0.8-0.32t0.8 0.32 0.352 0.8z"],circulation:["0 0 29 32","M25.6 9.92q1.344 0 2.272 0.928t0.928 2.272v9.28q0 1.28-0.928 2.24t-2.272 0.96h-22.4q-1.28 0-2.24-0.96t-0.96-2.24v-9.28q0-1.344 0.96-2.272t2.24-0.928h8v-3.52l6.4 5.76-6.4 5.76v-3.52h-6.72v6.72h19.84v-6.72h-4.8v-4.48h6.080z"],random:["0 0 33 31","M29.867 9.356l-5.003 5.003c-0.094 0.094-0.235 0.141-0.36 0.141-0.266 0-0.5-0.219-0.5-0.5v-3.002h-4.002c-2.079 0-3.064 1.423-3.94 3.111-0.453 0.875-0.844 1.782-1.219 2.673-1.735 4.033-3.768 8.223-8.849 8.223h-3.502c-0.281 0-0.5-0.219-0.5-0.5v-3.002c0-0.281 0.219-0.5 0.5-0.5h3.502c2.079 0 3.064-1.423 3.94-3.111 0.453-0.875 0.844-1.782 1.219-2.673 1.735-4.033 3.768-8.223 8.849-8.223h4.002v-3.002c0-0.281 0.219-0.5 0.5-0.5 0.141 0 0.266 0.063 0.375 0.156l4.987 4.987c0.094 0.094 0.141 0.235 0.141 0.36s-0.047 0.266-0.141 0.36zM10.262 14.781c-0.907-1.892-1.907-3.783-4.268-3.783h-3.502c-0.281 0-0.5-0.219-0.5-0.5v-3.002c0-0.281 0.219-0.5 0.5-0.5h3.502c2.783 0 4.831 1.298 6.41 3.518-0.876 1.344-1.517 2.798-2.142 4.268zM29.867 23.363l-5.003 5.003c-0.094 0.094-0.235 0.141-0.36 0.141-0.266 0-0.5-0.235-0.5-0.5v-3.002c-4.643 0-7.504 0.547-10.396-3.518 0.86-1.344 1.501-2.798 2.126-4.268 0.907 1.892 1.907 3.783 4.268 3.783h4.002v-3.002c0-0.281 0.219-0.5 0.5-0.5 0.141 0 0.266 0.063 0.375 0.156l4.987 4.987c0.094 0.094 0.141 0.235 0.141 0.36s-0.047 0.266-0.141 0.36z"],order:["0 0 32 32","M0.622 18.334h19.54v7.55l11.052-9.412-11.052-9.413v7.549h-19.54v3.725z"],single:["0 0 38 32","M2.072 21.577c0.71-0.197 1.125-0.932 0.928-1.641-0.221-0.796-0.333-1.622-0.333-2.457 0-5.049 4.108-9.158 9.158-9.158h5.428c0.056-0.922 0.221-1.816 0.482-2.667h-5.911c-3.158 0-6.128 1.23-8.361 3.463s-3.463 5.203-3.463 8.361c0 1.076 0.145 2.143 0.431 3.171 0.164 0.59 0.7 0.976 1.284 0.976 0.117 0 0.238-0.016 0.357-0.049zM21.394 25.613h-12.409v-2.362c0-0.758-0.528-1.052-1.172-0.652l-5.685 3.522c-0.644 0.4-0.651 1.063-0.014 1.474l5.712 3.69c0.637 0.411 1.158 0.127 1.158-0.63v-2.374h12.409c3.158 0 6.128-1.23 8.361-3.463 1.424-1.424 2.44-3.148 2.99-5.029-0.985 0.368-2.033 0.606-3.125 0.691-1.492 3.038-4.619 5.135-8.226 5.135zM28.718 0c-4.985 0-9.026 4.041-9.026 9.026s4.041 9.026 9.026 9.026 9.026-4.041 9.026-9.026-4.041-9.026-9.026-9.026zM30.392 13.827h-1.728v-6.822c-0.635 0.576-1.433 1.004-2.407 1.285v-1.713c0.473-0.118 0.975-0.325 1.506-0.62 0.532-0.325 0.975-0.665 1.329-1.034h1.3v8.904z"],menu:["0 0 22 32","M20.8 14.4q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2zM1.6 11.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2zM20.8 20.8q0.704 0 1.152 0.48t0.448 1.12-0.48 1.12-1.12 0.48h-19.2q-0.64 0-1.12-0.48t-0.48-1.12 0.448-1.12 1.152-0.48h19.2z"]};this.getSVG=function(e){return'\n                <svg xmlns:xlink="http://www.w3.org/1999/xlink" height="100%" version="1.1" viewBox="'+r[e][0]+'" width="100%">\n                    <use xlink:href="#aplayer-'+e+'"></use>\n                    <path class="aplayer-fill" d="'+r[e][1]+'" id="aplayer-'+e+'"></path>\n                </svg>\n            '},this.isMobile=/mobile/i.test(window.navigator.userAgent),this.isMobile&&(a.autoplay=!1);var o={element:document.getElementsByClassName("aplayer")[0],narrow:!1,autoplay:!1,mutex:!0,showlrc:0,liststart:0,showlist:!0,volume:.9,starttrack:0,loading:"Loading ...",theme:"#b7daff",mode:"circulation"};for(var u in o)o.hasOwnProperty(u)&&!a.hasOwnProperty(u)&&(a[u]=o[u]);if(this.playIndex="[object Array]"===Object.prototype.toString.call(a.music)?0:-1,this.option=a,this.audios=[],this.mode=a.mode,this.secondToTime=function(e){if(isNaN(e))return"00:00";var t=function(e){return 10>e?"0"+e:""+e},a=parseInt(e/60),n=parseInt(e-60*a),i=parseInt(a/60),s=parseInt(e/60-60*parseInt(e/60/60));return e>=3600?t(i)+":"+t(s)+":"+t(n):t(a)+":"+t(n)},this.element=this.option.element,2===this.option.showlrc||this.option.showlrc===!0){this.savelrc=[];for(var d=0;d<this.element.getElementsByClassName("aplayer-lrc-content").length;d++)this.savelrc.push(this.element.getElementsByClassName("aplayer-lrc-content")[d].innerHTML)}this.lrcs=[],this.updateBar=function(e,t,a){t=t>0?t:0,t=1>t?t:1,y[e+"Bar"].style[a]=100*t+"%"},this.updateLrc=function(){var e=arguments.length<=0||void 0===arguments[0]?l.audio.currentTime:arguments[0];if(l.lrcIndex>l.lrc.length-1||e<l.lrc[l.lrcIndex][0]||!l.lrc[l.lrcIndex+1]||e>=l.lrc[l.lrcIndex+1][0])for(var t=0;t<l.lrc.length;t++)e>=l.lrc[t][0]&&(!l.lrc[t+1]||e<l.lrc[t+1][0])&&(l.lrcIndex=t,l.lrcContents.style.transform="translateY("+(16*-l.lrcIndex+12)+"px)",l.lrcContents.style.webkitTransform="translateY("+(16*-l.lrcIndex+12)+"px)",l.lrcContents.getElementsByClassName("aplayer-lrc-current")[0].classList.remove("aplayer-lrc-current"),l.lrcContents.getElementsByTagName("p")[t].classList.add("aplayer-lrc-current"))};var c=["play","pause","canplay","playing","ended","error"];this.event={};for(var p=0;p<c.length;p++)this.event[c[p]]=[];this.trigger=function(e){for(var t=0;t<l.event[e].length;t++)l.event[e][t]()},this.multiple=this.playIndex>-1,this.music=this.multiple?this.option.music[this.playIndex]:this.option.music,this.option.showlrc&&this.element.classList.add("aplayer-withlrc"),this.option.music.length>1&&this.element.classList.add("aplayer-list"),this.multiple||"circulation"===this.mode||"order"===this.mode||(this.mode="circulation"),this.getRandomOrder();var m='\n            <div class="aplayer-pic" '+(this.music.pic?"style=\"background-image: url('"+this.music.pic+"');\"":"")+'>\n                <div class="aplayer-button aplayer-play">\n                    <button class="aplayer-icon aplayer-icon-play">'+this.getSVG("play")+('     </button>\n                </div>\n            </div>\n            <div class="aplayer-info">\n                <div class="aplayer-music">\n                    <span class="aplayer-title"></span>\n                    <span class="aplayer-author"></span>\n                </div>\n                <div class="aplayer-lrc">\n                    <div class="aplayer-lrc-contents" style="transform: translateY(0); -webkit-transform: translateY(0);"></div>\n                </div>\n                <div class="aplayer-controller">\n                    <div class="aplayer-bar-wrap">\n                        <div class="aplayer-bar">\n                            <div class="aplayer-loaded" style="width: 0"></div>\n                            <div class="aplayer-played" style="width: 0; background: '+this.option.theme+';">\n                                <span class="aplayer-thumb" style="border: 1px solid '+this.option.theme+';"></span>\n                            </div>\n                        </div>\n                    </div>\n                    <div class="aplayer-time">\n                        <span class="aplayer-time-inner">\n                            - <span class="aplayer-ptime">00:00</span> / <span class="aplayer-dtime">00:00</span>\n                        </span>\n                        <div class="aplayer-volume-wrap">\n                            <button class="aplayer-icon aplayer-icon-volume-down" '+(this.isMobile?'style="display: none;"':"")+">")+this.getSVG("volume-down")+('             </button>\n                            <div class="aplayer-volume-bar-wrap">\n                                <div class="aplayer-volume-bar">\n                                    <div class="aplayer-volume" style="height: 80%; background: '+this.option.theme+';"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <button class="aplayer-icon aplayer-icon-mode">')+this.getSVG(this.mode)+("         </button>\n                        "+(this.multiple?'<button class="aplayer-icon aplayer-icon-menu">'+this.getSVG("menu")+"         </button>":"")+"\n                    </div>\n                </div>\n            </div>");if(this.multiple){m+='\n            <div class="aplayer-list" '+(this.option.listmaxheight?'style="max-height: '+this.option.listmaxheight:"")+'">\n                <ol>';for(var h=0;h<this.option.music.length;h++)m+='\n                    <li>\n                        <span class="aplayer-list-cur" style="background: '+this.option.theme+';"></span>\n                        <span class="aplayer-list-index">'+(h+1)+'</span>\n                        <span class="aplayer-list-title">'+this.option.music[h].title+'</span>\n                        <span class="aplayer-list-author">'+this.option.music[h].author+"</span>\n                    </li>";m+="\n                </ol>\n            </div>"}this.element.innerHTML=m,this.element.offsetWidth<300&&(this.element.getElementsByClassName("aplayer-icon-mode")[0].style.display="none"),this.ptime=this.element.getElementsByClassName("aplayer-ptime")[0],this.element.getElementsByClassName("aplayer-info")[0].offsetWidth<200&&this.element.getElementsByClassName("aplayer-time")[0].classList.add("aplayer-time-narrow");var y={};y.barWrap=this.element.getElementsByClassName("aplayer-bar-wrap")[0],this.option.narrow&&this.element.classList.add("aplayer-narrow"),this.button=this.element.getElementsByClassName("aplayer-button")[0],this.button.addEventListener("click",function(){l.toggle()}),this.multiple&&!function(){for(var e=l.element.getElementsByClassName("aplayer-list")[0].getElementsByTagName("li"),t=function(t){e[t].addEventListener("click",function(){var a=parseInt(e[t].getElementsByClassName("aplayer-list-index")[0].innerHTML)-1;a!==l.playIndex?(l.setMusic(a),l.play()):l.toggle()})},a=0;a<l.option.music.length;a++)t(a)}(),y.playedBar=this.element.getElementsByClassName("aplayer-played")[0],y.loadedBar=this.element.getElementsByClassName("aplayer-loaded")[0];var v=this.element.getElementsByClassName("aplayer-thumb")[0],f=void 0;y.barWrap.addEventListener("click",function(e){var t=e||window.event;f=y.barWrap.clientWidth;var a=(t.clientX-i(y.barWrap))/f;isNaN(l.audio.duration)?l.updateBar("played",0,"width"):(l.updateBar("played",a,"width"),l.element.getElementsByClassName("aplayer-ptime")[0].innerHTML=l.secondToTime(a*l.audio.duration),l.audio.currentTime=parseFloat(y.playedBar.style.width)/100*l.audio.duration)}),v.addEventListener("mouseover",function(){v.style.background=l.option.theme}),v.addEventListener("mouseout",function(){v.style.background="#fff"});var g=function(e){var t=e||window.event,a=(t.clientX-i(y.barWrap))/f;a=a>0?a:0,a=1>a?a:1,l.updateBar("played",a,"width"),l.option.showlrc&&l.updateLrc(parseFloat(y.playedBar.style.width)/100*l.audio.duration),l.element.getElementsByClassName("aplayer-ptime")[0].innerHTML=l.secondToTime(a*l.audio.duration)},w=function E(){document.removeEventListener("mouseup",E),document.removeEventListener("mousemove",g),isNaN(l.audio.duration)?l.updateBar("played",0,"width"):(l.audio.currentTime=parseFloat(y.playedBar.style.width)/100*l.audio.duration,l.playedTime=setInterval(function(){l.updateBar("played",l.audio.currentTime/l.audio.duration,"width"),l.option.showlrc&&l.updateLrc(),l.element.getElementsByClassName("aplayer-ptime")[0].innerHTML=l.secondToTime(l.audio.currentTime),l.trigger("playing")},100))};v.addEventListener("mousedown",function(){f=y.barWrap.clientWidth,clearInterval(l.playedTime),document.addEventListener("mousemove",g),document.addEventListener("mouseup",w)}),y.volumeBar=this.element.getElementsByClassName("aplayer-volume")[0];var b=this.element.getElementsByClassName("aplayer-volume-bar")[0];this.volumeicon=this.element.getElementsByClassName("aplayer-time")[0].getElementsByTagName("button")[0];var L=50;this.element.getElementsByClassName("aplayer-volume-bar-wrap")[0].addEventListener("click",function(e){var t=e||window.event;if(void 0!=jQuery("html").css("boxSizing")&&"border-box"==jQuery("html").css("boxSizing"))var a=jQuery("#wpadminbar").length>0?parseInt(jQuery("html").css("marginTop").replace("px","")):0;else var a=0;var n=(L-t.clientY+s(b)+a)/L;n=n>0?n:0,n=1>n?n:1,l.volume(n)}),this.volumeicon.addEventListener("click",function(){l.audio.muted?(l.audio.muted=!1,l.volumeicon.className=1===l.audio.volume?"aplayer-icon aplayer-icon-volume-up":"aplayer-icon aplayer-icon-volume-down",1===l.audio.volume?(l.volumeicon.className="aplayer-icon aplayer-icon-volume-up",l.volumeicon.innerHTML=l.getSVG("volume-up")):(l.volumeicon.className="aplayer-icon aplayer-icon-volume-down",l.volumeicon.innerHTML=l.getSVG("volume-down")),l.updateBar("volume",l.audio.volume,"height")):(l.audio.muted=!0,l.volumeicon.className="aplayer-icon aplayer-icon-volume-off",l.volumeicon.innerHTML=l.getSVG("volume-off"),l.updateBar("volume",0,"height"))});var T=this.element.getElementsByClassName("aplayer-icon-mode")[0];T.addEventListener("click",function(){l.multiple?"random"===l.mode?l.mode="single":"single"===l.mode?l.mode="order":"order"===l.mode?l.mode="circulation":"circulation"===l.mode&&(l.mode="random"):l.mode="circulation"===l.mode?"order":"circulation",T.innerHTML=l.getSVG(l.mode),l.audio.loop=!(l.multiple||"order"===l.mode)}),this.multiple&&!function(){var e=l.element.getElementsByClassName("aplayer-list")[0];e.style.height=e.offsetHeight+"px",l.element.getElementsByClassName("aplayer-icon-menu")[0].addEventListener("click",function(){e.classList.contains("aplayer-list-hide")?e.classList.remove("aplayer-list-hide"):e.classList.add("aplayer-list-hide")}),l.option.showlist||e.classList.add("aplayer-list-hide")}(),this.setMusic("random"===this.mode?this.randomOrder[0]:this.option.liststart),n.push(this)}return a(e,[{key:"setMusic",value:function(e){var t=this;this.multiple&&"undefined"!=typeof e&&(this.playIndex=e);var a=this.playIndex;this.music=this.multiple?this.option.music[a]:this.option.music,this.music.pic&&(this.element.getElementsByClassName("aplayer-pic")[0].style.backgroundImage="url('"+this.music.pic+"')"),this.element.getElementsByClassName("aplayer-title")[0].innerHTML=this.music.title,this.element.getElementsByClassName("aplayer-author")[0].innerHTML=" - "+this.music.author,this.multiple&&(this.element.getElementsByClassName("aplayer-list-light")[0]&&this.element.getElementsByClassName("aplayer-list-light")[0].classList.remove("aplayer-list-light"),this.element.getElementsByClassName("aplayer-list")[0].getElementsByTagName("li")[a].classList.add("aplayer-list-light")),this.audio&&(this.pause(),this.audio.currentTime=0),this.multiple&&(this.element.getElementsByClassName("aplayer-list")[0].scrollTop=33*a),this.multiple&&!this.audios[a]||-1===this.playIndex?(this.audio=document.createElement("audio"),this.audio.src=this.music.url,this.audio.preload=this.option.preload?this.option.preload:"auto",this.audio.addEventListener("play",function(){if(t.button.classList.contains("aplayer-play")){if(t.button.classList.remove("aplayer-play"),t.button.classList.add("aplayer-pause"),t.button.innerHTML="",setTimeout(function(){t.button.innerHTML='\n                                    <button class="aplayer-icon aplayer-icon-pause">'+t.getSVG("pause")+"     </button>"},100),t.option.mutex)for(var e=0;e<n.length;e++)t!=n[e]&&n[e].pause();t.playedTime&&clearInterval(t.playedTime),t.playedTime=setInterval(function(){t.updateBar("played",t.audio.currentTime/t.audio.duration,"width"),t.option.showlrc&&t.updateLrc(),t.ptime.innerHTML=t.secondToTime(t.audio.currentTime),t.trigger("playing")},100),t.trigger("play")}}),this.audio.addEventListener("pause",function(){(t.button.classList.contains("aplayer-pause")||t.ended)&&(t.ended=!1,t.button.classList.remove("aplayer-pause"),t.button.classList.add("aplayer-play"),t.button.innerHTML="",setTimeout(function(){t.button.innerHTML='\n                                    <button class="aplayer-icon aplayer-icon-play">'+t.getSVG("play")+"     </button>"},100),clearInterval(t.playedTime),t.trigger("pause"))}),this.audio.addEventListener("ended",function(){""!==t.lrcContents.innerHTML&&(t.lrcContents.getElementsByClassName("aplayer-lrc-current")[0].classList.remove("aplayer-lrc-current"),t.lrcContents.getElementsByTagName("p")[0].classList.add("aplayer-lrc-current"),t.lrcContents.style.transform="translateY(12px)",t.lrcContents.style.webkitTransform="translateY(12px)")}),this.audio.addEventListener("durationchange",function(){1!==t.audio.duration&&(t.element.getElementsByClassName("aplayer-dtime")[0].innerHTML=t.secondToTime(t.audio.duration))}),this.audio.addEventListener("progress",function(){var e=t.audio.buffered.length?t.audio.buffered.end(t.audio.buffered.length-1)/t.audio.duration:0;t.updateBar("loaded",e,"width")}),this.audio.addEventListener("error",function(){t.element.getElementsByClassName("aplayer-author")[0].innerHTML=" - Error happens ╥﹏╥",t.trigger("pause")}),this.audio.addEventListener("canplay",function(){t.trigger("canplay")}),this.ended=!1,this.multiple?this.audio.addEventListener("ended",function(){return t.isMobile?(t.ended=!0,void t.pause()):void(0!==t.audio.currentTime&&("random"===t.mode?t.setMusic(t.nextRandomNum()):"single"===t.mode?t.setMusic(t.playIndex):"order"===t.mode?t.playIndex<t.option.music.length-1?t.setMusic(++t.playIndex):(t.ended=!0,t.pause(),t.trigger("ended")):"circulation"===t.mode&&t.setMusic(t.playIndex<t.option.music.length-1?++t.playIndex:0)))}):this.audio.addEventListener("ended",function(){"order"===t.mode&&(t.ended=!0,t.pause(),t.trigger("ended"))}),this.audio.volume=parseInt(this.element.getElementsByClassName("aplayer-volume")[0].style.height)/100,this.audio.loop=!(this.multiple||"order"===this.mode),this.multiple&&(this.audios[a]=this.audio)):(this.audio=this.audios[a],this.audio.volume=parseInt(this.element.getElementsByClassName("aplayer-volume")[0].style.height)/100,this.audio.currentTime=0);var i=function(e){for(var t=e.split("\n"),a=[],n=t.length,i=0;n>i;i++){var s=t[i].match(/\[(\d{2}):(\d{2})\.(\d{2,3})]/g),l=t[i].replace(/\[(\d{2}):(\d{2})\.(\d{2,3})]/g,"").replace(/^\s+|\s+$/g,"");if(null!=s)for(var r=s.length,o=0;r>o;o++){var u=/\[(\d{2}):(\d{2})\.(\d{2,3})]/.exec(s[o]),d=60*u[1]+parseInt(u[2])+parseInt(u[3])/(2===(u[3]+"").length?100:1e3);a.push([d,l])}}return a.sort(function(e,t){return e[0]-t[0]}),a};this.option.showlrc&&!function(){var e=t.multiple?a:0;t.lrcs[e]||!function(){var a="";1===t.option.showlrc?a=t.multiple?t.option.music[e].lrc:t.option.music.lrc:2===t.option.showlrc||t.option.showlrc===!0?a=t.savelrc[e]:3===t.option.showlrc&&!function(){var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4===n.readyState)if(n.status>=200&&n.status<300||304===n.status){a=n.responseText,t.lrcs[e]=i(a),t.lrc=t.lrcs[e];var s="";t.lrcContents=t.element.getElementsByClassName("aplayer-lrc-contents")[0];for(var l=0;l<t.lrc.length;l++)s+=0==l?"<p class='aplayer-lrc-current'>"+t.lrc[l][1]+"</p>":"<p>"+t.lrc[l][1]+"</p>";t.lrcContents.innerHTML=s,t.lrcIndex||(t.lrcIndex=0),t.lrcContents.style.transform="translateY(12px)",t.lrcContents.style.webkitTransform="translateY(12px)"}else t.lrcContents.innerHTML="",console.log("Request was unsuccessful: "+n.status)};var s=void 0;s=t.multiple?t.option.music[e].lrc:t.option.music.lrc,n.open("get",s,!0),n.send(null)}(),t.lrcs[e]=a?i(a):[["00:00:00",t.option.loading]]}(),t.lrc=t.lrcs[e];var n="";t.lrcContents=t.element.getElementsByClassName("aplayer-lrc-contents")[0];for(var s=0;s<t.lrc.length;s++)n+="<p>"+t.lrc[s][1]+"</p>";t.lrcContents.innerHTML=n,t.lrcIndex||(t.lrcIndex=0),t.lrcContents.getElementsByTagName("p")[0].classList.add("aplayer-lrc-current"),t.lrcContents.style.transform="translateY(12px)",t.lrcContents.style.webkitTransform="translateY(12px)"}(),1!==this.audio.duration&&(this.element.getElementsByClassName("aplayer-dtime")[0].innerHTML=this.audio.duration?this.secondToTime(this.audio.duration):"00:00"),this.option.autoplay&&!this.isMobile&&this.play(),this.option.autoplay=!0,this.isMobile&&this.pause(),this.volume(this.option.volume)}},{key:"play",value:function(e){"[object Number]"===Object.prototype.toString.call(e)&&(this.audio.currentTime=e),this.audio.paused&&this.audio.play()}},{key:"pause",value:function(){this.audio.paused||this.audio.pause()}},{key:"volume",value:function(e){this.updateBar("volume",e,"height"),this.audio.volume=e,this.audio.muted&&(this.audio.muted=!1),1===e?(this.volumeicon.className="aplayer-icon aplayer-icon-volume-up",this.volumeicon.innerHTML=this.getSVG("volume-up")):(this.volumeicon.className="aplayer-icon aplayer-icon-volume-down",this.volumeicon.innerHTML=this.getSVG("volume-down"))}},{key:"on",value:function(e,t){"function"==typeof t&&this.event[e].push(t)}},{key:"toggle",value:function(){this.button.classList.contains("aplayer-play")?this.play():this.button.classList.contains("aplayer-pause")&&this.pause()}},{key:"getRandomOrder",value:function(){function e(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}function t(t){for(var a,n=t.length,i=new Array(n),s=0;n>s;s++)a=e(0,s),a!==s&&(i[s]=i[a]),i[a]=t[s];return i}if(this.multiple){if(!this.normalOrder){this.normalOrder=[];for(var a=0;a<this.option.music.length;a++)this.normalOrder[a]=a}this.randomOrder=t(this.normalOrder)}}},{key:"nextRandomNum",value:function(){if(this.multiple){var e=this.randomOrder.indexOf(this.playIndex);return e===this.randomOrder.length-1?this.randomOrder[0]:this.randomOrder[e+1]}return 0}}]),e}();e.exports=i}])});